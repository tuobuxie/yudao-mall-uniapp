import{s,v as e,d as t,as as a,r as l,e as c,j as o,f as r,w as n,k as i,y as u,u as d,l as m,F as f,m as b,A as p,p as _,t as x,at as g,au as y,av as w,W as v,aw as h,G as k,i as $,H as I,c as T,g as C,ah as V,T as S,ak as j,q as L,ax as F,ay as O}from"./index-DugDUeNE.js";import{f as B,_ as N}from"./s-layout.BR6uiIJz.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as A}from"./s-empty.SJwFoNXy.js";import{c as M}from"./comment-item.FYceYeoe.js";import{_ as P}from"./mp-html.UCcWV-JH.js";const R=H({__name:"detail-navbar",emits:["clickLeft"],setup(I,{emit:T}){const C=s.$platform.device.statusBarHeight,V=s.$platform.navbar;s.$platform.capsule.width,s.$platform.capsule.height;const S=e({tabOpacityVal:0,curTab:"goods",tabList:[{label:"商品",value:"goods",to:"detail-swiper-selector"},{label:"评价",value:"comment",to:"detail-comment-selector"},{label:"详情",value:"detail",to:"detail-content-selector"}]}),j=T,L=s.$router.hasHistory();function F(){L?s.$router.back():s.$router.go("/pages/index/index"),j("clickLeft")}function O(){w()}let H={top:0,bottom:0};return t((e=>{S.tabOpacityVal=e.scrollTop>s.$platform.navbar?1:.01*e.scrollTop,0===H.top&&a((()=>{new Promise(((s,e)=>{v().select(".detail-comment-selector").boundingClientRect((e=>{e?(H.top=e.top,H.bottom=e.top+e.height,s(e)):s(null)})).exec()}))}),50),e.scrollTop<H.top-V?S.curTab="goods":e.scrollTop>=H.top-V&&e.scrollTop<=H.bottom-V?S.curTab="comment":S.curTab="detail"})),(s,e)=>{const t=l(c("su-status-bar"),B),a=k,w=$,v=l(c("su-fixed"),N);return o(),r(v,{alway:"",bgStyles:{background:"#fff"},val:0,noNav:"",opacity:"",placeholder:!1},{default:n((()=>[i(t),i(w,{class:"ui-bar ss-flex ss-col-center ss-row-between ss-p-x-20",style:u([{height:d(V)-d(C)+"px"}])},{default:n((()=>[i(w,{class:"icon-box ss-flex"},{default:n((()=>[i(w,{class:"icon-button icon-button-left ss-flex ss-row-center",onClick:F},{default:n((()=>[d(L)?(o(),r(a,{key:0,class:"sicon-back"})):(o(),r(a,{key:1,class:"sicon-home"}))])),_:1}),i(w,{class:"line"}),i(w,{class:"icon-button icon-button-right ss-flex ss-row-center",onClick:O},{default:n((()=>[i(a,{class:"sicon-more"})])),_:1})])),_:1}),i(w,{class:"detail-tab-card ss-flex-1",style:u([{opacity:S.tabOpacityVal}])},{default:n((()=>[i(w,{class:"tab-box ss-flex ss-col-center ss-row-around"},{default:n((()=>[(o(!0),m(f,null,b(S.tabList,(s=>(o(),r(w,{class:"tab-item ss-flex-1 ss-flex ss-row-center ss-col-center",key:s.value,onClick:e=>function(s){let e=0;"comment"===s.value?e=H.top-V+1:"detail"===s.value&&(e=H.bottom-V+1),h({scrollTop:e,duration:200})}(s)},{default:n((()=>[i(w,{class:p(["tab-title",S.curTab===s.value?"cur-tab-title":""])},{default:n((()=>[_(x(s.label),1)])),_:2},1032,["class"]),g(i(w,{class:"tab-line"},null,512),[[y,S.curTab===s.value]])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-ba5f4c32"]]),q=H({__name:"detail-cell",props:{label:{type:String,default:""},value:{type:String,default:""}},emits:["click"],setup(s,{emit:e}){const t=e,a=()=>{t("click")};return(e,t)=>{const l=$,c=k,u=I;return o(),r(l,{class:"detail-cell-wrap ss-flex ss-col-center ss-row-between",onClick:a},{default:n((()=>[i(l,{class:"label-text"},{default:n((()=>[_(x(s.label),1)])),_:1}),i(l,{class:"cell-content ss-line-1 ss-flex-1"},{default:n((()=>[_(x(s.value),1)])),_:1}),i(u,{class:"ss-reset-button"},{default:n((()=>[i(c,{class:"_icon-forward right-forwrad-icon"})])),_:1})])),_:1})}}},[["__scopeId","data-v-bbef138a"]]),z={__name:"detail-cell-sku",props:{modelValue:{type:Array,default:()=>[]},sku:{type:Object}},setup(s){const e=s,t=T((()=>{var s;if(!(null==(s=e.sku)?void 0:s.id))return"请选择商品规格";let t="";return e.sku.properties.forEach((s=>{t+=s.propertyName+":"+s.valueName+" "})),t}));return(s,e)=>(o(),r(q,{label:"选择",value:t.value},null,8,["value"]))}},E=H({__name:"detail-tabbar",props:{modelValue:{type:Object,default(){}},bg:{type:String,default:"bg-white"},bgStyles:{type:Object,default(){}},ui:{type:String,default:""},noFixed:{type:Boolean,default:!1},topRadius:{type:Number,default:0},collectIcon:{type:Boolean,default:!0},serviceIcon:{type:Boolean,default:!0},shareIcon:{type:Boolean,default:!0}},setup(t){e({});const a=t;async function u(){if(a.modelValue.favorite){const{code:e}=await j.deleteFavorite(a.modelValue.id);if(0!==e)return;s.$helper.toast("取消收藏"),a.modelValue.favorite=!1}else{const{code:e}=await j.createFavorite(a.modelValue.id);if(0!==e)return;s.$helper.toast("收藏成功"),a.modelValue.favorite=!0}}const b=()=>{s.$router.go("/pages/chat/index",{id:a.modelValue.id})};return(e,a)=>{const p=L,x=$,g=l(c("su-fixed"),N);return o(),r(g,{bottom:"",placeholder:"",bg:"bg-white"},{default:n((()=>[i(x,{class:"ui-tabbar-box"},{default:n((()=>[i(x,{class:"ui-tabbar ss-flex ss-col-center ss-row-between"},{default:n((()=>[t.collectIcon?(o(),r(x,{key:0,class:"detail-tabbar-item ss-flex ss-flex-col ss-row-center ss-col-center",onClick:u},{default:n((()=>[t.modelValue.favorite?(o(),m(f,{key:0},[i(p,{class:"item-icon",src:d(s).$url.static("/static/img/shop/goods/collect_1.gif"),mode:"aspectFit"},null,8,["src"]),i(x,{class:"item-title"},{default:n((()=>[_("已收藏")])),_:1})],64)):(o(),m(f,{key:1},[i(p,{class:"item-icon",src:d(s).$url.static("/static/img/shop/goods/collect_0.png"),mode:"aspectFit"},null,8,["src"]),i(x,{class:"item-title"},{default:n((()=>[_("收藏")])),_:1})],64))])),_:1})):C("",!0),t.serviceIcon?(o(),r(x,{key:1,class:"detail-tabbar-item ss-flex ss-flex-col ss-row-center ss-col-center",onClick:b},{default:n((()=>[i(p,{class:"item-icon",src:d(s).$url.static("/static/img/shop/goods/message.png"),mode:"aspectFit"},null,8,["src"]),i(x,{class:"item-title"},{default:n((()=>[_("客服")])),_:1})])),_:1})):C("",!0),t.shareIcon?(o(),r(x,{key:2,class:"detail-tabbar-item ss-flex ss-flex-col ss-row-center ss-col-center",onClick:d(V)},{default:n((()=>[i(p,{class:"item-icon",src:d(s).$url.static("/static/img/shop/goods/share.png"),mode:"aspectFit"},null,8,["src"]),i(x,{class:"item-title"},{default:n((()=>[_("分享")])),_:1})])),_:1},8,["onClick"])):C("",!0),S(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3})])),_:3})}}},[["__scopeId","data-v-7274cee1"]]),G=H({__name:"detail-skeleton",setup(e){const t=T((()=>s.$store("sys")));return(s,e)=>{const a=$,u=I,d=l(c("su-fixed"),N);return o(),r(a,{class:p(["skeleton-wrap",["theme-"+t.value.mode,"main-"+t.value.theme,"font-"+t.value.fontSize]])},{default:n((()=>[i(a,{class:"skeleton-banner"}),i(a,{class:"container-box"},{default:n((()=>[i(a,{class:"container-box-strip title ss-m-b-58"}),i(a,{class:"container-box-strip ss-m-b-20"}),i(a,{class:"container-box-strip ss-m-b-20"}),i(a,{class:"container-box-strip w-364"})])),_:1}),i(a,{class:"container-box"},{default:n((()=>[i(a,{class:"ss-flex ss-row-between ss-m-b-34"},{default:n((()=>[i(a,{class:"container-box-strip w-380"}),i(a,{class:"circle"})])),_:1}),i(a,{class:"ss-flex ss-row-between ss-m-b-34"},{default:n((()=>[i(a,{class:"container-box-strip w-556"}),i(a,{class:"circle"})])),_:1}),i(a,{class:"ss-flex ss-row-between"},{default:n((()=>[i(a,{class:"container-box-strip w-556"}),i(a,{class:"circle"})])),_:1})])),_:1}),i(a,{class:"container-box"},{default:n((()=>[i(a,{class:"container-box-strip w-198 ss-m-b-42"}),i(a,{class:"ss-flex"},{default:n((()=>[i(a,{class:"circle ss-m-r-12"}),i(a,{class:"container-box-strip w-252"})])),_:1})])),_:1}),i(d,{bottom:"",placeholder:"",bg:"bg-white"},{default:n((()=>[i(a,{class:"ui-tabbar-box"},{default:n((()=>[i(a,{class:"foot ss-flex ss-col-center"},{default:n((()=>[i(a,{class:"ss-m-r-54 ss-m-l-32"},{default:n((()=>[i(a,{class:"rec ss-m-b-8"}),i(a,{class:"oval"})])),_:1}),i(a,{class:"ss-m-r-54"},{default:n((()=>[i(a,{class:"rec ss-m-b-8"}),i(a,{class:"oval"})])),_:1}),i(a,{class:"ss-m-r-50"},{default:n((()=>[i(a,{class:"rec ss-m-b-8"}),i(a,{class:"oval"})])),_:1}),i(u,{class:"ss-reset-button add-btn ui-Shadow-Main"}),i(u,{class:"ss-reset-button buy-btn ui-Shadow-Main"})])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-bdd30749"]]),W=H({__name:"detail-comment-card",props:{goodsId:{type:[Number,String],default:0}},setup(t){const a=t,u=e({commentList:[],total:0});return F((()=>{!async function(s){const{data:e}=await O.getCommentPage(s,1,3,0);u.commentList=e.list,u.total=e.total}(a.goodsId)})),(e,a)=>{const p=$,g=I,y=k,w=l(c("s-empty"),A);return o(),r(p,{class:"detail-comment-card bg-white"},{default:n((()=>[i(p,{class:"card-header ss-flex ss-col-center ss-row-between ss-p-b-30"},{default:n((()=>[i(p,{class:"ss-flex ss-col-center"},{default:n((()=>[i(p,{class:"line"}),i(p,{class:"title ss-m-l-20 ss-m-r-10"},{default:n((()=>[_("评价")])),_:1}),i(p,{class:"des"},{default:n((()=>[_("("+x(u.total)+")",1)])),_:1})])),_:1}),u.commentList.length>0?(o(),r(p,{key:0,class:"ss-flex ss-col-center",onClick:a[0]||(a[0]=e=>d(s).$router.go("/pages/goods/comment/list",{id:t.goodsId}))},{default:n((()=>[i(g,{class:"ss-reset-button more-btn"},{default:n((()=>[_("查看全部")])),_:1}),i(y,{class:"cicon-forward"})])),_:1})):C("",!0)])),_:1}),i(p,{class:"card-content"},{default:n((()=>[(o(!0),m(f,null,b(u.commentList,(s=>(o(),r(p,{class:"comment-box ss-p-y-30",key:s.id},{default:n((()=>[i(M,{item:s},null,8,["item"])])),_:2},1024)))),128)),0===u.commentList.length?(o(),r(w,{key:0,paddingTop:"0",icon:"/static/comment-empty.png",text:"期待您的第一个评价"})):C("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-7aab3387"]]),Z=H({__name:"detail-content-card",props:{content:{type:String,default:""}},setup:s=>(e,t)=>{const a=$,u=l(c("mp-html"),P);return o(),r(a,{class:"detail-content-card bg-white ss-m-x-20 ss-p-t-20"},{default:n((()=>[i(a,{class:"card-header ss-flex ss-col-center ss-m-b-30 ss-m-l-20"},{default:n((()=>[i(a,{class:"line"}),i(a,{class:"title ss-m-l-20 ss-m-r-20"},{default:n((()=>[_("详情")])),_:1})])),_:1}),i(a,{class:"card-content"},{default:n((()=>[i(u,{content:s.content},null,8,["content"])])),_:1})])),_:1})}},[["__scopeId","data-v-3e95ca3c"]]);export{z as _,G as a,W as b,Z as c,R as d,E as e};
