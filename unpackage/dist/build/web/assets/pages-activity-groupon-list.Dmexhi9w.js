import{B as a,s as t,v as s,aE as o,o as e,r as n,e as l,f as i,w as r,u as c,a5 as u,j as p,k as g,y as m,l as d,m as f,F as y,p as _,t as b,g as h,i as v,G as S,z as k,a9 as x,H as j}from"./index-Ch_jkemp.js";import{_ as w}from"./s-goods-column.ww3VogJ9.js";import{_ as C}from"./uni-load-more.C8hvkNiT.js";import{S as $}from"./s-layout.Ckk_oEQ_.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./useGoods.CmR2wUi_.js";const D=z({__name:"list",setup(z){a((a=>({ff449a6e:c(F)})));const{safeAreaInsets:D,safeArea:N}=t.$platform.device,A=t.$platform.navbar,E=2*t.$platform.device.statusBarHeight,B=2*(N.height+D.bottom)+E-A-350,F=t.$url.css("/static/img/shop/goods/groupon-header.png"),G=s({pagination:{list:[],total:0,pageNo:1,pageSize:10},loadStatus:"",summaryData:{}});async function H(){G.loadStatus="loading";const{data:a}=await u.getCombinationActivityPage({pageNo:G.pagination.pageNo,pageSize:G.pagination.pageSize});a.list.forEach((a=>{G.pagination.list.push({...a,price:a.combinationPrice})})),G.pagination.total=a.total,G.loadStatus=G.pagination.list.length<G.pagination.total?"more":"noMore"}function I(){"noMore"!==G.loadStatus&&(G.pagination.pageNo++,H())}return o((()=>I())),e((()=>{(async()=>{const{data:a}=await u.getCombinationRecordSummary();G.summaryData=a})(),H()})),(a,s)=>{const o=v,e=S,u=j,z=n(l("s-goods-column"),w),D=n(l("uni-load-more"),C),N=k,A=n(l("s-layout"),$);return p(),i(A,{bgStyle:{color:"#FE832A"},navbar:"inner"},{default:r((()=>[g(o,{class:"page-bg",style:m([{marginTop:"-"+Number(E+88)+"rpx"}])},null,8,["style"]),g(o,{class:"list-content"},{default:r((()=>[g(o,{class:"content-header ss-flex-col ss-col-center ss-row-center"},{default:r((()=>[g(o,{class:"content-header-title ss-flex ss-row-center"},{default:r((()=>[(p(!0),d(y,null,f(G.summaryData.avatars,((a,t)=>(p(),i(o,{key:t,class:"picture",style:m(6===t?"position: relative":"position: static")},{default:r((()=>[x("span",{class:"avatar",style:m(`background-image: url(${a})`)},null,4),6===t&&G.summaryData.avatars.length>3?(p(),d("span",{key:0,class:"mengceng"},[x("i",null,"···")])):h("",!0)])),_:2},1032,["style"])))),128)),g(e,{class:"pic_count"},{default:r((()=>[_(b(G.summaryData.userCount||0)+"人参与",1)])),_:1})])),_:1})])),_:1}),g(N,{class:"scroll-box",style:m({height:B+"rpx"}),"scroll-y":"true","scroll-with-animation":!1,"enable-back-to-top":!0},{default:r((()=>[(p(!0),d(y,null,f(G.pagination.list,(a=>(p(),i(o,{class:"goods-box ss-m-b-20",key:a.id},{default:r((()=>[g(z,{class:"",size:"lg",data:a,grouponTag:!0,onClick:s=>c(t).$router.go("/pages/goods/groupon",{id:a.id})},{cart:r((()=>[g(u,{class:"ss-reset-button cart-btn"},{default:r((()=>[_("去拼团")])),_:1})])),_:2},1032,["data","onClick"])])),_:2},1024)))),128)),G.pagination.total>0?(p(),i(D,{key:0,status:G.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:I},null,8,["status"])):h("",!0)])),_:1},8,["style"])])),_:1})])),_:1})}}},[["__scopeId","data-v-131c4a66"]]);export{D as default};
