import{v as a,o as t,aE as s,a as o,aF as e,b as i,r as n,e as r,f as l,w as u,a5 as d,j as c,k as p,g,l as m,m as f,F as _,i as b,p as y,t as k,A as j,u as x,s as S,H as v}from"./index-kPUodEo8.js";import{_ as C}from"./su-tabs.BcL6QNZj.js";import{_ as w}from"./su-sticky.B6SSP8sh.js";import{_ as h}from"./s-empty.B9iGK6-f.js";import{_ as T}from"./s-goods-item.nGp3A0wy.js";import{_ as N}from"./uni-load-more.8Kzkyk-l.js";import{S as z}from"./s-layout.ChN2kRO2.js";import{o as G}from"./useGoods.CNv-03RG.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{c as M}from"./concat.CXHZS4ws.js";const F=I({__name:"order",setup(I){const F=a({currentTab:0,pagination:{list:[],total:0,pageNo:1,pageSize:5},loadStatus:"",deleteOrderId:0}),P=[{name:"全部"},{name:"进行中",value:0},{name:"拼团成功",value:1},{name:"拼团失败",value:2}];function $(a){e(F.pagination),F.currentTab=a.index,A()}async function A(){F.loadStatus="loading";const{code:a,data:t}=await d.getCombinationRecordPage({pageNo:F.pagination.pageNo,pageSize:F.pagination.pageSize,status:P[F.currentTab].value});0===a&&(F.pagination.list=M(F.pagination.list,t.list),F.pagination.total=t.total,F.loadStatus=F.pagination.list.length<F.pagination.total?"more":"noMore")}function B(){"noMore"!==F.loadStatus&&(F.pagination.pageNo++,A())}return t((a=>{a.type&&(F.currentTab=a.type),A()})),s((()=>{B()})),o((()=>{e(F.pagination),A(),setTimeout((function(){i()}),800)})),(a,t)=>{const s=n(r("su-tabs"),C),o=n(r("su-sticky"),w),e=n(r("s-empty"),h),i=b,d=n(r("s-goods-item"),T),I=v,M=n(r("uni-load-more"),N),A=n(r("s-layout"),z);return c(),l(A,{title:"我的拼团"},{default:u((()=>[p(o,{bgColor:"#fff"},{default:u((()=>[p(s,{list:P,scrollable:!1,onChange:$,current:F.currentTab},null,8,["current"])])),_:1}),0===F.pagination.total?(c(),l(e,{key:0,icon:"/static/goods-empty.png"})):g("",!0),F.pagination.total>0?(c(),l(i,{key:1},{default:u((()=>[(c(!0),m(_,null,f(F.pagination.list,(a=>(c(),l(i,{class:"order-list-card-box bg-white ss-r-10 ss-m-t-14 ss-m-20",key:a.id},{default:u((()=>[p(i,{class:"order-card-header ss-flex ss-col-center ss-row-between ss-p-x-20"},{default:u((()=>[p(i,{class:"order-no"},{default:u((()=>[y("拼团编号："+k(a.id),1)])),_:2},1024),p(i,{class:j(["ss-font-26",x(G)(a)])},{default:u((()=>[y(k(P.find((t=>t.value===a.status)).name),1)])),_:2},1032,["class"])])),_:2},1024),p(i,{class:"border-bottom"},{default:u((()=>[p(d,{img:a.picUrl,title:a.spuName,price:a.combinationPrice},{groupon:u((()=>[p(i,{class:"ss-flex"},{default:u((()=>[p(i,{class:"sales-title"},{default:u((()=>[y(k(a.userSize)+" 人团 ",1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["img","title","price"])])),_:2},1024),p(i,{class:"order-card-footer ss-flex ss-row-right ss-p-x-20"},{default:u((()=>[p(I,{class:"detail-btn ss-reset-button",onClick:t=>x(S).$router.go("/pages/order/detail",{id:a.orderId})},{default:u((()=>[y(" 订单详情 ")])),_:2},1032,["onClick"]),p(I,{class:j(["tool-btn ss-reset-button",{"ui-BG-Main-Gradient":0===a.status}]),onClick:t=>x(S).$router.go("/pages/activity/groupon/detail",{id:a.id})},{default:u((()=>[y(k(0===a.status?"邀请拼团":"拼团详情"),1)])),_:2},1032,["class","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):g("",!0),F.pagination.total>0?(c(),l(M,{key:2,status:F.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:B},null,8,["status"])):g("",!0)])),_:1})}}},[["__scopeId","data-v-86a17d0b"]]);export{F as default};
