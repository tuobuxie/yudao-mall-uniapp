import{v as t,aE as a,o as s,r as o,e as i,f as e,w as l,S as n,a4 as c,am as d,j as A,k as p,p as g,l as f,m as r,F as m,g as u,i as S,q as y,t as B,u as I,s as x,H as Q}from"./index-kPUodEo8.js";import{_ as U}from"./su-sticky.B6SSP8sh.js";import{_ as w}from"./s-goods-column.CAq6vgsX.js";import{_ as k}from"./uni-load-more.8Kzkyk-l.js";import{S as M}from"./s-layout.ChN2kRO2.js";import{a as b}from"./useGoods.CNv-03RG.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{c as H}from"./concat.CXHZS4ws.js";const h=C({__name:"index",setup(C){const h=t({activityId:0,activityInfo:{},pagination:{list:[],total:1,pageNo:1,pageSize:8},loadStatus:"",leftGoodsList:[],rightGoodsList:[]});let j=0,K=0,E=0;function F(t=0,a="left"){h.pagination.list[j]&&("left"===a?K+=t:E+=t,K<=E?h.leftGoodsList.push(h.pagination.list[j]):h.rightGoodsList.push(h.pagination.list[j]),j++)}async function T(){const t={};2===h.activityInfo.productScope?t.ids=h.activityInfo.productSpuIds.join(","):3===h.activityInfo.productScope&&(t.categoryIds=h.activityInfo.productSpuIds.join(",")),h.loadStatus="loading";const{code:a,data:s}=await n.getSpuPage({pageNo:h.pagination.pageNo,pageSize:h.pagination.pageSize,...t});0===a&&(await c.getSettlementProduct(s.list.map((t=>t.id)).join(",")).then((t=>{0===t.code&&b(s.list,t.data)})),h.pagination.list=H(h.pagination.list,s.list),h.pagination.total=s.total,h.loadStatus=h.pagination.list.length<h.pagination.total?"more":"noMore",F())}function L(){"noMore"!==h.loadStatus&&(h.pagination.pageNo++,T())}return a((()=>{L()})),s((async t=>{h.activityId=t.activityId,await async function(t){const{code:a,data:s}=await d.getRewardActivity(t);0===a&&(h.activityInfo=s)}(h.activityId),await T(h.activityId)})),(t,a)=>{const s=S,n=y,c=o(i("su-sticky"),U),d=Q,b=o(i("s-goods-column"),w),C=o(i("uni-load-more"),k),H=o(i("s-layout"),M);return A(),e(H,{class:"activity-wrap",title:h.activityInfo.title},{default:l((()=>[p(c,{bgColor:"#fff"},{default:l((()=>[p(s,{class:"ss-flex ss-col-top tip-box"},{default:l((()=>[p(s,{class:"type-text ss-flex ss-row-center"},{default:l((()=>[g("满减：")])),_:1}),p(s,{class:"ss-flex-1"},{default:l((()=>[(A(!0),f(m,null,r(h.activityInfo.rules,(t=>(A(),e(s,{class:"tip-content",key:t},{default:l((()=>[g(B(t.description),1)])),_:2},1024)))),128))])),_:1}),p(n,{class:"activity-left-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABICAMAAAAQ/CHDAAAAQlBMVEUAAAD/59f/5tf/59f/5tf/38//59j/59f/5tf/5tf/59f/49f/49T/5dj/5tj/5dX/5dj/5tf/5tj/5Nr/5NT/5tc+RkjZAAAAFXRSTlMAIN+f3hBff++/cFBAzq+Az76PMDD6OdBvAAABEElEQVRo3sXRS5aDMBBDUQrbGNuEX1r732oPNUhmOUhvA/eUasI8t5aOPrYyyQJbz/0Yf5MgfHTu/emr8b0zjZjY0yibCStQ1g4+WYHy4E2L0lWidO8QoqwtUpQzhxBl+yZE2bw8gApYwMACBhYwsPiheQhRlkKIsloMKPIiRbmxAcXahSjLIURZd6C4woAiL0KUVQeKHAYUeQhRVh0o9mJAkcOAIr+FKOsOFNWBojpQ3A4UyYHiVZQoVSVKVYlSNaC4HCiSA0VyoKgOFNWBYnGg69uAIocBRS4GFMmBojpQbA50DQOKlwPF7UCxOVC+FcKaA0XXoxwY0poDRVejHBjimgPFcKC5GFAcDhThQK9/qgrZLofQBLIAAAAASUVORK5CYII="}),p(n,{class:"activity-right-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJEAAABkBAMAAAB0qc+6AAAAJ1BMVEUAAAD/gwL/cAP/cwP/hgH/gAH/fQL/dwL/dQP/ewL+iAH/bgX/dwDlI8ExAAAADXRSTlMALBUZLyglHxwiMhIK/FILewAABPNJREFUWMOlmbuLE2EUxeNrdV0LBzIIarFOEIQ06ljERxNItZWjTAS1UHBHos1iYYylgyhWNmYMWKaykoAirkVcFHzkj/LL3Fe+mYkze73VavHjnPOdewd2a8ff04w7Gx0zbcepaQZIiEpBBjVVkW4yZw4CUR9UpAcsiUFK0lMCbWww6ayK9KpA05aKdEkCB5Ah3VGRvjCJJTlHtST77QzppIr0WxJn0gkV6TCB0F3dkI6pSHs4pnEKmmtyVaTVTOBzTbp1OcQkjklZ8rVcLx1lNY9QB5ikLhRpYnfqGtxEUSxJXYNX1tMh6j/WZYwNR9K6al3IHQyQrmpI+0mTcFzntoZ00MoJUce01Rzj1rVRVKDbl/QSpKR6u02itrSFGvPpRdJJ1SUXktPGxN0b2hpIxREVTjU1QEkQFGpy72gvFB1MBDnhNeVd6eDUyV7Y1djbQFSbOu4EbhhuqR5vTJoob9cNb2kejy+BQ+aCUGVvxVQ8QwrNvNZs3vi9tb8pKLyuiZzMUTMBta6IHBO3QZrMDyOJzAFKk/kquKt35OnSebf7lvMHGAdA3d7u7d1DEhYzwKCi3Yv6DYeA64SaFKJWQBMdcZdQ1UWt2UFx3jCbURR9qJj09kJQ9DUIAicM0F0UPaxG2mnST9/neVNQAZszc7aSJI9Jh/jKSeLdlHS/Sj0nnsc/1xfaFKCkzTmp97CCN2+BdKHDBTfDmswMt0rfzYAm/K8D/NkMHZefLhU1XC8JyYCa3uLCsDd0F8EMR8mHMpAHiZM9+WrCgLte1Bsl03+AJlnSgXqdSS6AuqhpNHo7LQF52wv/1SZ3mDfGZCTNUevLrZEmsccoOipAGsFcKQL98c+fBxBoQnsIosBtUjJ4NM07830AsTuxJw2XtwNS0u9fntpL6/sND0kTIOGcshpOxewBaJT0zTz7OkPMzOgxJDZnkVblU06SxF1/0E/nyUsD8F766Zw3A5qAxBPgVaGYUBMMgF68TCdGUoOfziZ94y+waBoiKUFJgAIS5ZTXtMZ5C6mHpD6SABTHAPKBQySZc/MyOfbTZUAwLdK0jHQQ3y5PSgBEKB8nm7jMXYclbWLimcCfQEwxkTDwHOkAJ94NrTr1bXsI8ho5kogKaIFDDNxuE5BaUoKlpBXrYIqmxE4cSZ4PHMzJntDNBE4LTCTR1KCcms1JAelH5ohHduCZinMHhCSzSbsiIImczUmdQFQRaaWwTQnUCRtOIH85SUR17fVFdxRTTG0ie4Wk1YJLwCBLFEuaMMme5/mnG6Aom9QgUctIe+FeiqYERIk5GjYnJHs+kjnZOqvibI7WdynpyBs5TkMm5c1x5ETKz08QJb1MrFXJ1YlJ+TndtbcuEUmydSZxAP2LdGSIV1yWTkgtLBMXc0KkwvfDmMRdflmkl0gqnl8FB9MGsSZxVzyfMCYJHE+vHHEEsaZlUT1mSaPcmbNRJaTa2uOoh23Cwbxb/GEpcycodDewNPm5b10pqbYP1y6zv5y4V+pOumBtnZxeYqE3IJWgBllSjCSpUwmJX9CgksS6KTEHzmfOzLRWirpIHcDEYyFJ4F8BVDKfMXCSFPP+Qi/noFq12XmxeOVa2IGGz1s3q/5LgDPyieJeepQTOKs6sxYlHscx3hSoEwuqzmqAPbq80PHmTPVngp0z6a4Qi32pYLNtr5GGtP01p+Yv+GHSkGRJRy4AAAAASUVORK5CYII="})])),_:1})])),_:1}),p(s,{class:"ss-flex ss-flex-wrap ss-p-x-20 ss-m-t-20 ss-col-top"},{default:l((()=>[p(s,{class:"goods-list-box"},{default:l((()=>[(A(!0),f(m,null,r(h.leftGoodsList,(t=>(A(),e(s,{class:"left-list",key:t.id},{default:l((()=>[p(b,{class:"goods-md-box",size:"md",data:t,onClick:a=>I(x).$router.go("/pages/goods/index",{id:t.id}),onGetHeight:a[0]||(a[0]=t=>F(t,"left"))},{cart:l((()=>[p(d,{class:"ss-reset-button cart-btn"})])),_:2},1032,["data","onClick"])])),_:2},1024)))),128))])),_:1}),p(s,{class:"goods-list-box"},{default:l((()=>[(A(!0),f(m,null,r(h.rightGoodsList,(t=>(A(),e(s,{class:"right-list",key:t.id},{default:l((()=>[p(b,{class:"goods-md-box",size:"md",data:t,onClick:a=>I(x).$router.go("/pages/goods/index",{id:t.id}),onGetHeight:a[1]||(a[1]=t=>F(t,"right"))},{cart:l((()=>[p(d,{class:"ss-reset-button cart-btn"})])),_:2},1032,["data","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1}),h.pagination.total>0?(A(),e(C,{key:0,status:h.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:L},null,8,["status"])):u("",!0)])),_:1},8,["title"])}}},[["__scopeId","data-v-c9bf8ae9"]]);export{h as default};
