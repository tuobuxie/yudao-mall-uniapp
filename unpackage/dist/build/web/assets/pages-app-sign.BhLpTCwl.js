import{_ as s}from"./s-empty.DdU54__M.js";import{B as a,s as e,v as t,ce as n,r as l,e as i,f as o,w as c,u as d,cf as u,j as f,g,k as r,p as y,t as p,l as _,m,F as w,i as x,G as b,H as h,A as k}from"./index-Ch_jkemp.js";import{c as I,S as v}from"./s-layout.Ckk_oEQ_.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=C({__name:"sign",setup(C){a((s=>({"4176084e":d(D)})));const D=e.$url.css("/static/img/shop/app/sign.png"),R=t({loading:!0,signInfo:{},signConfigList:[],maxDay:0,showModel:!1,signResult:{}});async function S(){const{code:s,data:a}=await u.createSignInRecord();0===s&&(R.showModel=!0,R.signResult=a,await L())}function j(){R.showModel=!1}async function L(){const{code:s,data:a}=await u.getSignInRecordSummary();0===s&&(R.signInfo=a,R.loading=!1)}return n((()=>{L(),async function(){const{code:s,data:a}=await u.getSignInConfigList();0===s&&(R.signConfigList=a,a.length>0&&(R.maxDay=a[a.length-1].day))}()})),(a,e)=>{const t=l(i("s-empty"),s),n=x,d=b,u=h,C=l(i("su-popup"),I),D=l(i("s-layout"),v);return f(),o(D,{title:"签到有礼"},{default:c((()=>[R.loading?(f(),o(t,{key:0,icon:"/static/data-empty.png",text:"签到活动还未开始"})):g("",!0),R.loading?(f(),o(n,{key:1})):R.loading?g("",!0):(f(),o(n,{key:2,class:"sign-wrap"},{default:c((()=>[r(n,{class:"content-box calendar"},{default:c((()=>[r(n,{class:"sign-everyday ss-flex ss-col-center ss-row-between ss-p-x-30"},{default:c((()=>[r(d,{class:"sign-everyday-title"},{default:c((()=>[y("签到日历")])),_:1}),r(n,{class:"sign-num-box"},{default:c((()=>[y(" 已连续签到 "),r(d,{class:"sign-num"},{default:c((()=>[y(p(R.signInfo.continuousDay),1)])),_:1}),y(" 天 ")])),_:1})])),_:1}),r(n,{class:"list acea-row row-between-wrapper",style:{padding:"0 30rpx",height:"240rpx",display:"flex","justify-content":"space-between","align-items":"center"}},{default:c((()=>[(f(!0),_(w,null,m(R.signConfigList,((s,a)=>(f(),o(n,{class:"item",key:a},{default:c((()=>[r(n,{class:k((a===R.signConfigList.length?"reward":"")+" "+(R.signInfo.continuousDay>=s.day?"rewardTxt":""))},{default:c((()=>[y(" 第"+p(s.day)+"天 ",1)])),_:2},1032,["class"]),r(n,{class:k(["venus",(a+1===R.signConfigList.length?"reward":"")+" "+(R.signInfo.continuousDay>=s.day?"venusSelect":"")])},null,8,["class"]),r(n,{class:k(["num",R.signInfo.continuousDay>=s.day?"on":""])},{default:c((()=>[y(" + "+p(s.point),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1}),r(n,{class:"myDateTable"},{default:c((()=>[r(n,{class:"ss-flex ss-col-center ss-row-center sign-box ss-m-y-40"},{default:c((()=>[R.signInfo.todaySignIn?(f(),o(u,{key:1,class:"ss-reset-button already-btn",disabled:""},{default:c((()=>[y(" 已签到 ")])),_:1})):(f(),o(u,{key:0,class:"ss-reset-button sign-btn",onClick:S},{default:c((()=>[y(" 签到 ")])),_:1}))])),_:1})])),_:1})])),_:1}),r(n,{class:"bg-white ss-m-t-16 ss-p-t-30 ss-p-b-60 ss-p-x-40"},{default:c((()=>[r(n,{class:"activity-title ss-m-b-30"},{default:c((()=>[y("签到说明")])),_:1}),r(n,{class:"activity-des"},{default:c((()=>[y("1.已累计签到"+p(R.signInfo.totalDay)+"天",1)])),_:1}),r(n,{class:"activity-des"},{default:c((()=>[y(" 2.据说连续签到第 "+p(R.maxDay)+" 天可获得超额积分，要坚持签到哦~~ ",1)])),_:1}),r(n,{class:"activity-des"},{default:c((()=>[y(" 3.积分可以在购物时抵现金结算的哦 ~~")])),_:1})])),_:1})])),_:1})),r(C,{show:R.showModel,type:"center",round:"10",isMaskClick:!1},{default:c((()=>[r(n,{class:"model-box ss-flex-col"},{default:c((()=>[r(n,{class:"ss-m-t-56 ss-flex-col ss-col-center"},{default:c((()=>[r(d,{class:"cicon-check-round"}),r(n,{class:"score-title"},{default:c((()=>[R.signResult.point?(f(),o(d,{key:0},{default:c((()=>[y(p(R.signResult.point)+" 积分 ",1)])),_:1})):g("",!0),R.signResult.experience?(f(),o(d,{key:1},{default:c((()=>[y(p(R.signResult.experience)+" 经验",1)])),_:1})):g("",!0)])),_:1}),r(n,{class:"model-title ss-flex ss-col-center ss-m-t-22 ss-m-b-30"},{default:c((()=>[y(" 已连续打卡 "+p(R.signResult.day)+" 天 ",1)])),_:1})])),_:1}),r(n,{class:"model-bg ss-flex-col ss-col-center ss-row-right"},{default:c((()=>[r(n,{class:"title ss-m-b-64"},{default:c((()=>[y("签到成功")])),_:1}),r(n,{class:"ss-m-b-40"},{default:c((()=>[r(u,{class:"ss-reset-button confirm-btn",onClick:j},{default:c((()=>[y("确认")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1})}}},[["__scopeId","data-v-faee3a41"]]);export{D as default};
