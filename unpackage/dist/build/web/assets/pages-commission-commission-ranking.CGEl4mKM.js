import{v as a,o as t,aE as s,bd as e,r as n,e as o,f as i,w as l,c7 as c,c9 as r,ca as u,j as p,k as m,p as d,t as f,l as g,m as _,F as y,g as k,s as S,G as h,i as j,A as w,u as b,aF as x,q as v}from"./index-DugDUeNE.js";import{_ as C}from"./uni-load-more.CyH6J6YO.js";import{S as N}from"./s-layout.BR6uiIJz.js";import{f as P}from"./useGoods.EtUs43j4.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{c as T}from"./concat.BAUlQNMh.js";const z=M({__name:"commission-ranking",setup(M){const z=["周排行","月排行"],B=a({currentTab:0,position:0,pagination:{list:[],total:0,pageNo:1,pageSize:10},loadStatus:""});async function F(){const{code:a,data:t}=await c.getBrokerageUserChildSummaryPageByPrice({pageNo:B.pagination.pageNo,pageSize:B.pagination.pageSize,"times[0]":B.times[0],"times[1]":B.times[1]});0===a&&(B.pagination.list=T(B.pagination.list,t.list),B.pagination.total=t.total,B.loadStatus=B.pagination.list.length<B.pagination.total?"more":"noMore",1===B.pagination.pageNo&&async function(){const{code:a,data:t}=await c.getRankByPrice({times:B.times});if(0!==a)return;B.position=t}())}function G(a){return S.$helper.timeFormat(a,"yyyy-mm-dd hh:MM:ss")}function q(){let a;a=0===B.currentTab?r():u(),B.times=[G(a[0]),G(a[1])]}function A(){"noMore"!==B.loadStatus&&(B.pagination.pageNo++,F())}return t((function(){q(),F()})),s((()=>A())),(a,t)=>{const s=h,c=j,r=v,u=e("emptyPage"),S=n(o("uni-load-more"),C),M=n(o("s-layout"),N);return p(),i(M,{title:"佣金排行榜"},{default:l((()=>[m(c,{class:"commission-rank"},{default:l((()=>[m(c,{class:"header"},{default:l((()=>[B.position?(p(),i(c,{key:0,class:"rank"},{default:l((()=>[d(" 您目前的排名 "),m(s,{class:"num"},{default:l((()=>[d(f(B.position),1)])),_:1}),d(" 名 ")])),_:1})):(p(),i(c,{key:1,class:"rank"},{default:l((()=>[d("您目前暂无排名")])),_:1}))])),_:1}),m(c,{class:"wrapper"},{default:l((()=>[m(c,{class:"nav acea-row row-around",style:{"justify-content":"space-around",display:"flex"}},{default:l((()=>[(p(),g(y,null,_(z,((a,t)=>m(c,{class:w(["item",B.currentTab===t?"font-color":""]),key:t,onClick:a=>async function(a){B.currentTab=a,x(B.pagination),q(),F()}(t)},{default:l((()=>[d(f(a),1)])),_:2},1032,["class","onClick"]))),64))])),_:1}),m(c,{class:"list"},{default:l((()=>[(p(!0),g(y,null,_(B.pagination.list,((a,t)=>(p(),i(c,{class:"item",key:t},{default:l((()=>[t<=2?(p(),i(c,{key:0,class:"num"},{default:l((()=>[m(r,{src:"/static/images/medal0"+(t+1)+".png"},null,8,["src"])])),_:2},1024)):(p(),i(c,{key:1,class:"num"},{default:l((()=>[d(f(t+1),1)])),_:2},1024)),m(c,{class:"pictrue"},{default:l((()=>[m(r,{src:a.avatar},null,8,["src"])])),_:2},1024),m(c,{class:"text"},{default:l((()=>[d(f(a.nickname),1)])),_:2},1024),m(c,{class:"people"},{default:l((()=>[d("￥"+f(b(P)(a.brokeragePrice)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0===B.pagination.list.length?(p(),i(c,{key:0,class:"noCommodity"},{default:l((()=>[m(u,{title:"暂无排行～"})])),_:1})):k("",!0)])),_:1})])),_:1}),B.pagination.total>0?(p(),i(S,{key:0,status:B.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:A},null,8,["status"])):k("",!0)])),_:1})}}},[["__scopeId","data-v-52978256"]]);export{z as default};
