import{B as a,s as t,d as s,v as e,o,aE as l,r,e as n,f as i,w as u,A as c,u as d,c7 as p,j as m,k as f,p as g,t as _,y as b,l as y,m as x,F as w,g as h,aF as T,i as j,G as v}from"./index-Ch_jkemp.js";import{_ as S}from"./su-tabs.Cbk9L_9y.js";import{_ as k}from"./su-sticky.BH_EELdm.js";import{_ as N}from"./s-empty.DdU54__M.js";import{_ as z}from"./uni-load-more.C8hvkNiT.js";import{S as M}from"./s-layout.Ckk_oEQ_.js";import{f as B}from"./useGoods.CmR2wUi_.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{c as F}from"./concat.B-rUqbX7.js";const $=C({__name:"order",setup(C){a((a=>({"6ffb86a7":d(G)})));const $=2*t.$platform.device.statusBarHeight,G=t.$url.css("/static/img/shop/user/withdraw_bg.png");s((a=>{I.scrollTop=a.scrollTop<=100}));const I=e({totals:0,scrollTop:!1,currentTab:0,loadStatus:"",pagination:{list:[],total:0,pageNo:1,pageSize:8}}),A=[{name:"全部",value:-1},{name:"待结算",value:0},{name:"已结算",value:1}];function E(a){T(I.pagination),I.currentTab=a.index,H()}async function H(){I.loadStatus="loading";const a=A[I.currentTab],t={pageSize:I.pagination.pageSize,pageNo:I.pagination.pageNo,bizType:1,status:a.value};a.value<0&&delete t.status;const{code:s,data:e}=await p.getBrokerageRecordPage(t);0===s&&(I.pagination.list=F(I.pagination.list,e.list),I.pagination.total=e.total,I.loadStatus=I.pagination.list.length<I.pagination.total?"more":"noMore",0===I.currentTab&&(I.totals=e.total))}function P(){"noMore"!==I.loadStatus&&(I.pagination.pageNo++,H())}return o((()=>{H()})),l((()=>{P()})),(a,s)=>{const e=j,o=r(n("su-tabs"),S),l=r(n("su-sticky"),k),p=v,T=r(n("s-empty"),N),C=r(n("uni-load-more"),z),F=r(n("s-layout"),M);return m(),i(F,{title:"分销订单",class:c(I.scrollTop?"order-warp":""),navbar:"inner"},{default:u((()=>[f(e,{class:"header-box",style:b([{marginTop:"-"+Number($+88)+"rpx",paddingTop:Number($+108)+"rpx"}])},{default:u((()=>[f(e,{class:"team-data-box ss-flex ss-col-center ss-row-between",style:{width:"100%"}},{default:u((()=>[f(e,{class:"data-card",style:{width:"100%"}},{default:u((()=>[f(e,{class:"total-item",style:{width:"100%"}},{default:u((()=>[f(e,{class:"item-title",style:{"text-align":"center"}},{default:u((()=>[g("累计推广订单（单）")])),_:1}),f(e,{class:"total-num",style:{"text-align":"center"}},{default:u((()=>[g(_(I.totals),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),f(l,{bgColor:"#fff"},{default:u((()=>[f(o,{list:A,scrollable:!1,current:I.currentTab,onChange:E},null,8,["current"])])),_:1}),f(e,{class:"order-box"},{default:u((()=>[(m(!0),y(w,null,x(I.pagination.list,(a=>(m(),i(e,{class:"order-item",key:a},{default:u((()=>[f(e,{class:"order-header"},{default:u((()=>[f(e,{class:"no-box ss-flex ss-col-center ss-row-between"},{default:u((()=>[f(p,{class:"order-code"},{default:u((()=>[g("订单编号："+_(a.bizId),1)])),_:2},1024),f(p,{class:"order-state"},{default:u((()=>[g(_(0===a.status?"待结算":1===a.status?"已结算":"已取消")+" ( 佣金 "+_(d(B)(a.price))+" 元 ) ",1)])),_:2},1024)])),_:2},1024),f(e,{class:"order-from ss-flex ss-col-center ss-row-between"},{default:u((()=>[f(e,{class:"from-user ss-flex ss-col-center"},{default:u((()=>[f(p,null,{default:u((()=>[g(_(a.title),1)])),_:2},1024)])),_:2},1024),f(e,{class:"order-time"},{default:u((()=>[g(_(d(t).$helper.timeFormat(a.createTime,"yyyy-mm-dd hh:MM:ss")),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),0===I.pagination.total?(m(),i(T,{key:0,icon:"/static/order-empty.png",text:"暂无订单"})):h("",!0),I.pagination.total>0?(m(),i(C,{key:1,status:I.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:P},null,8,["status"])):h("",!0)])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-ba088242"]]);export{$ as default};
