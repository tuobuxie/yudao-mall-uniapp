import{B as s,s as t,c as a,d as e,X as l,v as r,o,c7 as i,aE as n,r as c,e as u,f as d,w as p,A as m,u as g,j as f,k as y,p as _,t as k,y as C,l as h,m as w,F as x,g as S,i as v,aS as $,q as b,G as I}from"./index-DugDUeNE.js";import{S as U}from"./s-layout.BR6uiIJz.js";import{f as B}from"./useGoods.EtUs43j4.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{c as A}from"./concat.BAUlQNMh.js";const N=j({__name:"team",setup(j){s((s=>({"4165e618":g(T)})));const N=2*t.$platform.device.statusBarHeight;a((()=>t.$store("user").userInfo));const T=t.$url.css("/static/img/shop/user/withdraw_bg.png");e((s=>{F.scrollTop=s.scrollTop<=100}));let E=l();const F=r({summary:{},pagination:{pageNo:1,pageSize:8,list:[],total:0},loadStatus:"",level:1,nickname:l(""),sortKey:"",isAsc:""});function M(){F.pagination.list=[],z()}async function z(){F.loadStatus="loading";let{code:s,data:t}=await i.getBrokerageUserChildSummaryPage({pageNo:F.pagination.pageNo,pageSize:F.pagination.pageSize,level:F.level,"sortingField.order":F.isAsc,"sortingField.field":F.sortKey,nickname:F.nickname});0===s&&(F.pagination.list=A(F.pagination.list,t.list),F.pagination.total=t.total,F.loadStatus=F.pagination.list.length<F.pagination.total?"more":"noMore")}function D(s){F.pagination.list=[],F.level=s+"",z()}function K(s,t){F.pagination.list=[],E=s+t.toUpperCase(),F.isAsc=t,F.sortKey=s,z()}return o((async()=>{await z();let{data:s}=await i.getBrokerageUserSummary();F.summary=s})),n((()=>{"noMore"!==F.loadStatus&&(F.pagination.pageNo++,z())})),(s,a)=>{const e=v,l=$,r=b,o=I,i=c(u("s-layout"),U);return f(),d(i,{title:"我的团队",class:m(F.scrollTop?"team-wrap":""),navbar:"inner"},{default:p((()=>[y(e,{class:"header-box",style:C([{marginTop:"-"+Number(N+88)+"rpx",paddingTop:Number(N+108)+"rpx"}])},{default:p((()=>[y(e,{class:"team-data-box ss-flex ss-col-center ss-row-between",style:{width:"100%"}},{default:p((()=>[y(e,{class:"data-card",style:{width:"100%"}},{default:p((()=>[y(e,{class:"total-item",style:{width:"100%"}},{default:p((()=>[y(e,{class:"item-title",style:{"text-align":"center"}},{default:p((()=>[_("推广人数")])),_:1}),y(e,{class:"total-num",style:{"text-align":"center"}},{default:p((()=>[_(k(F.summary.firstBrokerageUserCount+F.summary.secondBrokerageUserCount||0),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),y(e,{class:"promoter-list"},{default:p((()=>[y(e,{style:{padding:"0 20rpx"}},{default:p((()=>[y(e,{class:"nav acea-row row-around l1",style:{"margin-top":"20rpx"}},{default:p((()=>[y(e,{class:m(1==F.level?"item on":"item"),onClick:a[0]||(a[0]=s=>D(1))},{default:p((()=>[_(" 一级("+k(F.summary.firstBrokerageUserCount||0)+") ",1)])),_:1},8,["class"]),y(e,{class:m(2==F.level?"item on":"item"),onClick:a[1]||(a[1]=s=>D(2))},{default:p((()=>[_(" 二级("+k(F.summary.secondBrokerageUserCount||0)+") ",1)])),_:1},8,["class"])])),_:1}),y(e,{class:"search acea-row row-between-wrapper",style:{display:"flex",height:"100rpx","align-items":"center"}},{default:p((()=>[y(e,{class:"input"},{default:p((()=>[y(l,{placeholder:"点击搜索会员名称",modelValue:F.nickname,"onUpdate:modelValue":a[2]||(a[2]=s=>F.nickname=s),"confirm-type":"search",name:"search",onConfirm:M},null,8,["modelValue"])])),_:1}),y(r,{src:g(t).$url.static("/static/img/shop/search.png"),mode:"",style:{width:"60rpx",height:"64rpx"},onClick:M},null,8,["src"])])),_:1}),y(e,{class:"list"},{default:p((()=>[y(e,{class:"sortNav acea-row row-middle",style:{display:"flex","align-items":"center"}},{default:p((()=>["userCountDESC"===g(E)?(f(),d(e,{key:0,class:"sortItem",onClick:a[3]||(a[3]=s=>K("userCount","asc"))},{default:p((()=>[_(" 团队排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort1.png")},null,8,["src"])])),_:1})):"userCountASC"===g(E)?(f(),d(e,{key:1,class:"sortItem",onClick:a[4]||(a[4]=s=>K("userCount","desc"))},{default:p((()=>[_(" 团队排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort3.png")},null,8,["src"])])),_:1})):(f(),d(e,{key:2,class:"sortItem",onClick:a[5]||(a[5]=s=>K("userCount","desc"))},{default:p((()=>[_(" 团队排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort2.png")},null,8,["src"])])),_:1})),"priceDESC"===g(E)?(f(),d(e,{key:3,class:"sortItem",onClick:a[6]||(a[6]=s=>K("price","asc"))},{default:p((()=>[_(" 金额排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort1.png")},null,8,["src"])])),_:1})):"priceASC"===g(E)?(f(),d(e,{key:4,class:"sortItem",onClick:a[7]||(a[7]=s=>K("price","desc"))},{default:p((()=>[_(" 金额排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort3.png")},null,8,["src"])])),_:1})):(f(),d(e,{key:5,class:"sortItem",onClick:a[8]||(a[8]=s=>K("price","desc"))},{default:p((()=>[_(" 金额排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort2.png")},null,8,["src"])])),_:1})),"orderCountDESC"===g(E)?(f(),d(e,{key:6,class:"sortItem",onClick:a[9]||(a[9]=s=>K("orderCount","asc"))},{default:p((()=>[_(" 订单排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort1.png")},null,8,["src"])])),_:1})):"orderCountASC"===g(E)?(f(),d(e,{key:7,class:"sortItem",onClick:a[10]||(a[10]=s=>K("orderCount","desc"))},{default:p((()=>[_(" 订单排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort3.png")},null,8,["src"])])),_:1})):(f(),d(e,{key:8,class:"sortItem",onClick:a[11]||(a[11]=s=>K("orderCount","desc"))},{default:p((()=>[_(" 订单排序 "),y(r,{src:g(t).$url.static("/static/img/shop/sort2.png")},null,8,["src"])])),_:1}))])),_:1}),(f(!0),h(x,null,w(F.pagination.list,((s,a)=>(f(),d(e,{key:a,class:"item acea-row row-between-wrapper",style:{display:"flex"}},{default:p((()=>[y(e,{class:"picTxt acea-row row-between-wrapper",style:{display:"flex","align-items":"center"}},{default:p((()=>[y(e,{class:"pictrue"},{default:p((()=>[y(r,{src:s.avatar},null,8,["src"])])),_:2},1024),y(e,{class:"text"},{default:p((()=>[y(e,{class:"name line1"},{default:p((()=>[_(k(s.nickname),1)])),_:2},1024),y(e,null,{default:p((()=>[_(" 加入时间: "+k(g(t).$helper.timeFormat(s.brokerageTime,"yyyy-mm-dd hh:MM:ss")),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),y(e,{class:"right",style:{"justify-content":"center","flex-direction":"column",display:"flex","margin-left":"auto"}},{default:p((()=>[y(e,null,{default:p((()=>[y(o,{class:"num font-color"},{default:p((()=>[_(k(s.brokerageUserCount||0),1)])),_:2},1024),_("人 ")])),_:2},1024),y(e,null,{default:p((()=>[y(o,{class:"num"},{default:p((()=>[_(k(s.orderCount||0),1)])),_:2},1024),_("单")])),_:2},1024),y(e,null,{default:p((()=>[y(o,{class:"num"},{default:p((()=>[_(k(g(B)(s.brokeragePrice)||0),1)])),_:2},1024),_("元 ")])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),0===F.pagination.list.length?(f(),d(e,{key:0,style:{"text-align":"center","margin-top":"30rpx"}},{default:p((()=>[_("暂无推广人数")])),_:1})):S("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-753574a0"]]);export{N as default};
