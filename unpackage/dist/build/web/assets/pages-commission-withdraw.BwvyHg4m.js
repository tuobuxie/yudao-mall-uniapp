import{v as e,r as a,e as t,j as s,f as l,w as o,k as c,p as n,l as u,F as r,m as d,u as i,s as f,t as p,G as m,i as y,q as b,I as _,J as g,aQ as h,H as I,B as w,ax as x,aM as k,c7 as v,cb as V,y as C,g as B,at as U,au as S,cc as T,cd as A,P,aR as $}from"./index-DugDUeNE.js";import{c as j,S as L,g as N}from"./s-layout.BR6uiIJz.js";import{_ as D}from"./s-uploader.Cbe07mIu.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{f as q}from"./useGoods.EtUs43j4.js";import"./choose-and-upload-file.DF1pkorH.js";const z=M({__name:"account-type-select",props:{modelValue:{type:Object,default(){}},show:{type:Boolean,default:!1},methods:{type:Array,default:[]}},emits:["update:modelValue","change","close"],setup(w,{emit:x}){const k=x,v=e({currentValue:""}),V=[{icon:"/static/img/shop/pay/wallet.png",title:"钱包余额",value:"1"},{icon:"/static/img/shop/pay/bank.png",title:"银行卡转账",value:"2"},{icon:"/static/img/shop/pay/wechat.png",title:"微信收款码",value:"3"},{icon:"/static/img/shop/pay/alipay.png",title:"支付宝收款码",value:"4"},{icon:"/static/img/shop/pay/wechat_api.png",title:"微信零钱",value:"5"},{icon:"/static/img/shop/pay/alipay_api.png",title:"支付宝余额",value:"6"}];function C(e){v.currentValue=e.detail.value}const B=async()=>{""!==v.currentValue?(k("update:modelValue",{type:v.currentValue}),k("close")):f.$helper.toast("请选择提现方式")},U=()=>{k("close")};return(e,x)=>{const k=m,S=y,T=b,A=_,P=g,$=h,L=I,N=a(t("su-popup"),j);return s(),l(N,{show:w.show,class:"ss-checkout-counter-wrap",onClose:U},{default:o((()=>[c(S,{class:"ss-modal-box bg-white ss-flex-col"},{default:o((()=>[c(S,{class:"modal-header ss-flex-col ss-col-left"},{default:o((()=>[c(k,{class:"modal-title ss-m-b-20"},{default:o((()=>[n("选择提现方式")])),_:1})])),_:1}),c(S,{class:"modal-content ss-flex-1 ss-p-b-100"},{default:o((()=>[c($,{onChange:C},{default:o((()=>[(s(),u(r,null,d(V,((e,a)=>c(P,{class:"container-list ss-p-l-34 ss-p-r-24 ss-flex ss-col-center ss-row-center",key:a},{default:o((()=>[c(S,{class:"container-icon ss-flex ss-m-r-20"},{default:o((()=>[c(T,{src:i(f).$url.static(e.icon)},null,8,["src"])])),_:2},1024),c(S,{class:"ss-flex-1"},{default:o((()=>[n(p(e.title),1)])),_:2},1024),c(A,{value:e.value,color:"var(--ui-BG-Main)",checked:e.value===v.currentValue,disabled:!w.methods.includes(parseInt(e.value))},null,8,["value","checked","disabled"])])),_:2},1024))),64))])),_:1})])),_:1}),c(S,{class:"modal-footer ss-flex ss-row-center ss-col-center"},{default:o((()=>[c(L,{class:"ss-reset-button save-btn",onClick:B},{default:o((()=>[n("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}},[["__scopeId","data-v-9fd655c0"]]),G=M({__name:"withdraw",setup(u){w((e=>({"24951d35":i(r)})));const r=f.$url.css("/static/img/shop/user/withdraw_bg.png"),d=2*f.$platform.device.statusBarHeight,b=e({accountInfo:{type:void 0,userAccount:void 0,userName:void 0,qrCodeUrl:void 0,bankName:void 0,bankAddress:void 0},accountSelect:!1,brokerageInfo:{},frozenDays:0,minPrice:0,withdrawTypes:[],bankList:[],bankListSelectedIndex:""}),_=e=>{b.accountSelect=e},g=async()=>{if(!b.accountInfo.price||b.accountInfo.price>b.brokerageInfo.price||b.accountInfo.price<=0)return void f.$helper.toast("请输入正确的提现金额");if(!b.accountInfo.type)return void f.$helper.toast("请选择提现方式");let e;if("5"===b.accountInfo.type&&(e=await f.$platform.useProvider("wechat").getOpenid(),!e))return void T();const a={...b.accountInfo,price:100*b.accountInfo.price};"5"===b.accountInfo.type?(a.userAccount=e,a.transferChannelCode=A()):("6"===b.accountInfo.type||"2"===b.accountInfo.type||delete a.userAccount,delete a.transferChannelCode);let{code:t}=await v.createBrokerageWithdraw(a);0===t&&P({title:"操作成功",content:"您的提现申请已成功提交",cancelText:"继续提现",confirmText:"查看记录",success:e=>{e.confirm?f.$router.go("/pages/commission/wallet",{type:2}):(h(),b.accountInfo={})}})};async function h(){const{data:e,code:a}=await v.getBrokerageUser();0===a&&(b.brokerageInfo=e)}function j(e){const a=e.detail.value;b.bankListSelectedIndex=a,b.accountInfo.bankName=b.bankList[a].label}return x((()=>{!async function(){let{code:e,data:a}=await k.getTradeConfig();0===e&&a&&(b.minPrice=a.brokerageWithdrawMinPrice||0,b.frozenDays=a.brokerageFrozenDays||0,b.withdrawTypes=a.brokerageWithdrawTypes)}(),h(),async function(){let{code:e,data:a}=await V.getDictDataListByType("brokerage_bank_name");0===e&&a&&a.length>0&&(b.bankList=a)}()})),(e,u)=>{const r=y,h=I,w=m,x=a(t("uni-easyinput"),N),k=a(t("s-uploader"),D),v=$;return s(),l(L,{title:"申请提现",class:"withdraw-wrap",navbar:"inner"},{default:o((()=>[c(r,{class:"page-bg"}),c(r,{class:"wallet-num-box ss-flex ss-col-center ss-row-between",style:C([{marginTop:"-"+Number(d+88)+"rpx",paddingTop:Number(d+108)+"rpx"}])},{default:o((()=>[c(r,{class:""},{default:o((()=>[c(r,{class:"num-title"},{default:o((()=>[n("可提现金额（元）")])),_:1}),c(r,{class:"wallet-num"},{default:o((()=>[n(p(i(q)(b.brokerageInfo.brokeragePrice)),1)])),_:1})])),_:1}),c(h,{class:"ss-reset-button log-btn",onClick:u[0]||(u[0]=e=>i(f).$router.go("/pages/commission/wallet",{type:2}))},{default:o((()=>[n(" 提现记录 ")])),_:1})])),_:1},8,["style"]),c(r,{class:"draw-card"},{default:o((()=>[c(r,{class:"bank-box ss-flex ss-col-center ss-row-between ss-m-b-30"},{default:o((()=>[c(r,{class:"name"},{default:o((()=>[n("提现至")])),_:1}),c(r,{class:"bank-list ss-flex ss-col-center",onClick:u[1]||(u[1]=e=>_(!0))},{default:o((()=>[b.accountInfo.type?B("",!0):(s(),l(r,{key:0,class:"empty-text"},{default:o((()=>[n("请选择提现方式")])),_:1})),"1"===b.accountInfo.type?(s(),l(r,{key:1,class:"empty-text"},{default:o((()=>[n("钱包余额")])),_:1})):B("",!0),"2"===b.accountInfo.type?(s(),l(r,{key:2,class:"empty-text"},{default:o((()=>[n("银行卡转账")])),_:1})):B("",!0),"3"===b.accountInfo.type?(s(),l(r,{key:3,class:"empty-text"},{default:o((()=>[n("微信账户")])),_:1})):B("",!0),"4"===b.accountInfo.type?(s(),l(r,{key:4,class:"empty-text"},{default:o((()=>[n("支付宝账户")])),_:1})):B("",!0),"5"===b.accountInfo.type?(s(),l(r,{key:5,class:"empty-text"},{default:o((()=>[n("微信零钱")])),_:1})):B("",!0),c(w,{class:"cicon-forward"})])),_:1})])),_:1}),c(r,{class:"card-title"},{default:o((()=>[n("提现金额")])),_:1}),c(r,{class:"input-box ss-flex ss-col-center border-bottom"},{default:o((()=>[c(r,{class:"unit"},{default:o((()=>[n("￥")])),_:1}),c(x,{inputBorder:!1,class:"ss-flex-1 ss-p-l-10",modelValue:b.accountInfo.price,"onUpdate:modelValue":u[2]||(u[2]=e=>b.accountInfo.price=e),type:"number",placeholder:"请输入提现金额"},null,8,["modelValue"])])),_:1}),U(c(r,{class:"card-title"},{default:o((()=>[n(" 提现账号 ")])),_:1},512),[[S,["2","6"].includes(b.accountInfo.type)]]),U(c(r,{class:"input-box ss-flex ss-col-center border-bottom"},{default:o((()=>[c(r,{class:"unit"}),c(x,{inputBorder:!1,class:"ss-flex-1 ss-p-l-10",modelValue:b.accountInfo.userAccount,"onUpdate:modelValue":u[3]||(u[3]=e=>b.accountInfo.userAccount=e),placeholder:"请输入提现账号"},null,8,["modelValue"])])),_:1},512),[[S,["2","6"].includes(b.accountInfo.type)]]),U(c(r,{class:"card-title"},{default:o((()=>[n("收款码")])),_:1},512),[[S,["3","4"].includes(b.accountInfo.type)]]),U(c(r,{class:"input-box ss-flex ss-col-center"},{default:o((()=>[c(r,{class:"unit"}),c(r,{class:"upload-img"},{default:o((()=>[c(k,{url:b.accountInfo.qrCodeUrl,"onUpdate:url":u[4]||(u[4]=e=>b.accountInfo.qrCodeUrl=e),fileMediatype:"image",limit:"1",mode:"grid",imageStyles:{width:"168rpx",height:"168rpx"},onSuccess:u[5]||(u[5]=e=>b.accountInfo.qrCodeUrl=e.tempFilePaths[0])},null,8,["url"])])),_:1})])),_:1},512),[[S,["3","4"].includes(b.accountInfo.type)]]),U(c(r,{class:"card-title"},{default:o((()=>[n(" 收款真名 ")])),_:1},512),[[S,["2","5","6"].includes(b.accountInfo.type)]]),U(c(r,{class:"input-box ss-flex ss-col-center border-bottom"},{default:o((()=>[c(r,{class:"unit"}),c(x,{inputBorder:!1,class:"ss-flex-1 ss-p-l-10",modelValue:b.accountInfo.userName,"onUpdate:modelValue":u[6]||(u[6]=e=>b.accountInfo.userName=e),placeholder:"请输入收款真名"},null,8,["modelValue"])])),_:1},512),[[S,["2","5","6"].includes(b.accountInfo.type)]]),U(c(r,{class:"card-title"},{default:o((()=>[n("提现银行")])),_:1},512),[[S,"2"===b.accountInfo.type]]),U(c(r,{class:"input-box ss-flex ss-col-center border-bottom"},{default:o((()=>[c(r,{class:"unit"}),c(v,{onChange:j,value:b.bankListSelectedIndex,range:b.bankList,"range-key":"label",style:{width:"100%"}},{default:o((()=>[c(x,{inputBorder:!1,value:b.accountInfo.bankName,placeholder:"请选择银行",suffixIcon:"right",disabled:"",styles:{disableColor:"#fff",borderColor:"#fff",color:"#333!important"}},null,8,["value"])])),_:1},8,["value","range"])])),_:1},512),[[S,"2"===b.accountInfo.type]]),U(c(r,{class:"card-title"},{default:o((()=>[n("开户地址")])),_:1},512),[[S,"2"===b.accountInfo.type]]),U(c(r,{class:"input-box ss-flex ss-col-center border-bottom"},{default:o((()=>[c(r,{class:"unit"}),c(x,{inputBorder:!1,class:"ss-flex-1 ss-p-l-10",modelValue:b.accountInfo.bankAddress,"onUpdate:modelValue":u[7]||(u[7]=e=>b.accountInfo.bankAddress=e),placeholder:"请输入开户地址"},null,8,["modelValue"])])),_:1},512),[[S,"2"===b.accountInfo.type]]),c(h,{class:"ss-reset-button save-btn ui-BG-Main-Gradient ui-Shadow-Main",onClick:g},{default:o((()=>[n(" 确认提现 ")])),_:1})])),_:1}),c(r,{class:"draw-notice"},{default:o((()=>[c(r,{class:"title ss-m-b-30"},{default:o((()=>[n("提现说明")])),_:1}),c(r,{class:"draw-list"},{default:o((()=>[n(" 最低提现金额 "+p(i(q)(b.minPrice))+" 元 ",1)])),_:1}),c(r,{class:"draw-list"},{default:o((()=>[n(" 冻结佣金："),c(w,null,{default:o((()=>[n("￥"+p(i(q)(b.brokerageInfo.frozenPrice)),1)])),_:1}),n(" （每笔佣金的冻结期为 "+p(b.frozenDays)+" 天，到期后可提现） ",1)])),_:1})])),_:1}),c(z,{show:b.accountSelect,onClose:u[8]||(u[8]=e=>_(!1)),round:"10",modelValue:b.accountInfo,"onUpdate:modelValue":u[9]||(u[9]=e=>b.accountInfo=e),methods:b.withdrawTypes},null,8,["show","modelValue","methods"])])),_:1})}}},[["__scopeId","data-v-5a99b99c"]]);export{G as default};
