import{_ as t}from"./su-tabs.BFcPOnK4.js";import{v as a,o,aE as n,r as i,e as s,f as e,w as l,ay as p,j as r,k as m,l as u,m as c,F as g,g as d,i as y}from"./index-DugDUeNE.js";import{_ as f}from"./s-empty.SJwFoNXy.js";import{_}from"./uni-load-more.CyH6J6YO.js";import{S as j}from"./s-layout.BR6uiIJz.js";import{c as b}from"./comment-item.FYceYeoe.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{c as x}from"./concat.BAUlQNMh.js";import"./uni-rate.DmEtwvCD.js";import"./su-image.CywDPG5U.js";const k=S({__name:"list",setup(S){const k=a({id:0,type:[{type:0,name:"全部"},{type:1,name:"好评"},{type:2,name:"中评"},{type:3,name:"差评"}],currentTab:0,loadStatus:"",pagination:{list:[],total:0,pageNo:1,pageSize:8}});function N(t){k.currentTab=t.index,k.pagination.pageNo=1,k.pagination.list=[],k.pagination.total=0,T()}async function T(){k.loadStatus="loading";let t=await p.getCommentPage(k.id,k.pagination.pageNo,k.pagination.pageSize,k.type[k.currentTab].type);0===t.code&&(k.pagination.list=x(k.pagination.list,t.data.list),k.pagination.total=t.data.total,k.loadStatus=k.pagination.list.length<k.pagination.total?"more":"noMore")}function h(){"noMore"!==k.loadStatus&&(k.pagination.pageNo++,T())}return o((t=>{k.id=t.id,T()})),n((()=>{h()})),(a,o)=>{const n=i(s("su-tabs"),t),p=y,S=i(s("s-empty"),f),x=i(s("uni-load-more"),_),T=i(s("s-layout"),j);return r(),e(T,{title:"全部评论"},{default:l((()=>[m(n,{list:k.type,scrollable:!1,onChange:N,current:k.currentTab},null,8,["list","current"]),m(p,{class:"ss-m-t-20"},{default:l((()=>[(r(!0),u(g,null,c(k.pagination.list,(t=>(r(),e(p,{class:"list-item",key:t},{default:l((()=>[m(b,{item:t},null,8,["item"])])),_:2},1024)))),128))])),_:1}),0===k.pagination.total?(r(),e(S,{key:0,text:"暂无数据",icon:"/static/data-empty.png"})):d("",!0),k.pagination.total>0?(r(),e(x,{key:1,"icon-type":"auto",status:k.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:h},null,8,["status"])):d("",!0)])),_:1})}}},[["__scopeId","data-v-5f83b5b2"]]);export{k as default};
