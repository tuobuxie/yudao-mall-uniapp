import{B as s,s as e,v as t,o as a,r as l,e as i,f as o,w as n,u as c,aP as f,j as r,an as u,k as d,l as m,m as _,F as p,y,p as g,t as b,g as x,P as v,G as h,i as k,H as w,A as $}from"./index-kPUodEo8.js";import{_ as j}from"./s-goods-item.nGp3A0wy.js";import{_ as T}from"./s-empty.B9iGK6-f.js";import{_ as C,S as M}from"./s-layout.ChN2kRO2.js";import{p as N,r as A,f as F}from"./useGoods.CNv-03RG.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";const S=P({__name:"detail",setup(P){s((s=>({dc4749f0:c(B)})));const S=2*e.$platform.device.statusBarHeight,B=e.$url.css("/static/img/shop/order/order_bg.png"),G=t({id:0,info:{},loading:!1,active:0,list:[{title:"提交申请"},{title:"处理中"},{title:"完成"}]});const H=()=>{e.$helper.copyText(G.info.no)};async function D(s){G.loading=!0;const{code:e,data:t}=await f.getAfterSale(s);0===e?(G.info=t,N(G.info),[10].includes(G.info.status)?G.active=0:[20,30].includes(G.info.status)?G.active=1:([40,50].includes(G.info.status)||[61,62,63].includes(G.info.status))&&(G.active=2)):G.info=null}return a((s=>{s.id?(G.id=s.id,D(s.id)):e.$helper.toast("缺少订单信息，请检查")})),(s,t)=>{const a=h,N=k,P=l(i("s-goods-item"),j),B=w,I=l(i("s-empty"),T),R=l(i("su-fixed"),C),U=l(i("s-layout"),M);return r(),o(U,{title:"售后详情",navbar:!c(u)(G.info)&&G.loading?"inner":"normal"},{default:n((()=>[!c(u)(G.info)&&G.loading?(r(),o(N,{key:0,class:"content_box"},{default:n((()=>[d(N,{class:"steps-box ss-flex",style:y([{marginTop:"-"+Number(S+88)+"rpx",paddingTop:Number(S+88)+"rpx"}])},{default:n((()=>[d(N,{class:"ss-flex"},{default:n((()=>[(r(!0),m(p,null,_(G.list,((s,e)=>(r(),o(N,{class:"steps-item",key:e},{default:n((()=>[d(N,{class:"ss-flex"},{default:n((()=>[G.list.length-1===e&&[61,62,63].includes(G.info.status)?(r(),o(a,{key:0,class:"sicon-circleclose"})):(r(),o(a,{key:1,class:$(["sicon-circlecheck",G.active>=e?"activity-color":"info-color"])},null,8,["class"])),G.list.length-1!==e?(r(),o(N,{key:2,class:$(["line",G.active>=e?"activity-bg":"info-bg"])},null,8,["class"])):x("",!0)])),_:2},1024),d(N,{class:$(["steps-item-title",G.active>=e?"activity-color":"info-color"])},{default:n((()=>[g(b(s.title),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"]),d(N,{class:"status-box ss-flex ss-col-center ss-row-between ss-m-x-20",onClick:t[0]||(t[0]=s=>c(e).$router.go("/pages/order/aftersale/log",{id:G.id}))},{default:n((()=>[d(N,{class:""},{default:n((()=>[d(N,{class:"status-text"},{default:n((()=>[g(b(c(A)(G.info)),1)])),_:1}),d(N,{class:"status-time"},{default:n((()=>[g(b(c(e).$helper.timeFormat(G.info.updateTime,"yyyy-mm-dd hh:MM:ss")),1)])),_:1})])),_:1}),d(a,{class:"ss-iconfont _icon-forward",style:{color:"#666"}})])),_:1}),d(N,{class:"aftersale-money ss-flex ss-col-center ss-row-between"},{default:n((()=>[d(N,{class:"aftersale-money--title"},{default:n((()=>[g("退款总额")])),_:1}),d(N,{class:"aftersale-money--num"},{default:n((()=>[g("￥"+b(c(F)(G.info.refundPrice)),1)])),_:1})])),_:1}),d(N,{class:"order-shop"},{default:n((()=>[d(P,{img:G.info.picUrl,title:G.info.spuName,titleWidth:480,skuText:G.info.properties.map((s=>s.valueName)).join(" "),num:G.info.count},null,8,["img","title","skuText","num"])])),_:1}),d(N,{class:"aftersale-content"},{default:n((()=>[d(N,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[d(N,{class:"item-title"},{default:n((()=>[g("服务单号：")])),_:1}),d(N,{class:"item-content ss-m-r-16"},{default:n((()=>[g(b(G.info.no),1)])),_:1}),d(B,{class:"ss-reset-button copy-btn",onClick:H},{default:n((()=>[g("复制")])),_:1})])),_:1}),d(N,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[d(N,{class:"item-title"},{default:n((()=>[g("申请时间：")])),_:1}),d(N,{class:"item-content"},{default:n((()=>[g(b(c(e).$helper.timeFormat(G.info.createTime,"yyyy-mm-dd hh:MM:ss")),1)])),_:1})])),_:1}),d(N,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[d(N,{class:"item-title"},{default:n((()=>[g("售后类型：")])),_:1}),d(N,{class:"item-content"},{default:n((()=>[g(b(10===G.info.way?"仅退款":"退款退货"),1)])),_:1})])),_:1}),d(N,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[d(N,{class:"item-title"},{default:n((()=>[g("申请原因：")])),_:1}),d(N,{class:"item-content"},{default:n((()=>[g(b(G.info.applyReason),1)])),_:1})])),_:1}),d(N,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[d(N,{class:"item-title"},{default:n((()=>[g("相关描述：")])),_:1}),d(N,{class:"item-content"},{default:n((()=>[g(b(G.info.applyDescription),1)])),_:1})])),_:1})])),_:1})])),_:1})):x("",!0),c(u)(G.info)&&G.loading?(r(),o(I,{key:1,icon:"/static/order-empty.png",text:"暂无该订单售后详情"})):x("",!0),c(u)(G.info)?x("",!0):(r(),o(R,{key:2,bottom:"",placeholder:"",bg:"bg-white"},{default:n((()=>[d(N,{class:"foot_box"},{default:n((()=>{var s,a;return[(null==(s=G.info.buttons)?void 0:s.includes("cancel"))?(r(),o(B,{key:0,class:"ss-reset-button btn",onClick:t[1]||(t[1]=s=>{return e=G.info.id,void v({title:"提示",content:"确定要取消此申请吗？",success:async function(s){if(!s.confirm)return;const{code:t}=await f.cancelAfterSale(e);0===t&&await D(e)}});var e})},{default:n((()=>[g(" 取消申请 ")])),_:1})):x("",!0),(null==(a=G.info.buttons)?void 0:a.includes("delivery"))?(r(),o(B,{key:1,class:"ss-reset-button btn",onClick:t[2]||(t[2]=s=>c(e).$router.go("/pages/order/aftersale/return-delivery",{id:G.info.id}))},{default:n((()=>[g(" 填写退货 ")])),_:1})):x("",!0),d(B,{class:"ss-reset-button contcat-btn btn",onClick:t[3]||(t[3]=s=>c(e).$router.go("/pages/chat/index"))},{default:n((()=>[g(" 联系客服 ")])),_:1})]})),_:1})])),_:1}))])),_:1},8,["navbar"])}}},[["__scopeId","data-v-33b5fae7"]]);export{S as default};
