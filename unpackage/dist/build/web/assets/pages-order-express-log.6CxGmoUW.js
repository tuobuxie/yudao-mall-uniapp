import{j as t,f as e,w as s,T as o,y as l,l as i,F as n,m as d,g as r,A as c,k as a,p as u,t as h,i as m,G as f,v as p,c as g,o as _,r as b,e as k,a4 as y,V as x,u as w,s as C,aU as v,af as N,aV as S,aW as I,q as B,U as P}from"./index-Ch_jkemp.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{S as A}from"./s-layout.Ckk_oEQ_.js";const $=j({name:"UniSwiperDot",emits:["clickItem"],props:{info:{type:Array,default:()=>[]},current:{type:Number,default:0},dotsStyles:{type:Object,default:()=>({})},mode:{type:String,default:"default"},field:{type:String,default:""}},data:()=>({dots:{width:6,height:6,bottom:10,color:"#fff",backgroundColor:"rgba(0, 0, 0, .3)",border:"1px rgba(0, 0, 0, .3) solid",selectedBackgroundColor:"#333",selectedBorder:"1px rgba(0, 0, 0, .9) solid"}}),watch:{dotsStyles(t){this.dots=Object.assign(this.dots,this.dotsStyles)},mode(t){"indexes"===t?(this.dots.width=14,this.dots.height=14):(this.dots.width=6,this.dots.height=6)}},created(){"indexes"===this.mode&&(this.dots.width=12,this.dots.height=12),this.dots=Object.assign(this.dots,this.dotsStyles)},methods:{clickItem(t){this.$emit("clickItem",t)}}},[["render",function(p,g,_,b,k,y){const x=m,w=f;return t(),e(x,{class:"uni-swiper__warp"},{default:s((()=>[o(p.$slots,"default",{},void 0,!0),"default"===_.mode?(t(),e(x,{style:l({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"default"},{default:s((()=>[(t(!0),i(n,null,d(_.info,((s,o)=>(t(),e(x,{onClick:t=>y.clickItem(o),style:l({width:(o===_.current?2*k.dots.width:k.dots.width)+"px",height:k.dots.width/2+"px","background-color":o!==_.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,"border-radius":"0px"}),key:o,class:"uni-swiper__dots-item uni-swiper__dots-bar"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):r("",!0),"dot"===_.mode?(t(),e(x,{style:l({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"dot"},{default:s((()=>[(t(!0),i(n,null,d(_.info,((s,o)=>(t(),e(x,{onClick:t=>y.clickItem(o),style:l({width:k.dots.width+"px",height:k.dots.height+"px","background-color":o!==_.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,border:o!==_.current?k.dots.border:k.dots.selectedBorder}),key:o,class:"uni-swiper__dots-item"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):r("",!0),"round"===_.mode?(t(),e(x,{style:l({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"round"},{default:s((()=>[(t(!0),i(n,null,d(_.info,((s,o)=>(t(),e(x,{onClick:t=>y.clickItem(o),class:c([[o===_.current&&"uni-swiper__dots-long"],"uni-swiper__dots-item"]),style:l({width:(o===_.current?3*k.dots.width:k.dots.width)+"px",height:k.dots.height+"px","background-color":o!==_.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,border:o!==_.current?k.dots.border:k.dots.selectedBorder}),key:o},null,8,["onClick","class","style"])))),128))])),_:1},8,["style"])):r("",!0),"nav"===_.mode?(t(),e(x,{key:"nav",style:l({"background-color":_.dotsStyles.backgroundColor,bottom:"0"}),class:"uni-swiper__dots-box uni-swiper__dots-nav"},{default:s((()=>[a(w,{style:l({color:_.dotsStyles.color}),class:"uni-swiper__dots-nav-item"},{default:s((()=>[u(h(_.current+1+"/"+_.info.length+" "+_.info[_.current][_.field]),1)])),_:1},8,["style"])])),_:1},8,["style"])):r("",!0),"indexes"===_.mode?(t(),e(x,{key:"indexes",style:l({bottom:k.dots.bottom+"px"}),class:"uni-swiper__dots-box"},{default:s((()=>[(t(!0),i(n,null,d(_.info,((o,i)=>(t(),e(x,{onClick:t=>y.clickItem(i),style:l({width:k.dots.width+"px",height:k.dots.height+"px",color:i===_.current?k.dots.selectedColor:k.dots.color,"background-color":i!==_.current?k.dots.backgroundColor:k.dots.selectedBackgroundColor,border:i!==_.current?k.dots.border:k.dots.selectedBorder}),key:i,class:"uni-swiper__dots-item uni-swiper__dots-indexes"},{default:s((()=>[a(w,{class:"uni-swiper__dots-indexes-text"},{default:s((()=>[u(h(i+1),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["style"])):r("",!0)])),_:3})}],["__scopeId","data-v-60e24dc5"]]);const O=j({name:"HighlightNumber",props:{content:{type:String,required:!0}},computed:{formattedContent(){const t=/(1[3-9]\d{9})/g,e=/(\d+)/g;let s,o=this.content,l=[];for(;null!==(s=t.exec(o));){if(s.index>0){const t=o.slice(0,s.index);l.push(...this.splitAndPush(t,!1,!1))}l.push({text:s[0],isNumber:!0,isPhone:!0}),o=o.slice(s.index+s[0].length)}for(;null!==(s=e.exec(o));){if(s.index>0){const t=o.slice(0,s.index);l.push(...this.splitAndPush(t,!1,!1))}l.push({text:s[0],isNumber:!0}),o=o.slice(s.index+s[0].length)}return o.length>0&&l.push(...this.splitAndPush(o,!1,!1)),l}},methods:{splitAndPush:(t,e=!1,s=!1)=>t.split("").map((t=>({text:t,isNumber:e,isPhone:s}))),handleClick(t){t.isPhone?this.$emit("phone-click",{phoneNumber:t.text}):t.isNumber&&this.$emit("number-click",{number:t.text})}}},[["render",function(o,l,r,a,u,f){const p=m;return t(),e(p,{class:"content-container"},{default:s((()=>[(t(!0),i(n,null,d(f.formattedContent,((e,s)=>(t(),i("span",{key:s,onClick:t=>f.handleClick(e),class:c({"highlight-number":e.isNumber,"phone-number":e.isPhone})},h(e.text),11,["onClick"])))),128))])),_:1})}],["__scopeId","data-v-e7472a42"]]),U=j({__name:"log",setup(o){const l=p({info:[],tracks:[]}),c=g((()=>{let t=[];return l.info.items&&l.info.items.forEach((e=>{t.push({image:e.picUrl})})),t}));function j(t){!function(t){const e=t.phoneNumber;if(!e)return;const s=v().platform.toLowerCase();if("devtools"===s)return N({title:"真机才可拨打电话",icon:"none"}),void U(e);if("wechat"===s)return N({title:"请手动拨打",icon:"none"}),void U(e);S({phoneNumber:e,success:()=>{console.log("拨打电话成功")},fail:t=>{console.error("拨打电话失败",t),N({title:"拨号失败，请手动拨打",icon:"none"}),U(e)}})}(t)}function U(t){I({data:t,success:()=>{N({title:"已复制到剪贴板",icon:"success"})},fail:()=>{N({title:"复制失败",icon:"none"})}})}return _((t=>{!async function(t){const{data:e}=await y.getOrderExpressTrackList(t);l.tracks=e}(t.id),async function(t){const{data:e}=await y.getOrderDetail(t);l.info=e}(t.id)})),(o,p)=>{const g=B,_=P,y=x,v=b(k("uni-swiper-dot"),$),N=m,S=f,I=b(k("s-layout"),A);return t(),e(I,{title:"物流追踪"},{default:s((()=>[a(N,{class:"log-wrap"},{default:s((()=>[c.value.length>0?(t(),e(N,{key:0,class:"log-card ss-flex ss-m-20 ss-r-10"},{default:s((()=>[a(v,{info:c.value,current:l.current,mode:"round"},{default:s((()=>[a(y,{class:"swiper-box"},{default:s((()=>[(t(!0),i(n,null,d(c.value,((o,l)=>(t(),e(_,{key:l},{default:s((()=>[a(g,{class:"log-card-img",src:w(C).$url.static(o.image)},null,8,["src"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["info","current"]),a(N,{class:"log-card-msg"},{default:s((()=>[a(N,{class:"ss-m-b-8"},{default:s((()=>[u("快递单号："+h(l.info.logisticsNo),1)])),_:1}),a(N,null,{default:s((()=>[u("快递公司："+h(l.info.logisticsName),1)])),_:1})])),_:1})])),_:1})):r("",!0),a(N,{class:"log-content ss-m-20 ss-r-10"},{default:s((()=>[(t(!0),i(n,null,d(l.tracks,((o,i)=>(t(),e(N,{class:"log-content-box ss-flex",key:o.title},{default:s((()=>[a(N,{class:"log-icon ss-flex-col ss-col-center ss-m-r-20"},{default:s((()=>[a(S,{class:"cicon-title"}),l.tracks.length-1!==i?(t(),e(N,{key:0,class:"line"})):r("",!0)])),_:2},1024),a(N,{class:"log-content-msg"},{default:s((()=>[a(N,{class:"log-msg-desc ss-m-b-16"},{default:s((()=>[a(O,{content:o.content,onPhoneClick:j},null,8,["content"])])),_:2},1024),a(N,{class:"log-msg-date ss-m-b-40"},{default:s((()=>[u(h(w(C).$helper.timeFormat(o.time,"yyyy-mm-dd hh:MM:ss")),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-4618971e"]]);export{U as default};
