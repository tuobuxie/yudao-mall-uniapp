import{v as e,aX as s,c as a,j as l,f as t,w as o,T as r,A as n,g as c,k as u,y as i,p as d,t as f,i as m,q as p,ax as b,r as _,e as g,s as h,aC as y,u as v,l as x,m as k,F as w,ai as B,P as V,aY as $,H as S,aQ as I,G as C,I as j,J as P}from"./index-Ch_jkemp.js";import{_ as M}from"./su-image.BfvOhm0y.js";import{g as z,j as A,i as O,_ as T,S as U}from"./s-layout.Ckk_oEQ_.js";import{_ as W}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as F,a as G}from"./uni-list.BckfIQC4.js";import{c as H}from"./choose-and-upload-file.Bi8hjSC9.js";const q=W({__name:"su-radio",props:{customStyle:{type:Object,default:()=>({})},ui:{type:String,default:"check"},modelValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:!1},bg:{type:String,default:"ui-BG-Main"},unbg:{type:String,default:"borderss"},src:{type:String,default:""},label:{type:String,default:""},labelStyle:{type:Object,default:()=>({})},none:{type:Boolean,default:!1}},emits:["change","update:modelValue"],setup(b,{emit:_}){const g=e({currentValue:!1}),h=_,y=b;s((()=>{g.currentValue=y.modelValue,h("update:modelValue",g.currentValue)}));const v=a((()=>g.currentValue)),x=()=>{y.disabled||(g.currentValue=!g.currentValue,h("update:modelValue",g.currentValue),h("change",{label:y.label,value:g.currentValue}))};return(e,s)=>{const a=m,_=p;return l(),t(a,{class:n(["ui-radio ss-flex ss-col-center",[{disabled:b.disabled},{img:b.src},b.ui]]),onClick:x,style:i([b.customStyle])},{default:o((()=>[r(e.$slots,"leftLabel",{},void 0,!0),b.none?c("",!0):(l(),t(a,{key:0,class:n(["ui-radio-input",[v.value?"cur "+b.bg:b.unbg,b.src?"radius":"round"]])},null,8,["class"])),b.src?(l(),t(_,{key:1,class:"ui-radio-img radius",src:b.src,mode:"aspectFill"},null,8,["src"])):(l(),t(a,{key:2,class:"ui-radio-content"},{default:o((()=>[r(e.$slots,"default",{},(()=>[u(a,{class:"ui-label-text",style:i([b.labelStyle])},{default:o((()=>[d(f(b.label),1)])),_:1},8,["style"])]),!0)])),_:3})),b.ui.includes("card")?(l(),t(a,{key:3,class:n(["ui-radio-bg round",[v.value?"cur "+b.bg:""]])},null,8,["class"])):c("",!0)])),_:3},8,["class","style"])}}},[["__scopeId","data-v-00bd4151"]]),J=W({__name:"info",setup(s){const r=e({model:{},rules:{},thirdInfo:{}}),n=[{name:"男",value:"1"},{name:"女",value:"2"}],i=a((()=>h.$store("user").userInfo));function W(e){r.model.sex=e.detail.value}const J=()=>{B("changeMobile")};async function L(){const e=await H({type:"image"});e.length>0&&(r.model.avatar=e[0].url)}function N(){B("changePassword")}async function Q(){await h.$platform.useProvider("wechat").bind()&&await Z()}function X(){V({title:"解绑提醒",content:"解绑后您将无法通过微信登录此账号",cancelText:"再想想",confirmText:"确定",success:async function(e){if(!e.confirm)return;await h.$platform.useProvider("wechat").unbind(r.thirdInfo.openid)&&await Z()}})}async function Y(){const{code:e}=await $.updateUser({avatar:r.model.avatar,nickname:r.model.nickname,sex:r.model.sex});0===e&&await Z()}const Z=async()=>{const e=await h.$store("user").getInfo();if(r.model=y(e),"H5"!==h.$platform.name){const e=await h.$platform.useProvider("wechat").getInfo();r.thirdInfo=e||{}}};return b((()=>{Z()})),(e,s)=>{const a=_(g("su-image"),M),b=S,y=m,B=_(g("uni-easyinput"),z),V=_(g("uni-forms-item"),A),$=j,H=P,Z=I,D=_(g("su-radio"),q),E=C,K=_(g("uni-list-item"),F),R=_(g("uni-list"),G),ee=_(g("uni-forms"),O),se=p,ae=_(g("su-fixed"),T),le=_(g("s-layout"),U);return l(),t(le,{title:"用户信息",class:"set-userinfo-wrap"},{default:o((()=>[u(ee,{model:r.model,rules:r.rules,labelPosition:"left",border:"",class:"form-box"},{default:o((()=>[u(y,{class:"ss-flex ss-row-center ss-col-center ss-p-t-60 ss-p-b-0 bg-white"},{default:o((()=>[u(y,{class:"header-box-content"},{default:o((()=>{var e;return[u(a,{class:"content-img",isPreview:"",current:0,src:(null==(e=r.model)?void 0:e.avatar)||v(h).$url.static("/static/img/shop/default_avatar.png"),height:160,width:160,radius:80,mode:"scaleToFill"},null,8,["src"]),u(y,{class:"avatar-action"},{default:o((()=>[u(b,{class:"ss-reset-button avatar-action-btn",onClick:L},{default:o((()=>[d("修改")])),_:1})])),_:1})]})),_:1})])),_:1}),u(y,{class:"bg-white ss-p-x-30"},{default:o((()=>[u(V,{name:"nickname",label:"昵称"},{default:o((()=>[u(B,{modelValue:r.model.nickname,"onUpdate:modelValue":s[0]||(s[0]=e=>r.model.nickname=e),type:"nickname",placeholder:"设置昵称",inputBorder:!1,placeholderStyle:"color:#BBBBBB;font-size:28rpx;line-height:normal"},null,8,["modelValue"])])),_:1}),u(V,{name:"sex",label:"性别"},{default:o((()=>[u(y,{class:"ss-flex ss-col-center ss-h-100"},{default:o((()=>[u(Z,{onChange:W,class:"ss-flex ss-col-center"},{default:o((()=>[(l(),x(w,null,k(n,(e=>u(H,{class:"radio",key:e.value},{default:o((()=>[u(y,{class:"ss-flex ss-col-center ss-m-r-32"},{default:o((()=>{var s;return[u($,{value:e.value,color:"var(--ui-BG-Main)",style:{transform:"scale(0.8)"},checked:parseInt(e.value)===(null==(s=r.model)?void 0:s.sex)},null,8,["value","checked"]),u(y,{class:"gender-name"},{default:o((()=>[d(f(e.name),1)])),_:2},1024)]})),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1}),u(V,{name:"mobile",label:"手机号",onClick:J},{default:o((()=>[u(B,{modelValue:i.value.mobile,"onUpdate:modelValue":s[1]||(s[1]=e=>i.value.mobile=e),placeholder:"请绑定手机号",inputBorder:!1,disabled:"",styles:{disableColor:"#fff"},placeholderStyle:"color:#BBBBBB;font-size:28rpx;line-height:normal",clearable:!1},{right:o((()=>[u(y,{class:"ss-flex ss-col-center"},{default:o((()=>{var e;return[(null==(e=i.value.verification)?void 0:e.mobile)?(l(),t(D,{key:0,modelValue:!0})):(l(),t(b,{key:1,class:"ss-reset-button ss-flex ss-col-center ss-row-center"},{default:o((()=>[u(E,{class:"_icon-forward",style:{color:"#bbbbbb","font-size":"26rpx"}})])),_:1}))]})),_:1})])),_:1},8,["modelValue"])])),_:1}),u(V,{name:"password",label:"登录密码",onClick:N},{default:o((()=>[u(B,{modelValue:i.value.password,"onUpdate:modelValue":s[2]||(s[2]=e=>i.value.password=e),placeholder:"点击修改登录密码",inputBorder:!1,styles:{disableColor:"#fff"},disabled:"",placeholderStyle:"color:#BBBBBB;font-size:28rpx;line-height:normal",clearable:!1},{right:o((()=>[u(y,{class:"ss-flex ss-col-center"},{default:o((()=>{var e;return[(null==(e=i.value.verification)?void 0:e.password)?(l(),t(D,{key:0,class:"ss-flex",modelValue:!0})):(l(),t(b,{key:1,class:"ss-reset-button ss-flex ss-col-center ss-row-center"},{default:o((()=>[u(E,{class:"_icon-forward",style:{color:"#bbbbbb","font-size":"26rpx"}})])),_:1}))]})),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),u(y,{class:"bg-white ss-m-t-14"},{default:o((()=>[u(R,null,{default:o((()=>[u(K,{clickable:"",onClick:s[3]||(s[3]=e=>v(h).$router.go("/pages/user/address/list")),title:"地址管理",showArrow:"",border:!1,class:"list-border"})])),_:1})])),_:1})])),_:1},8,["model","rules"]),"H5"!==v(h).$platform.name?(l(),t(y,{key:0},{default:o((()=>[u(y,{class:"title-box ss-p-l-30"},{default:o((()=>[d("第三方账号绑定")])),_:1}),u(y,{class:"account-list ss-flex ss-row-between"},{default:o((()=>["WechatOfficialAccount"===v(h).$platform.name?(l(),t(y,{key:0,class:"ss-flex ss-col-center"},{default:o((()=>[u(se,{class:"list-img",src:v(h).$url.static("/static/img/shop/platform/WechatOfficialAccount.png")},null,8,["src"]),u(E,{class:"list-name"},{default:o((()=>[d("微信公众号")])),_:1})])),_:1})):c("",!0),"WechatMiniProgram"===v(h).$platform.name?(l(),t(y,{key:1,class:"ss-flex ss-col-center"},{default:o((()=>[u(se,{class:"list-img",src:v(h).$url.static("/static/img/shop/platform/WechatMiniProgram.png")},null,8,["src"]),u(E,{class:"list-name"},{default:o((()=>[d("微信小程序")])),_:1})])),_:1})):c("",!0),"App"===v(h).$platform.name?(l(),t(y,{key:2,class:"ss-flex ss-col-center"},{default:o((()=>[u(se,{class:"list-img",src:v(h).$url.static("/static/img/shop/platform/wechat.png")},null,8,["src"]),u(E,{class:"list-name"},{default:o((()=>[d("微信开放平台")])),_:1})])),_:1})):c("",!0),u(y,{class:"ss-flex ss-col-center"},{default:o((()=>[r.thirdInfo?(l(),t(y,{key:0,class:"info ss-flex ss-col-center"},{default:o((()=>[u(se,{class:"avatar ss-m-r-20",src:v(h).$url.cdn(r.thirdInfo.avatar)},null,8,["src"]),u(E,{class:"name"},{default:o((()=>[d(f(r.thirdInfo.nickname),1)])),_:1})])),_:1})):c("",!0),u(y,{class:"bind-box ss-m-l-20"},{default:o((()=>[r.thirdInfo.openid?(l(),t(b,{key:0,class:"ss-reset-button relieve-btn",onClick:X},{default:o((()=>[d(" 解绑 ")])),_:1})):(l(),t(b,{key:1,class:"ss-reset-button bind-btn",onClick:Q},{default:o((()=>[d("绑定")])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})):c("",!0),u(ae,{bottom:"",placeholder:"",bg:"none"},{default:o((()=>[u(y,{class:"footer-box ss-p-20"},{default:o((()=>[u(b,{class:"ss-rest-button logout-btn ui-Shadow-Main",onClick:Y},{default:o((()=>[d("保存")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ee7b665a"]]);export{J as default};
