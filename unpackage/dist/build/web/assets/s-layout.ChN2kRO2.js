import{j as e,f as t,y as i,A as a,G as s,b8 as n,b9 as o,r,e as l,w as c,k as d,T as u,p as h,t as f,g as p,i as m,aS as g,v as b,D as y,l as _,F as v,m as x,u as w,s as k,ba as S,af as C,P as I,bb as $,aW as B,H as T,bc as z,B as M,bd as P,c as F,o as W,av as A,d as O,a3 as V,be as R,W as L,aB as j,aw as E,ax as N,q as H,bf as D,bg as U,bh as q,bi as Y,bj as X,bk as G,aT as J,bl as Z,X as K,ai as Q,bm as ee,bn as te,bo as ie,bp as ae,aY as se,bq as ne,I as oe,J as re,aU as le,_ as ce,br as de,bs as ue,bt as he,bu as fe,bv as pe,bw as me,bx as ge,by as be,bz as ye,bA as _e,an as ve}from"./index-kPUodEo8.js";import{_ as xe}from"./_plugin-vue_export-helper.BCo6x5W8.js";const we={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]};const ke=xe({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:()=>({icons:we.glyphs}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?unescape(`%u${e.unicode}`):""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e}},methods:{_onClick(){this.$emit("click")}}},[["render",function(n,o,r,l,c,d){const u=s;return e(),t(u,{style:i({color:r.color,"font-size":d.iconSize}),class:a(["uni-icons",["uniui-"+r.type,r.customPrefix,r.customPrefix?r.type:""]]),onClick:d._onClick},null,8,["style","class","onClick"])}],["__scopeId","data-v-f20e89ab"]]),Se={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:Ce}=n(Se);const Ie=xe({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:"取消"},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||Ce("uni-search-bar.cancel")},placeholderText(){return this.placeholder||Ce("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,o())},confirm(){o(),this.$emit("confirm",{value:this.searchVal})},blur(){o(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(a,n,o,b,y,_){const v=r(l("uni-icons"),ke),x=m,w=g,k=s;return e(),t(x,{class:"uni-searchbar"},{default:c((()=>[d(x,{style:i({borderRadius:o.radius+"px",backgroundColor:o.bgColor}),class:"uni-searchbar__box",onClick:_.searchClick},{default:c((()=>[d(x,{class:"uni-searchbar__box-icon-search"},{default:c((()=>[u(a.$slots,"searchIcon",{},(()=>[d(v,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),y.show||y.searchVal?(e(),t(w,{key:0,focus:y.showSync,disabled:o.readonly,placeholder:_.placeholderText,maxlength:o.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:y.searchVal,"onUpdate:modelValue":n[0]||(n[0]=e=>y.searchVal=e),onConfirm:_.confirm,onBlur:_.blur,onFocus:_.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","onConfirm","onBlur","onFocus"])):(e(),t(k,{key:1,class:"uni-searchbar__text-placeholder"},{default:c((()=>[h(f(o.placeholder),1)])),_:1})),y.show&&("always"===o.clearButton||"auto"===o.clearButton&&""!==y.searchVal)&&!o.readonly?(e(),t(x,{key:2,class:"uni-searchbar__box-icon-clear",onClick:_.clear},{default:c((()=>[u(a.$slots,"clearIcon",{},(()=>[d(v,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):p("",!0)])),_:3},8,["style","onClick"]),"always"===o.cancelButton||y.show&&"auto"===o.cancelButton?(e(),t(k,{key:0,onClick:_.cancel,class:"uni-searchbar__cancel"},{default:c((()=>[h(f(_.cancelTextI18n),1)])),_:1},8,["onClick"])):p("",!0)])),_:3})}],["__scopeId","data-v-14845ffc"]]),$e=xe({__name:"s-search-block",props:{data:{type:Object,default:()=>({})},elBackground:{type:String,default:""},height:{type:Number,default:36},iconColor:{type:String,default:"#b0b3bf"},fontColor:{type:String,default:"#b0b3bf"},placeholder:{type:String,default:"这是一个搜索框"},placeholderPosition:{type:String,default:"left"},showScan:{type:Boolean,default:!1},radius:{type:Number,default:10},width:{type:String,default:"100%"},navbar:{type:Boolean,default:!0}},emits:["click"],setup(s,{emit:n}){const o=b({searchVal:""}),u=n,g=()=>{u("click")};function z(e){e.value&&(k.$router.go("/pages/goods/list",{keyword:e.value}),setTimeout((()=>{o.searchVal=""}),100))}function M(){S({onlyFromCamera:!1,sound:"default",scanType:["qrCode","barCode"],success:e=>{!function(e){const t=function(e){try{const t=e.trim();return(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://"))&&t.length>=10}catch{return!1}}(e);I({title:"扫描结果",content:e,confirmText:t?"访问":"复制",cancelText:"取消",success:i=>{i.confirm&&(t?$({url:`/pages/public/webview?url=${encodeURIComponent(e)}`}):function(e){B({data:e,success:()=>{C({title:"已复制到剪贴板",icon:"success"})},fail:()=>{C({title:"复制失败，请重试",icon:"error"})}})}(e))}})}(e.result)},fail:e=>{console.error(e),C({title:"scanCode:fail cancel"===e.errMsg?"操作已取消":"扫码失败",icon:"error"})}})}return(n,u)=>{const b=m,S=r(l("uni-search-bar"),Ie),C=T;return e(),t(b,{class:a(["search-content ss-flex ss-col-center ss-row-between",[{"border-content":s.navbar}]]),onClick:g,style:i([{borderRadius:s.radius+"px",background:s.elBackground,height:s.height+"px",width:s.width}])},{default:c((()=>[s.navbar?(e(),t(b,{key:0,class:a(["ss-flex ss-col-center",["center"===s.placeholderPosition?"ss-row-center":"ss-row-left"]]),style:{width:"100%"}},{default:c((()=>[d(b,{class:"search-icon _icon-search",style:i({color:s.fontColor,margin:"0 10rpx"})},null,8,["style"]),d(b,{class:"search-input ss-line-1",style:i({color:s.fontColor})},{default:c((()=>[h(f(s.placeholder),1)])),_:1},8,["style"]),s.showScan?(e(),t(b,{key:0,class:"scan-icon _icon-scan",style:i([{color:s.fontColor},{"margin-left":"auto"}]),onClick:y(M,["stop"])},null,8,["style"])):p("",!0)])),_:1},8,["class"])):p("",!0),s.navbar?p("",!0):(e(),t(S,{key:1,class:"ss-flex-1",radius:s.data.borderRadius,placeholder:s.data.placeholder,cancelButton:"none",clearButton:"none",onConfirm:z,modelValue:o.searchVal,"onUpdate:modelValue":u[0]||(u[0]=e=>o.searchVal=e)},null,8,["radius","placeholder","modelValue"])),d(b,{class:"keyword-link ss-flex"},{default:c((()=>[(e(!0),_(v,null,x(s.data.hotKeywords,((a,n)=>(e(),t(b,{key:n},{default:c((()=>[d(b,{class:"ss-m-r-16",style:i([{color:s.data.textColor}]),onClick:y((e=>w(k).$router.go("/pages/goods/list",{keyword:a})),["stop"])},{default:c((()=>[h(f(a),1)])),_:2},1032,["style","onClick"])])),_:2},1024)))),128))])),_:1}),s.data.hotKeywords&&s.data.hotKeywords.length&&s.navbar?(e(),t(b,{key:2,class:"ss-flex"},{default:c((()=>[(e(!0),_(v,null,x(s.data.hotKeywords,((a,n)=>(e(),t(C,{class:"ss-reset-button keyword-btn",key:n,style:i([{color:s.data.textColor,marginRight:"10rpx"}])},{default:c((()=>[h(f(a),1)])),_:2},1032,["style"])))),128))])),_:1})):p("",!0)])),_:1},8,["style","class"])}}},[["__scopeId","data-v-90045817"]]);const Be=xe({name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:e,type:t,size:i,absolute:a}=this;return[e?"uni-badge--"+t+"-inverted":"","uni-badge--"+t,"uni-badge--"+i,a?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let e=this.width/2,t=10;this.isDot&&(e=5,t=5);const i=`${-e+this.offset[0]}px`,a=`${-t+this.offset[1]}px`,s={rightTop:{right:i,top:a},rightBottom:{right:i,bottom:a},leftBottom:{left:i,bottom:a},leftTop:{left:i,top:a}},n=s[this.absolute];return n||s.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:e,text:t,maxNum:i}=this;return e?"":Number(t)>i?`${i}+`:t}},methods:{onClick(){this.$emit("click")}}},[["render",function(n,o,r,l,d,g){const b=s,y=m;return e(),t(y,{class:"uni-badge--x"},{default:c((()=>[u(n.$slots,"default",{},void 0,!0),r.text?(e(),t(b,{key:0,class:a([g.classNames,"uni-badge"]),style:i([g.positionStyle,r.customStyle,g.dotStyle]),onClick:o[0]||(o[0]=e=>g.onClick())},{default:c((()=>[h(f(g.displayValue),1)])),_:1},8,["class","style"])):p("",!0)])),_:3})}],["__scopeId","data-v-871ec77f"]]);class Te{constructor(e,t){this.options=e,this.animation=z(e),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let i=this.currentStepAnimates[this.next],a={};if(a=i||{styles:{},config:{}},ze.includes(e)){a.styles.transform||(a.styles.transform="");let i="";"rotate"===e&&(i="deg"),a.styles.transform+=`${e}(${t+i}) `}else a.styles[e]=`${t}`;this.currentStepAnimates[this.next]=a}_animateRun(e={},t={}){let i=this.$.$refs.ani.ref;if(i)return new Promise(((a,s)=>{nvueAnimation.transition(i,{styles:e,...t},(e=>{a()}))}))}_nvueNextAnimate(e,t=0,i){let a=e[t];if(a){let{styles:s,config:n}=a;this._animateRun(s,n).then((()=>{t+=1,this._nvueNextAnimate(e,t,i)}))}else this.currentStepAnimates={},"function"==typeof i&&i(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const ze=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function Me(e,t){if(t)return clearTimeout(t.timer),new Te(e,t)}ze.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{Te.prototype[e]=function(...t){return this.animation[e](...t),this}}));const Pe=xe({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let i in e){t+=this.toLine(i)+":"+e[i]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=Me(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(i){console.error(`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=Me(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},i=(e,i)=>{"fade"===i?t.opacity=this.animationType(e)[i]:t.transform+=this.animationType(e)[i]+" "};return"string"==typeof this.modeClass?i(e,this.modeClass):this.modeClass.forEach((t=>{i(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let i=null;"fade"===t?i=e?0:1:(i=e?"-100%":"0","zoom-in"===t&&(i=e?.8:1),"zoom-out"===t&&(i=e?1.2:1),"slide-right"===t&&(i=e?"100%":"0"),"slide-bottom"===t&&(i=e?"100%":"0")),this.animation[this.animationMode()[t]](i)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((i=>{t(e,i)})),this.animation},animationType:e=>({fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(s,n,o,r,l,d){const h=m;return l.isShow?(e(),t(h,{key:0,ref:"ani",animation:l.animationData,class:a(o.customClass),style:i(d.transformStyles),onClick:d.onClick},{default:c((()=>[u(s.$slots,"default")])),_:3},8,["animation","class","style","onClick"])):p("",!0)}]]),Fe={name:"SuPopup",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(t=>{if(this.disable)return;const i=Object.keys(e).find((i=>{const a=t.key,s=e[i];return s===a||Array.isArray(s)&&s.includes(a)}));i&&setTimeout((()=>{this.$emit(i,{})}),0)}))},render:()=>{}}},emits:["change","maskClick","close"],props:{show:{type:Boolean,default:!1},space:{type:Number,default:0},round:{type:[String,Number],default:0},showClose:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},type:{type:String,default:"bottom"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"#ffffff"},backgroundImage:{type:String,default:""},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},zIndex:{type:[String,Number],default:10075}},watch:{show:{handler:function(e,t){(void 0!==t||e)&&(e?this.open():this.close())},immediate:!0},type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){document.getElementsByTagName("body")[0].style.overflow=e?"hidden":"visible"}},data(){return{sheep:k,duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor},borderRadius(){if(this.round){if("bottom"===this.type)return{"border-top-left-radius":parseFloat(this.round)+"px","border-top-right-radius":parseFloat(this.round)+"px"};if("center"===this.type)return{"border-top-left-radius":parseFloat(this.round)+"px","border-top-right-radius":parseFloat(this.round)+"px","border-bottom-left-radius":parseFloat(this.round)+"px","border-bottom-right-radius":parseFloat(this.round)+"px"};if("top"===this.type)return{"border-bottom-left-radius":parseFloat(this.round)+"px","border-bottom-right-radius":parseFloat(this.round)+"px"}}}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:i,safeArea:a,screenHeight:s,safeAreaInsets:n}=k.$platform.device;this.popupWidth=e,this.popupHeight=t+(i||0),a&&this.safeArea?this.safeAreaInsets=n.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){document.getElementsByTagName("body")[0].style.overflow="visible"},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){this.showPopup&&(clearTimeout(this.timer),this.showPopup=!1);e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):console.error("缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),this.$emit("close"),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,top:this.space+"px",backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+this.space+"px",backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}},We=()=>{M((e=>({"097a71b4":e.backgroundImage})))},Ae=Fe.setup;Fe.setup=Ae?(e,t)=>(We(),Ae(e,t)):We;const Oe=xe(Fe,[["render",function(s,n,o,h,f,g){const b=r(l("uni-transition"),Pe),_=r(l("uni-icons"),ke),v=m,x=P("keypress");return f.showPopup?(e(),t(v,{key:0,class:a(["uni-popup",[f.popupstyle,g.isDesktop?"fixforpc-z-index":""]]),style:i([{zIndex:o.zIndex}]),onTouchmove:y(g.clear,["stop","prevent"])},{default:c((()=>[d(v,{onTouchstart:g.touchstart},{default:c((()=>[f.maskShow?(e(),t(b,{key:"1",name:"mask","mode-class":"fade",styles:f.maskClass,duration:f.duration,show:f.showTrans,onClick:g.onTap},null,8,["styles","duration","show","onClick"])):p("",!0),d(b,{key:"2","mode-class":f.ani,name:"content",styles:{...f.transClass,...g.borderRadius},duration:f.duration,show:f.showTrans,onClick:g.onTap},{default:c((()=>[f.showPopup?(e(),t(v,{key:0,class:a(["uni-popup__wrapper",[f.popupstyle]]),style:i([{backgroundColor:g.bg},g.borderRadius]),onClick:g.clear},{default:c((()=>[o.showClose?(e(),t(_,{key:0,class:"close-icon",color:"#F6F6F6",type:"closeempty",size:"32",onClick:g.close},null,8,["onClick"])):p("",!0),u(s.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick"])):p("",!0)])),_:3},8,["mode-class","styles","duration","show","onClick"])])),_:3},8,["onTouchstart"]),f.maskShow?(e(),t(x,{key:0,onEsc:g.onTap},null,8,["onEsc"])):p("",!0)])),_:3},8,["class","style","onTouchmove"])):p("",!0)}],["__scopeId","data-v-ff06da88"]]),Ve=xe({__name:"su-status-bar",setup(a){const s=k.$platform.device.statusBarHeight+"px";return(a,n)=>{const o=m;return e(),t(o,{style:i({height:s}),class:"uni-status-bar"},{default:c((()=>[u(a.$slots,"default",{},void 0,!0)])),_:3},8,["style"])}}},[["__scopeId","data-v-54dfea09"]]),Re=xe({__name:"su-navbar",props:{dark:{type:Boolean,default:!1},modelValue:{type:String,default:""},title:{type:String,default:""},titleAlign:{type:String,default:"center"},rightText:{type:String,default:""},leftIcon:{type:String,default:"left"},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!0},placeholder:{type:[Boolean,String],default:!0},color:{type:String,default:""},backgroundColor:{type:String,default:""},opacity:{type:[Boolean,String],default:!1},opacityBgUi:{type:String,default:"bg-white"},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!1},height:{type:[Number,String],default:44},leftWidth:{type:[Number,String],default:80},rightWidth:{type:[Number,String],default:0},tools:{type:String,default:"title"},defaultSearch:{type:String,default:""}},emits:["clickLeft","clickRight","clickTitle","search"],setup(n,{emit:o}){const g=e=>"number"==typeof e?e+"px":e,b=o,y=n;F((()=>({width:k.$platform.capsule.width+"px",height:k.$platform.capsule.height+"px",margin:"0 "+(k.$platform.device.windowWidth-k.$platform.capsule.right)+"px"})));const _=F((()=>y.defaultSearch));F((()=>y.dark?y.backgroundColor?y.backgroundColor:y.dark?"#333":"#FFF":y.backgroundColor||"#FFF"));const v=F((()=>y.dark?y.color?y.color:y.dark?"#fff":"#333":y.color||"#333")),x=F((()=>g(y.height))),S=F((()=>g(y.leftWidth)));function C(e){b("search",e.value)}F((()=>g(y.rightWidth))),W((()=>{uni.report&&""!==y.title&&uni.report("title",y.title)}));const I=k.$router.hasHistory();function $(){I?k.$router.back():k.$router.go("/pages/index/index"),b("clickLeft")}function B(){b("clickTitle")}return(o,g)=>{const b=m,y=r(l("su-status-bar"),Ve),T=s,z=r(l("uni-search-bar"),Ie);return e(),t(b,{class:a(["uni-navbar",{"uni-dark":n.dark}])},{default:c((()=>[d(b,{class:a([{"uni-navbar--fixed":n.fixed,"uni-navbar--shadow":n.shadow,"uni-navbar--border":n.border},"uni-navbar__content"])},{default:c((()=>[d(b,{class:a(["fixed-bg",[n.opacity?"":n.opacityBgUi]])},null,8,["class"]),n.statusBar?(e(),t(y,{key:0})):p("",!0),d(b,{style:i({color:v.value,height:x.value,background:n.backgroundColor}),class:"uni-navbar__header"},{default:c((()=>[d(b,{class:"uni-navbar__header-btns uni-navbar__header-btns-left",style:i({width:S.value})},{default:c((()=>[u(o.$slots,"left",{},(()=>[n.leftIcon.length>0?(e(),t(b,{key:0,class:"uni-navbar__content_view"},{default:c((()=>[d(b,{class:"icon-box ss-flex"},{default:c((()=>[d(b,{class:"icon-button icon-button-left ss-flex ss-row-center",onClick:$},{default:c((()=>[w(I)?(e(),t(T,{key:0,class:"sicon-back"})):(e(),t(T,{key:1,class:"sicon-home"}))])),_:1}),d(b,{class:"line"}),d(b,{class:"icon-button icon-button-right ss-flex ss-row-center",onClick:w(A)},{default:c((()=>[d(T,{class:"sicon-more"})])),_:1},8,["onClick"])])),_:1})])),_:1})):p("",!0),"left"===n.titleAlign&&n.title.length&&"WechatOfficialAccount"!==w(k).$platform.name?(e(),t(b,{key:1,class:a([{"uni-navbar-btn-icon-left":!n.leftIcon.length>0},"uni-navbar-btn-text"])},{default:c((()=>[d(T,{style:i({color:v.value,fontSize:"18px"})},{default:c((()=>[h(f(n.title),1)])),_:1},8,["style"])])),_:1},8,["class"])):p("",!0)]),!0)])),_:3},8,["style"]),"search"===n.tools?(e(),t(b,{key:0,class:"ss-flex-1"},{default:c((()=>[u(o.$slots,"center",{},(()=>[d(z,{class:"ss-flex-1 search-box",radius:20,placeholder:"请输入关键词",cancelButton:"none",modelValue:_.value,"onUpdate:modelValue":g[0]||(g[0]=e=>_.value=e),onConfirm:C},null,8,["modelValue"])]),!0)])),_:3})):(e(),t(b,{key:1,class:"uni-navbar__header-container",onClick:B},{default:c((()=>[u(o.$slots,"center",{},(()=>["title"===n.tools&&"center"===n.titleAlign&&n.title.length?(e(),t(b,{key:0,class:"uni-navbar__header-container-inner"},{default:c((()=>[d(T,{style:i({color:v.value,fontSize:"36rpx"}),class:"ss-line-1"},{default:c((()=>[h(f(n.title),1)])),_:1},8,["style"])])),_:1})):p("",!0)]),!0)])),_:3}))])),_:3},8,["style"])])),_:3},8,["class"]),n.placeholder?(e(),t(b,{key:0,class:"uni-navbar__placeholder"},{default:c((()=>[n.statusBar?(e(),t(y,{key:0})):p("",!0),d(b,{class:"uni-navbar__placeholder-view",style:i({height:x.value})},null,8,["style"])])),_:1})):p("",!0)])),_:3},8,["class"])}}},[["__scopeId","data-v-bf6602b1"]]),Le=xe({__name:"su-fixed",props:{noNav:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},bg:{type:String,default:""},bgStyles:{type:Object,default(){}},val:{type:Number,default:0},width:{type:[String,Number],default:0},alway:{type:Boolean,default:!0},opacity:{type:Boolean,default:!1},index:{type:[Number,String],default:0},placeholder:{type:[Boolean],default:!1},sticky:{type:[Boolean],default:!1},noFixed:{type:Boolean,default:!1},ui:{type:String,default:""},clickTo:{type:Boolean,default:!1},isInset:{type:Boolean,default:!0}},setup(s){const{safeAreaInsets:n}=k.$platform.device,o=j(),r=k.$helper.guid(),l=k.$platform.navbar,h=b({content:{},fixed:!0,scrollTop:0,opacityVal:0}),f=F((()=>h.fixed&&g.bottom?g.isInset?g.val+"px":g.val+n.bottom+"px":"auto")),g=s;h.fixed=!w(g.sticky),O((e=>{let t=e.scrollTop;h.scrollTop=t,h.opacityVal=t>k.$platform.navbar?1:.01*t})),V((()=>{R((()=>{y()}))}));const y=()=>{L().in(o).select(`#fixed-${r}`).boundingClientRect((e=>{null!=e&&(h.content=e,w(g.sticky)&&_(h.scrollTop))})).exec()},_=e=>{w(g.bottom)?h.fixed=e>=h.content.bottom-k.$platform.device.windowHeight+h.content.height+w(g.val):h.fixed=e>=h.content.top-(w(g.noNav)?w(g.val):w(g.val)+k.$platform.navbar)},v=()=>{g.hasToTop&&E({scrollTop:h.content.top,duration:100})};return(o,g)=>{const b=m;return e(),t(b,{class:"ui-fixed"},{default:c((()=>[d(b,{class:a(["ui-fixed-box",[{fixed:h.fixed}]]),id:`fixed-${w(r)}`,style:i([{left:s.sticky?"auto":"0px",top:h.fixed&&!s.bottom?(s.noNav?s.val:s.val+w(l))+"px":"auto",bottom:f.value,zIndex:s.index+w(k).$zIndex.navbar},s.alway?"":{opacity:h.opacityVal}])},{default:c((()=>[d(b,{class:"ui-fixed-content",onClick:v,style:i([{zIndex:s.index+w(k).$zIndex.navbar}])},{default:c((()=>[u(o.$slots,"default",{},void 0,!0),w(n).bottom&&s.bottom&&s.isInset?(e(),t(b,{key:0,class:"inset-bottom",style:i([{height:w(n).bottom+"px"}])},null,8,["style"])):p("",!0)])),_:3},8,["style"]),s.bottom?(e(),t(b,{key:0,class:a(["ui-fixed-bottom",[s.bg]])},null,8,["class"])):p("",!0),d(b,{class:a(["ui-fixed-bg",[s.ui,s.bg]]),style:i([{zIndex:s.index+w(k).$zIndex.navbar-1},s.bgStyles,s.opacity?{opacity:h.opacityVal}:""])},null,8,["class","style"])])),_:3},8,["id","class","style"]),(s.sticky||s.placeholder)&&h.fixed?(e(),t(b,{key:0,class:"skeleton",style:i([{height:h.content.height+"px",width:s.width+"px"}])},null,8,["style"])):p("",!0)])),_:3})}}},[["__scopeId","data-v-7dc16eaf"]]),je=xe({__name:"navbar",props:{sticky:Boolean,zIndex:{type:Number,default:100},back:{type:Boolean,default:!0},backtext:{type:String,default:""},bg:{type:String,default:"bg-white"},status:{type:String,default:""},alway:{type:Boolean,default:!0},opacity:{type:Boolean,default:!1},opacityBg:{type:Boolean,default:!1},noFixed:{type:Boolean,default:!1},ui:{type:String,default:""},capsule:{type:Boolean,default:!1},stopBack:{type:Boolean,default:!1},placeholder:{type:[Boolean],default:!0},bgStyles:{type:Object,default(){}}},emits:["navback"],setup(s,{emit:n}){const o=b({statusCur:"",capsuleStyle:{},capsuleBack:{}}),h=k.$platform.device.statusBarHeight,f=k.$platform.navbar,p=s;N((()=>{g()}));const g=()=>{o.capsuleStyle={width:k.$platform.capsule.width+"px",height:k.$platform.capsule.height+"px",margin:"0 "+(k.$platform.device.windowWidth-k.$platform.capsule.right)+"px"},o.capsuleBack=o.capsuleStyle};return(s,n)=>{const o=r(l("su-status-bar"),Ve),g=m,b=r(l("su-fixed"),Le);return e(),t(b,{noFixed:p.noFixed,alway:p.alway,bgStyles:p.bgStyles,val:0,index:p.zIndex,noNav:"",bg:p.bg,ui:p.ui,opacity:p.opacity,placeholder:p.placeholder,sticky:p.sticky},{default:c((()=>[d(o),d(g,{class:"ui-navbar-box"},{default:c((()=>[d(g,{class:a(["ui-bar",""==p.status?"text-a":"light"==p.status?"text-white":"text-black"]),style:i([{height:w(f)-w(h)+"px"}])},{default:c((()=>[u(s.$slots,"item",{},void 0,!0),d(g,{class:"right"})])),_:3},8,["class","style"])])),_:3})])),_:3},8,["noFixed","alway","bgStyles","index","bg","ui","opacity","placeholder","sticky"])}}},[["__scopeId","data-v-34494424"]]),Ee=xe({__name:"navbar-item",props:{data:{type:Object,default:()=>({})},width:{type:String,default:"1px"}},setup(a){const s=F((()=>k.$platform.capsule.height));return(n,o)=>{const u=m,g=H,b=r(l("s-search-block"),$e);return e(),t(u,{class:"ss-flex ss-col-center"},{default:c((()=>["text"===a.data.type?(e(),t(u,{key:0,class:"nav-title inline",style:i([{color:a.data.textColor,width:a.width}]),onClick:o[0]||(o[0]=e=>w(k).$router.go(a.data.url))},{default:c((()=>[h(f(a.data.text),1)])),_:1},8,["style"])):p("",!0),"image"===a.data.type?(e(),t(u,{key:1,style:i([{width:a.width}]),class:"menu-icon-wrap ss-flex ss-row-center ss-col-center",onClick:o[1]||(o[1]=e=>w(k).$router.go(a.data.url))},{default:c((()=>[d(g,{class:"nav-image",src:w(k).$url.cdn(a.data.imgUrl),mode:"aspectFit"},null,8,["src"])])),_:1},8,["style"])):p("",!0),"search"===a.data.type?(e(),t(u,{key:2,class:"ss-flex-1",style:i([{width:a.width}])},{default:c((()=>[d(b,{placeholder:a.data.placeholder||"搜索关键字","placeholder-position":a.data.placeholderPosition,radius:a.data.borderRadius,"el-background":a.data.backgroundColor,"font-color":a.data.textColor,height:s.value,width:a.width,"show-scan":a.data.showScan,onClick:o[2]||(o[2]=e=>w(k).$router.go("/pages/index/search"))},null,8,["placeholder","placeholder-position","radius","el-background","font-color","height","width","show-scan"])])),_:1},8,["style"])):p("",!0)])),_:1})}}},[["__scopeId","data-v-67cc9bc0"]]),Ne=xe({__name:"s-custom-navbar",props:{data:{type:Object,default:()=>({})},showLeftButton:{type:Boolean,default:!1}},setup(n){const o=n,r=k.$router.hasHistory(),l=F((()=>("inner"!==o.data.styleType||!o.data.alwaysShow)&&("normal"!==o.data.styleType&&void 0))),u=F((()=>o.data.otherCells||[])),h=k.$platform.device.windowWidth,f=F((()=>{if(w(u).length){return(h-90)/8}})),g=e=>({width:e.width*f.value+10*(e.width-1)+"px",left:e.left*f.value+10*(e.left+1)+"px","border-radius":e.borderRadius+"px"}),b=F((()=>"inner"!==o.data.styleType||Boolean(o.data.alwaysShow))),y=F((()=>"normal"!==o.data.styleType&&(!o.showLeftButton&&"inner"===o.data.styleType))),S=F((()=>"normal"===o.data.styleType)),C=F((()=>({background:"img"===o.data.bgType&&o.data.bgImg?`url(${k.$url.cdn(o.data.bgImg)}) no-repeat top center / 100% 100%`:o.data.bgColor})));function I(){r?k.$router.back():k.$router.go("/pages/index/index")}function $(){A()}return(o,h)=>{const f=s,k=m;return e(),t(je,{alway:b.value,back:!1,bg:"",placeholder:S.value,bgStyles:C.value,opacity:y.value,sticky:l.value},{item:c((()=>[d(k,{class:"nav-box"},{default:c((()=>[n.showLeftButton?(e(),t(k,{key:0,class:"nav-icon"},{default:c((()=>[d(k,{class:a(["icon-box ss-flex",{"inner-icon-box":"inner"===n.data.styleType}])},{default:c((()=>[d(k,{class:"icon-button icon-button-left ss-flex ss-row-center",onClick:I},{default:c((()=>[w(r)?(e(),t(f,{key:0,class:"sicon-back"})):(e(),t(f,{key:1,class:"sicon-home"}))])),_:1}),d(k,{class:"line"}),d(k,{class:"icon-button icon-button-right ss-flex ss-row-center",onClick:$},{default:c((()=>[d(f,{class:"sicon-more"})])),_:1})])),_:1},8,["class"])])),_:1})):p("",!0),(e(!0),_(v,null,x(u.value,((s,n)=>(e(),t(k,{class:a(["nav-item",[{"ss-flex ss-col-center ss-row-center":"search"!==s.type}]]),key:n,style:i([g(s)])},{default:c((()=>[d(Ee,{data:s,width:g(s).width},null,8,["data","width"])])),_:2},1032,["style","class"])))),128))])),_:1})])),_:1},8,["alway","placeholder","bgStyles","opacity","sticky"])}}},[["__scopeId","data-v-dff60845"]]),He=xe({__name:"su-inner-navbar",props:{zIndex:{type:Number,default:100},title:{type:String,default:""},bg:{type:String,default:"bg-white"},alway:{type:Boolean,default:!0},opacity:{type:Boolean,default:!0},noFixed:{type:Boolean,default:!0},ui:{type:String,default:""},capsule:{type:Boolean,default:!1},stopBack:{type:Boolean,default:!1},placeholder:{type:[Boolean],default:!1},bgStyles:{type:Object,default(){}}},emits:["navback","clickLeft"],setup(n,{emit:o}){const p=b({statusCur:"",capsuleStyle:{},capsuleBack:{},isDark:!0}),g=k.$platform.device.statusBarHeight,y=k.$platform.navbar,_=n,v=o,x=k.$router.hasHistory();function S(){x?k.$router.back():k.$router.go("/pages/index/index"),v("clickLeft")}function C(){A()}N((()=>{I()})),O((e=>{let t=e.scrollTop;p.isDark=t<k.$platform.navbar}));const I=()=>{p.capsuleStyle={width:k.$platform.capsule.width+"px",height:k.$platform.capsule.height+"px"},p.capsuleBack=p.capsuleStyle};return(o,b)=>{const v=r(l("su-status-bar"),Ve),k=s,I=m,$=r(l("su-fixed"),Le);return e(),t($,{noFixed:_.noFixed,alway:_.alway,bgStyles:_.bgStyles,val:0,index:_.zIndex,noNav:"",bg:_.bg,ui:_.ui,opacity:_.opacity,placeholder:_.placeholder},{default:c((()=>[d(v),d(I,{class:"ui-navbar-box"},{default:c((()=>[d(I,{class:a(["ui-bar ss-p-x-20",p.isDark?"text-white":"text-black"]),style:i([{height:w(y)-w(g)+"px"}])},{default:c((()=>[d(I,{class:"icon-box ss-flex"},{default:c((()=>[d(I,{class:"icon-button icon-button-left ss-flex ss-row-center",onClick:S},{default:c((()=>[w(x)?(e(),t(k,{key:0,class:"sicon-back"})):(e(),t(k,{key:1,class:"sicon-home"}))])),_:1}),d(I,{class:"line"}),d(I,{class:"icon-button icon-button-right ss-flex ss-row-center",onClick:C},{default:c((()=>[d(k,{class:"sicon-more"})])),_:1})])),_:1}),u(o.$slots,"center",{},(()=>[d(I,{class:"center navbar-title"},{default:c((()=>[h(f(n.title),1)])),_:1})]),!0)])),_:3},8,["class","style"])])),_:3})])),_:3},8,["noFixed","alway","bgStyles","index","bg","ui","opacity","placeholder"])}}},[["__scopeId","data-v-f43f32b1"]]);const De=xe({name:"su-tabbar-item",props:{customStyle:{type:[Object,String],default:()=>({})},customClass:{type:String,default:""},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"},name:{type:[String,Number,null],default:""},icon:{icon:String,default:""},badge:{type:[String,Number,null],default:""},dot:{type:Boolean,default:!1},text:{type:String,default:""},badgeStyle:{type:Object,default:()=>{}},isCenter:{type:Boolean,default:!1},centerImage:{type:String,default:""}},data:()=>({isActive:!1,addStyle:D,parentData:{value:null,activeColor:"",inactiveColor:""},parent:{}}),created(){this.init()},methods:{getParentData(e=""){this.parent||(this.parent={}),this.parent=U.call(this,e),this.parent.children&&-1===this.parent.children.indexOf(this)&&this.parent.children.push(this),this.parent&&this.parentData&&Object.keys(this.parentData).map((e=>{this.parentData[e]=this.parent[e]}))},init(){this.updateParentData(),this.parent||console.log("u-tabbar-item必须搭配u-tabbar组件使用");const e=this.parent.children.indexOf(this);this.isActive=(this.name.split("?")[0]||e)===this.parentData.value},updateParentData(){this.getParentData("su-tabbar")},updateFromParent(){this.init()},clickHandler(){this.$nextTick((()=>{const e=this.parent.children.indexOf(this),t=this.name||e;t!==this.parent.value&&this.parent.$emit("change",t),this.$emit("click",t)}))}}},[["render",function(a,n,o,p,g,b){const y=H,x=m,w=r(l("uni-badge"),Be),k=s;return e(),t(x,{class:"u-tabbar-item",style:i([g.addStyle(o.customStyle)])},{default:c((()=>[o.isCenter?(e(),t(x,{key:0,class:"tabbar-center-item"},{default:c((()=>[d(y,{class:"center-image",src:o.centerImage,mode:"aspectFill"},null,8,["src"])])),_:1})):(e(),_(v,{key:1},[d(x,{class:"u-tabbar-item__icon"},{default:c((()=>[d(w,{absolute:"rightTop",size:"small",text:o.badge||(o.dot?1:null),customStyle:o.badgeStyle,isDot:o.dot},{default:c((()=>[o.icon?(e(),t(y,{key:0,name:o.icon,color:g.isActive?g.parentData.activeColor:g.parentData.inactiveColor,size:20},null,8,["name","color"])):(e(),_(v,{key:1},[g.isActive?u(a.$slots,"active-icon",{key:0},void 0,!0):u(a.$slots,"inactive-icon",{key:1},void 0,!0)],64))])),_:3},8,["text","customStyle","isDot"])])),_:3}),u(a.$slots,"text",{},(()=>[d(k,{class:"u-tabbar-item__text",style:i({color:g.isActive?g.parentData.activeColor:g.parentData.inactiveColor})},{default:c((()=>[h(f(o.text),1)])),_:1},8,["style"])]),!0)],64))])),_:3},8,["style"])}],["__scopeId","data-v-f4f6a464"]]);const Ue=xe({name:"su-tabbar",props:{customStyle:{type:[Object,String],default:()=>({})},customClass:{type:String,default:""},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"},value:{type:[String,Number,null],default:""},safeAreaInsetBottom:{type:Boolean,default:!0},border:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:10},activeColor:{type:String,default:"#1989fa"},inactiveColor:{type:String,default:"#7d7e80"},fixed:{type:Boolean,default:!0},placeholder:{type:Boolean,default:!0},midTabBar:{type:Boolean,default:!1}},data:()=>({placeholderHeight:0,safeBottomHeight:k.$platform.device.safeAreaInsets.bottom}),computed:{tabbarStyle(){const e={zIndex:this.zIndex};return q(e,D(this.customStyle))},updateChild(){return[this.value,this.activeColor,this.inactiveColor]},updatePlaceholder(){return[this.fixed,this.placeholder]}},watch:{updateChild(){this.updateChildren()},updatePlaceholder(){this.setPlaceholderHeight()}},created(){this.children=[]},mounted(){this.setPlaceholderHeight()},methods:{updateChildren(){this.children.length&&this.children.map((e=>e.updateFromParent()))},getRect(e,t){return new Promise((i=>{uni.createSelectorQuery().in(this)[t?"selectAll":"select"](e).boundingClientRect((e=>{t&&Array.isArray(e)&&e.length&&i(e),!t&&e&&i(e)})).exec()}))},async setPlaceholderHeight(){this.fixed&&this.placeholder&&(await Y(20),this.getRect(".u-tabbar__content").then((({height:e=50})=>{this.placeholderHeight=e})))}}},[["render",function(s,n,o,r,l,h){const f=m;return e(),t(f,{class:"u-tabbar"},{default:c((()=>[d(f,{class:a(["u-tabbar__content",[o.border&&"u-border-top",o.fixed&&"u-tabbar--fixed",{"mid-tabbar":o.midTabBar}]]),ref:"u-tabbar__content",onTouchmove:n[0]||(n[0]=y((()=>{}),["stop","prevent"])),style:i([h.tabbarStyle])},{default:c((()=>[d(f,{class:"u-tabbar__content__item-wrapper"},{default:c((()=>[u(s.$slots,"default",{},void 0,!0)])),_:3}),o.safeAreaInsetBottom?(e(),t(f,{key:0,style:i([{height:l.safeBottomHeight+"px"}])},null,8,["style"])):p("",!0)])),_:3},8,["class","style"]),o.placeholder?(e(),t(f,{key:0,class:"u-tabbar__placeholder",style:i({height:l.placeholderHeight+"px"})},null,8,["style"])):p("",!0)])),_:3})}],["__scopeId","data-v-5d5d4463"]]),qe=xe({__name:"s-tabbar",props:{path:String,default:""},setup(i){const a=F((()=>{var e;return null==(e=k.$store("app").template.basic)?void 0:e.tabbar})),s=F((()=>{const e=a.value.style;return"color"===e.bgType?{background:e.bgColor}:"img"===e.bgType?{background:`url(${k.$url.cdn(e.bgImg)}) no-repeat top center / 100% auto`}:void 0})),n=e=>2===w(a).mode&&(w(a).items%2>0&&Math.ceil(w(a).items.length/2)===e+1);return(o,u)=>{var h,f;const g=H,b=r(l("su-tabbar-item"),De),y=m;return(null==(f=null==(h=a.value)?void 0:h.items)?void 0:f.length)>0?(e(),t(y,{key:0,class:"u-page__item"},{default:c((()=>[d(Ue,{value:i.path,fixed:!0,placeholder:!0,safeAreaInsetBottom:!0,inactiveColor:a.value.style.color,activeColor:a.value.style.activeColor,midTabBar:2===a.value.mode,customStyle:s.value},{default:c((()=>[(e(!0),_(v,null,x(a.value.items,((i,s)=>(e(),t(b,{key:i.text,text:i.text,name:i.url,badge:i.badge,dot:i.dot,badgeStyle:a.value.badgeStyle,isCenter:n(s),centerImage:w(k).$url.cdn(i.iconUrl),onClick:e=>w(k).$router.go(i.url)},{"active-icon":c((()=>[d(g,{class:"u-page__item__slot-icon",src:w(k).$url.cdn(i.activeIconUrl)},null,8,["src"])])),"inactive-icon":c((()=>[d(g,{class:"u-page__item__slot-icon",src:w(k).$url.cdn(i.iconUrl)},null,8,["src"])])),_:2},1032,["text","name","badge","dot","badgeStyle","isCenter","centerImage","onClick"])))),128))])),_:1},8,["value","inactiveColor","activeColor","midTabBar","customStyle"])])),_:1})):p("",!0)}}},[["__scopeId","data-v-9f172f61"]]),Ye={name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm"],model:{prop:"modelValue",event:"update:modelValue"},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:String,placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:15},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!0},passwordIcon:{type:Boolean,default:!0},styles:{type:Object,default:()=>({color:"#333",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""},paddingLeft:{type:[Number,String],default:0}},data:()=>({focused:!1,errMsg:"",val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1}),computed:{msg(){return this.errorMessage||this.errMsg},inputMaxlength(){return Number(this.maxlength)}},watch:{value(e){this.errMsg&&(this.errMsg=""),this.val=e,this.form&&this.formItem&&!this.is_reset&&(this.is_reset=!1,this.formItem.setValue(e))},modelValue(e){this.errMsg&&(this.errMsg=""),this.val=e,this.form&&this.formItem&&!this.is_reset&&(this.is_reset=!1,this.formItem.setValue(e))},focus(e){this.$nextTick((()=>{this.focused=this.focus}))}},created(){this.value||0===this.value||(this.val=this.modelValue),this.modelValue||0===this.modelValue||(this.val=this.value),this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem"),this.form&&this.formItem&&this.formItem.name&&(this.is_reset||(this.is_reset=!1,this.formItem.setValue(this.val)),this.rename=this.formItem.name,this.form.inputChildrens.push(this))},mounted(){this.$nextTick((()=>{this.focused=this.focus}))},methods:{init(){},onClickIcon(e){this.$emit("iconClick",e)},getForm(e="uniForms"){let t=this.$parent,i=t.$options.name;for(;i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t},onEyes(){this.showPassword=!this.showPassword},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(e){this.$emit("focus",e)},onBlur(e){e.detail.value,this.$emit("blur",e)},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue","")},fieldClick(){this.$emit("click")},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}};const Xe=xe(Ye,[["render",function(s,n,o,h,f,b){const y=r(l("uni-icons"),ke),x=X,w=g,k=m;return e(),t(k,{class:a(["uni-easyinput",{"uni-easyinput-error":b.msg}]),style:i({color:o.inputBorder&&b.msg?"#e43d33":o.styles.color})},{default:c((()=>[d(k,{class:a(["uni-easyinput__content",{"is-input-border":o.inputBorder,"is-input-error-border":o.inputBorder&&b.msg,"is-textarea":"textarea"===o.type,"is-disabled":o.disabled}]),style:i({"border-color":o.inputBorder&&b.msg?"#dd524d":o.styles.borderColor,"background-color":o.disabled?o.styles.disableColor:""})},{default:c((()=>[o.prefixIcon?(e(),t(y,{key:0,class:"content-clear-icon",type:o.prefixIcon,color:"#c0c4cc",onClick:n[0]||(n[0]=e=>b.onClickIcon("prefix"))},null,8,["type"])):p("",!0),"textarea"===o.type?(e(),t(x,{key:1,class:a(["uni-easyinput__content-textarea",{"input-padding":o.inputBorder}]),name:o.name,value:f.val,placeholder:o.placeholder,placeholderStyle:o.placeholderStyle,disabled:o.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:b.inputMaxlength,focus:f.focused,autoHeight:o.autoHeight,onInput:b.onInput,onBlur:b.onBlur,onFocus:b.onFocus,onConfirm:b.onConfirm},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","onInput","onBlur","onFocus","onConfirm"])):(e(),t(w,{key:2,type:"password"===o.type?"text":o.type,class:"uni-easyinput__content-input",style:i({"padding-right":"password"===o.type||o.clearable||o.prefixIcon?"":"10px","padding-left":o.paddingLeft+"px"}),name:o.name,value:f.val,password:!f.showPassword&&"password"===o.type,placeholder:o.placeholder,placeholderStyle:o.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:o.disabled,maxlength:b.inputMaxlength,focus:f.focused,confirmType:o.confirmType,onFocus:b.onFocus,onBlur:b.onBlur,onInput:b.onInput,onChange:b.onInput,onConfirm:b.onConfirm,"cursor-spacing":30,"always-embed":""},null,8,["type","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","onFocus","onBlur","onInput","onChange","onConfirm"])),"password"===o.type&&o.passwordIcon?(e(),_(v,{key:3},[f.val?(e(),t(y,{key:0,class:a(["content-clear-icon",{"is-textarea-icon":"textarea"===o.type}]),type:f.showPassword?"eye-slash-filled":"eye-filled",size:18,color:"#c0c4cc",onClick:b.onEyes},null,8,["class","type","onClick"])):p("",!0)],64)):o.suffixIcon?(e(),_(v,{key:4},[o.suffixIcon?(e(),t(y,{key:0,class:"content-clear-icon",type:o.suffixIcon,color:"#c0c4cc",onClick:n[1]||(n[1]=e=>b.onClickIcon("suffix"))},null,8,["type"])):p("",!0)],64)):(e(),_(v,{key:5},[o.clearable&&f.val&&!o.disabled?(e(),t(y,{key:0,class:a(["content-clear-icon",{"is-textarea-icon":"textarea"===o.type}]),type:"clear",size:o.clearSize,color:"#c0c4cc",onClick:b.onClear},null,8,["class","size","onClick"])):p("",!0)],64)),u(s.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-6409dd3c"]]),Ge={name:"uniFormsItem",props:{custom:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},name:String,required:Boolean,validateTrigger:{type:String,default:""},leftIcon:String,iconColor:{type:String,default:"#606266"},label:String,labelWidth:{type:[Number,String],default:""},labelAlign:{type:String,default:""},labelPosition:{type:String,default:""},errorMessage:{type:[String,Boolean],default:""},rules:{type:Array,default:()=>[]}},data:()=>({errorTop:!1,errorBottom:!1,labelMarginBottom:"",errorWidth:"",errMsg:"",val:"",labelPos:"",labelWid:"",labelAli:"",showMsg:"undertext",border:!1,isFirstBorder:!1,isArray:!1,arrayField:""}),computed:{msg(){return this.errorMessage||this.errMsg},fieldStyle(){let e={};return"top"==this.labelPos&&(e.padding="0 0",this.labelMarginBottom="6px"),"left"==this.labelPos&&!1!==this.msg&&""!=this.msg?(e.paddingBottom="0px",this.errorBottom=!0,this.errorTop=!1):"top"==this.labelPos&&!1!==this.msg&&""!=this.msg?(this.errorBottom=!1,this.errorTop=!0):(this.errorTop=!1,this.errorBottom=!1),e},justifyContent(){return"left"===this.labelAli?"flex-start":"center"===this.labelAli?"center":"right"===this.labelAli?"flex-end":void 0},labelLeft(){return("left"===this.labelPos?parseInt(this.labelWid):0)+"rpx"}},watch:{validateTrigger(e){this.formTrigger=e}},created(){this.form=this.getForm(),this.group=this.getForm("uniGroup"),this.formRules=[],this.formTrigger=this.validateTrigger,this.name&&-1!==this.name.indexOf("[")&&-1!==this.name.indexOf("]")&&(this.isArray=!0,this.arrayField=this.name,this.form.formData[this.name]=this.form._getValue(this.name,""))},mounted(){this.form&&this.form.childrens.push(this),this.init()},unmounted(){this.__isUnmounted=!0,this.unInit()},methods:{init(){if(this.form){let{formRules:e,validator:t,formData:i,value:a,labelPosition:s,labelWidth:n,labelAlign:o,errShowType:r}=this.form;this.labelPos=this.labelPosition?this.labelPosition:s,this.label?this.labelWid=this.labelWidth?this.labelWidth:n||140:this.labelWid=this.labelWidth?this.labelWidth:n||"auto",this.labelWid&&"auto"!==this.labelWid&&(this.labelWid+="rpx"),this.labelAli=this.labelAlign?this.labelAlign:o,this.form.isFirstBorder||(this.form.isFirstBorder=!0,this.isFirstBorder=!0),this.group&&(this.group.isFirstBorder||(this.group.isFirstBorder=!0,this.isFirstBorder=!0)),this.border=this.form.border,this.showMsg=r;let l=this.isArray?this.arrayField:this.name;if(!l)return;e&&this.rules.length>0&&(e[l]||(e[l]={rules:this.rules}),t.updateSchema(e)),this.formRules=e[l]||{},this.validator=t}else this.labelPos=this.labelPosition||"left",this.labelWid=this.labelWidth||130,this.labelAli=this.labelAlign||"left"},unInit(){this.form&&this.form.childrens.forEach(((e,t)=>{e===this&&(this.form.childrens.splice(t,1),delete this.form.formData[e.name])}))},getForm(e="uniForms"){let t=this.$parent,i=t.$options.name;for(;i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t},clearValidate(){this.errMsg=""},setValue(e){let t=this.isArray?this.arrayField:this.name;if(t){if(this.errMsg&&(this.errMsg=""),this.form.formData[t]=this.form._getValue(t,e),!this.formRules||(this.formRules,"{}"===JSON.stringify(this.formRules)))return;this.triggerCheck(this.form._getValue(this.name,e))}},async triggerCheck(e,t){if(this.errMsg="",!this.validator||0===Object.keys(this.formRules).length)return;const i=this.isRequired(this.formRules.rules||[]);let a=this.isTrigger(this.formRules.validateTrigger,this.validateTrigger,this.form.validateTrigger),s=null;if(a||t){let t=this.isArray?this.arrayField:this.name;s=await this.validator.validateUpdate({[t]:e},this.form.formData)}i||void 0!==e&&""!==e||(s=null);const n=this.form.inputChildrens.find((e=>e.rename===this.name));return(a||t)&&s&&s.errorMessage?(n&&(n.errMsg=s.errorMessage),"toast"===this.form.errShowType&&C({title:s.errorMessage||"校验错误",icon:"none"}),"modal"===this.form.errShowType&&I({title:"提示",content:s.errorMessage||"校验错误"})):n&&(n.errMsg=""),this.errMsg=s?s.errorMessage:"",this.form.validateCheck(s||null),s||null},isTrigger:(e,t,i)=>!("submit"===e||!e)||void 0===e&&("bind"===t||!t&&"bind"===i),isRequired(e){let t=!1;for(let i=0;i<e.length;i++){if(e[i].required){t=!0;break}}return t}}};const Je=xe(Ge,[["render",function(n,o,g,b,y,_){const v=s,x=r(l("uni-icons"),ke),w=m;return e(),t(w,{class:""},{default:c((()=>[d(w,{class:a(["uni-forms-item",{"uni-forms-item--border":y.border,"is-first-border":y.border&&y.isFirstBorder,"uni-forms-item-error":_.msg}])},{default:c((()=>[d(w,{class:"uni-forms-item__box"},{default:c((()=>[d(w,{class:a(["uni-forms-item__inner",["is-direction-"+y.labelPos]])},{default:c((()=>[d(w,{class:"uni-forms-item__label",style:i({width:y.labelWid,justifyContent:_.justifyContent})},{default:c((()=>[u(n.$slots,"label",{},(()=>[g.required?(e(),t(v,{key:0,class:"is-required"},{default:c((()=>[h("*")])),_:1})):p("",!0),g.leftIcon?(e(),t(x,{key:1,class:"label-icon",size:"16",type:g.leftIcon,color:g.iconColor},null,8,["type","color"])):p("",!0),d(v,{class:"label-text"},{default:c((()=>[h(f(g.label),1)])),_:1}),g.label?(e(),t(w,{key:2,class:"label-seat"})):p("",!0)]),!0)])),_:3},8,["style"]),d(w,{class:a(["uni-forms-item__content",{"is-input-error-border":_.msg}])},{default:c((()=>[u(n.$slots,"default",{},void 0,!0)])),_:3},8,["class"])])),_:3},8,["class"]),_.msg?(e(),t(w,{key:0,class:a(["uni-error-message",{"uni-error-msg--boeder":y.border}]),style:i({paddingLeft:_.labelLeft})},{default:c((()=>[d(v,{class:"uni-error-message-text"},{default:c((()=>[h(f("undertext"===y.showMsg?_.msg:""),1)])),_:1})])),_:1},8,["class","style"])):p("",!0)])),_:3})])),_:3},8,["class"])])),_:3})}],["__scopeId","data-v-395cda4e"]]);var Ze={email:/^\S+?@\S+?\.\S+?$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")};const Ke={int:"integer",bool:"boolean",double:"number",long:"number",password:"string"};function Qe(e,t=""){["label"].forEach((t=>{void 0===e[t]&&(e[t]="")}));let i=t;for(let a in e){let t=new RegExp("{"+a+"}");i=i.replace(t,e[a])}return i}const et={integer:e=>et.number(e)&&parseInt(e,10)===e,string:e=>"string"==typeof e,number:e=>!isNaN(e)&&"number"==typeof e,boolean:function(e){return"boolean"==typeof e},float:function(e){return et.number(e)&&!et.integer(e)},array:e=>Array.isArray(e),object:e=>"object"==typeof e&&!et.array(e),date:e=>e instanceof Date,timestamp(e){return!(!this.integer(e)||Math.abs(e).toString().length>16)},file:e=>"string"==typeof e.url,email:e=>"string"==typeof e&&!!e.match(Ze.email)&&e.length<255,url:e=>"string"==typeof e&&!!e.match(Ze.url),pattern(e,t){try{return new RegExp(e).test(t)}catch(i){return!1}},method:e=>"function"==typeof e,idcard:e=>"string"==typeof e&&!!e.match(Ze.idcard),"url-https"(e){return this.url(e)&&e.startsWith("https://")},"url-scheme":e=>e.startsWith("://"),"url-web":e=>!1};const it={required:(e,t,i)=>e.required&&function(e,t){return null==e||"string"==typeof e&&!e||!(!Array.isArray(e)||e.length)||"object"===t&&!Object.keys(e).length}(t,e.format||typeof t)?Qe(e,e.errorMessage||i.required):null,range(e,t,i){const{range:a,errorMessage:s}=e;let n=new Array(a.length);for(let r=0;r<a.length;r++){const e=a[r];et.object(e)&&void 0!==e.value?n[r]=e.value:n[r]=e}let o=!1;return Array.isArray(t)?o=new Set(t.concat(n)).size===n.length:n.indexOf(t)>-1&&(o=!0),o?null:Qe(e,s||i.enum)},rangeNumber(e,t,i){if(!et.number(t))return Qe(e,e.errorMessage||i.pattern.mismatch);let{minimum:a,maximum:s,exclusiveMinimum:n,exclusiveMaximum:o}=e,r=n?t<=a:t<a,l=o?t>=s:t>s;return void 0!==a&&r?Qe(e,e.errorMessage||i.number[n?"exclusiveMinimum":"minimum"]):void 0!==s&&l?Qe(e,e.errorMessage||i.number[o?"exclusiveMaximum":"maximum"]):void 0!==a&&void 0!==s&&(r||l)?Qe(e,e.errorMessage||i.number.range):null},rangeLength(e,t,i){if(!et.string(t)&&!et.array(t))return Qe(e,e.errorMessage||i.pattern.mismatch);let a=e.minLength,s=e.maxLength,n=t.length;return void 0!==a&&n<a?Qe(e,e.errorMessage||i.length.minLength):void 0!==s&&n>s?Qe(e,e.errorMessage||i.length.maxLength):void 0!==a&&void 0!==s&&(n<a||n>s)?Qe(e,e.errorMessage||i.length.range):null},pattern:(e,t,i)=>et.pattern(e.pattern,t)?null:Qe(e,e.errorMessage||i.pattern.mismatch),format(e,t,i){var a=Object.keys(et),s=Ke[e.format]?Ke[e.format]:e.format||e.arrayType;return a.indexOf(s)>-1&&!et[s](t)?Qe(e,e.errorMessage||i.typeError):null},arrayTypeFormat(e,t,i){if(!Array.isArray(t))return Qe(e,e.errorMessage||i.typeError);for(let a=0;a<t.length;a++){const s=t[a];let n=this.format(e,s,i);if(null!==n)return n}return null}};class at extends class{constructor(e){this._message=e}async validateRule(e,t,i,a,s){var n=null;let o=t.rules;if(o.findIndex((e=>e.required))<0){if(null==i)return n;if("string"==typeof i&&!i.length)return n}var r=this._message;if(void 0===o)return r.default;for(var l=0;l<o.length;l++){let c=o[l],d=this._getValidateType(c);if(Object.assign(c,{label:t.label||`["${e}"]`}),it[d]&&null!=(n=it[d](c,i,r)))break;if(c.validateExpr){let e=Date.now();if(!1===c.validateExpr(i,s,e)){n=this._getMessage(c,c.errorMessage||this._message.default);break}}if(c.validateFunction&&null!==(n=await this.validateFunction(c,i,a,s,d)))break}return null!==n&&(n=r.TAG+n),n}async validateFunction(e,t,i,a,s){let n=null;try{let o=null;const r=await e.validateFunction(e,t,a||i,(e=>{o=e}));(o||"string"==typeof r&&r||!1===r)&&(n=this._getMessage(e,o||r,s))}catch(o){n=this._getMessage(e,o.message,s)}return n}_getMessage(e,t,i){return Qe(e,t||e.errorMessage||this._message[i]||t.default)}_getValidateType(e){var t="";return e.required?t="required":e.format?t="format":e.arrayType?t="arrayTypeFormat":e.range?t="range":void 0!==e.maximum||void 0!==e.minimum?t="rangeNumber":void 0!==e.maxLength||void 0!==e.minLength?t="rangeLength":e.pattern?t="pattern":e.validateFunction&&(t="validateFunction"),t}}{constructor(e,t){super(at.message),this._schema=e,this._options=t||null}updateSchema(e){this._schema=e}async validate(e,t){let i=this._checkFieldInSchema(e);return i||(i=await this.invokeValidate(e,!1,t)),i.length?i[0]:null}async validateAll(e,t){let i=this._checkFieldInSchema(e);return i||(i=await this.invokeValidate(e,!0,t)),i}async validateUpdate(e,t){let i=this._checkFieldInSchema(e);return i||(i=await this.invokeValidateUpdate(e,!1,t)),i.length?i[0]:null}async invokeValidate(e,t,i){let a=[],s=this._schema;for(let n in s){let o=s[n],r=await this.validateRule(n,o,e[n],e,i);if(null!=r&&(a.push({key:n,errorMessage:r}),!t))break}return a}async invokeValidateUpdate(e,t,i){let a=[];for(let s in e){let n=await this.validateRule(s,this._schema[s],e[s],e,i);if(null!=n&&(a.push({key:s,errorMessage:n}),!t))break}return a}_checkFieldInSchema(e){var t=Object.keys(e),i=Object.keys(this._schema);if(new Set(t.concat(i)).size===i.length)return"";var a=t.filter((e=>i.indexOf(e)<0));return[{key:"invalid",errorMessage:Qe({field:JSON.stringify(a)},at.message.TAG+at.message.defaultInvalid)}]}}at.message=new function(){return{TAG:"",default:"验证错误",defaultInvalid:"提交的字段{field}在数据库中并不存在",validateFunction:"验证无效",required:"{label}必填",enum:"{label}超出范围",timestamp:"{label}格式无效",whitespace:"{label}不能为空",typeError:"{label}类型无效",date:{format:"{label}日期{value}格式无效",parse:"{label}日期无法解析,{value}无效",invalid:"{label}日期{value}无效"},length:{minLength:"{label}长度不能少于{minLength}",maxLength:"{label}长度不能超过{maxLength}",range:"{label}必须介于{minLength}和{maxLength}之间"},number:{minimum:"{label}不能小于{minimum}",maximum:"{label}不能大于{maximum}",exclusiveMinimum:"{label}不能小于等于{minimum}",exclusiveMaximum:"{label}不能大于等于{maximum}",range:"{label}必须介于{minimum}and{maximum}之间"},pattern:{mismatch:"{label}格式不匹配"}}};const st=xe({name:"uniForms",components:{},emits:["input","reset","validate","submit"],props:{value:{type:Object,default:()=>({})},modelValue:{type:Object,default:()=>({})},rules:{type:Object,default:()=>({})},validateTrigger:{type:String,default:""},labelPosition:{type:String,default:"left"},labelWidth:{type:[String,Number],default:""},labelAlign:{type:String,default:"left"},errShowType:{type:String,default:"undertext"},border:{type:Boolean,default:!1}},data:()=>({formData:{}}),computed:{dataValue(){return"{}"===JSON.stringify(this.modelValue)?this.value:this.modelValue}},watch:{rules(e){this.init(e)},labelPosition(){this.childrens.forEach((e=>{e.init()}))}},created(){G().$vm.$.appContext.config.globalProperties.binddata||(G().$vm.$.appContext.config.globalProperties.binddata=function(e,t,i){if(i)this.$refs[i].setValue(e,t);else{let i;for(let e in this.$refs){const t=this.$refs[e];if(t&&t.$options&&"uniForms"===t.$options.name){i=t;break}}if(!i)return console.error("当前 uni-froms 组件缺少 ref 属性");i.setValue(e,t)}}),this.unwatchs=[],this.childrens=[],this.inputChildrens=[],this.checkboxChildrens=[],this.formRules=[],this.init(this.rules)},methods:{init(e){0!==Object.keys(e).length?(this.formRules=e,this.validator=new at(e),this.registerWatch()):this.formData=this.dataValue},registerWatch(){this.unwatchs.forEach((e=>e())),this.childrens.forEach((e=>{e.init()})),Object.keys(this.dataValue).forEach((e=>{let t=this.$watch("dataValue."+e,(t=>{if(t)if("[object Object]"===t.toString())for(let i in t){let a=`${e}[${i}]`;this.formData[a]=this._getValue(a,t[i])}else this.formData[e]=this._getValue(e,t)}),{deep:!0,immediate:!0});this.unwatchs.push(t)}))},setRules(e){this.init(e)},setValue(e,t,i){let a=this.childrens.find((t=>t.name===e));return a?(t=this._getValue(a.name,t),this.formData[e]=t,a.val=t,a.triggerCheck(t,i)):null},resetForm(e){this.childrens.forEach((e=>{e.errMsg="";const t=this.inputChildrens.find((t=>t.rename===e.name));t&&(t.errMsg="",t.is_reset=!0,t.$emit("input",t.multiple?[]:""),t.$emit("update:modelValue",t.multiple?[]:""))})),this.childrens.forEach((e=>{e.name&&(this.formData[e.name]=this._getValue(e.name,""))})),this.$emit("reset",e)},validateCheck(e){null===e&&(e=null),this.$emit("validate",e)},async validateAll(e,t,i,a){let s,n=[];for(let l in e){const e=this.childrens.find((e=>e.name===l));e&&n.push(e)}a||"function"!=typeof i||(a=i),!a&&"function"!=typeof a&&Promise&&(s=new Promise(((e,t)=>{a=function(i,a){i?t(i):e(a)}})));let o=[],r={};if(this.validator)for(let l in n){const t=n[l];let i=t.isArray?t.arrayField:t.name;if(t.isArray){if(-1!==t.name.indexOf("[")&&-1!==t.name.indexOf("]")){const a=t.name.split("["),s=a[0],n=a[1].replace("]","");r[s]||(r[s]={}),r[s][n]=this._getValue(i,e[i])}}else r[i]=this._getValue(i,e[i]);const a=await t.triggerCheck(e[i],!0);if(a&&(o.push(a),"toast"===this.errShowType||"modal"===this.errShowType))break}else r=e;return Array.isArray(o)&&0===o.length&&(o=null),Array.isArray(i)&&i.forEach((e=>{r[e]=this.dataValue[e]})),"submit"===t?this.$emit("submit",{detail:{value:r,errors:o}}):this.$emit("validate",o),a&&"function"==typeof a&&a(o,r),s&&a?s:null},submitForm(){},submit(e,t,i){for(let a in this.dataValue){this.childrens.find((e=>e.name===a))&&void 0===this.formData[a]&&(this.formData[a]=this._getValue(a,this.dataValue[a]))}return i||console.warn("submit 方法即将废弃，请使用validate方法代替！"),this.validateAll(this.formData,"submit",e,t)},validate(e,t){return this.submit(e,t,!0)},validateField(e,t){e=[].concat(e);let i={};return this.childrens.forEach((t=>{-1!==e.indexOf(t.name)&&(i=Object.assign({},i,{[t.name]:this.formData[t.name]}))})),this.validateAll(i,"submit",[],t)},resetFields(){this.resetForm()},clearValidate(e){e=[].concat(e),this.childrens.forEach((t=>{const i=this.inputChildrens.find((e=>e.rename===t.name));(0===e.length||-1!==e.indexOf(t.name))&&(t.errMsg="",i&&(i.errMsg=""))}))},_getValue(e,t){const i=this.formRules[e]&&this.formRules[e].rules||[],a=i.find((e=>e.format&&this.type_filter(e.format))),s=i.find((e=>e.format&&"boolean"===e.format||"bool"===e.format));return a&&(t=isNaN(t)?t:""===t||null===t?null:Number(t)),s&&(t=!!t),t},type_filter:e=>"int"===e||"double"===e||"number"===e||"timestamp"===e}},[["render",function(i,s,n,o,r,l){const h=J,f=m;return e(),t(f,{class:a(["uni-forms",{"uni-forms--top":!n.border}])},{default:c((()=>[d(h,{onSubmit:y(l.submitForm,["stop"]),onReset:l.resetForm},{default:c((()=>[u(i.$slots,"default",{},void 0,!0)])),_:3},8,["onSubmit","onReset"])])),_:3},8,["class"])}],["__scopeId","data-v-c8dcab61"]]),nt={rules:[{required:!0,errorMessage:"请输入手机号"},{validateFunction:function(e,t,i,a){return Z.mobile(t)||a("手机号码格式不正确"),!0}}]},ot={rules:[{required:!0,errorMessage:"请输入密码"},{validateFunction:function(e,t,i,a){return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]+\S{5,12}$/.test(t)||a("需包含字母和数字,长度在6-12之间"),!0}}]},rt={rules:[{required:!0,errorMessage:"请输入验证码"}]},lt=xe({__name:"account-login",props:{agreeStatus:{type:[Boolean,null],default:null}},emits:["onConfirm"],setup(i,{emit:a}){const s=K(null),n=a,o=i,u=b({model:{mobile:"",password:""},rules:{mobile:nt,password:ot}});async function f(){if(!(await w(s).validate().catch((e=>{console.log("error: ",e)}))))return;if(!0!==o.agreeStatus)return n("onConfirm",!0),void(!1===o.agreeStatus?k.$helper.toast("您已拒绝协议，无法继续登录"):k.$helper.toast("请选择是否同意协议"));const{code:e,data:t}=await ee.login(u.model);0===e&&te()}return(i,a)=>{const n=m,o=T,p=r(l("uni-easyinput"),Xe),g=r(l("uni-forms-item"),Je),b=r(l("uni-forms"),st);return e(),t(n,null,{default:c((()=>[d(n,{class:"head-box ss-m-b-60 ss-flex-col"},{default:c((()=>[d(n,{class:"ss-flex ss-m-b-20"},{default:c((()=>[d(n,{class:"head-title-active head-title-line",onClick:a[0]||(a[0]=e=>w(Q)("smsLogin"))},{default:c((()=>[h(" 短信登录 ")])),_:1}),d(n,{class:"head-title ss-m-r-40 head-title-animation"},{default:c((()=>[h("账号登录")])),_:1})])),_:1}),d(n,{class:"head-subtitle"},{default:c((()=>[h("如果未设置过密码，请点击忘记密码")])),_:1})])),_:1}),d(b,{ref_key:"accountLoginRef",ref:s,modelValue:u.model,"onUpdate:modelValue":a[4]||(a[4]=e=>u.model=e),rules:u.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center"},{default:c((()=>[d(g,{name:"mobile",label:"账号"},{default:c((()=>[d(p,{placeholder:"请输入账号",modelValue:u.model.mobile,"onUpdate:modelValue":a[2]||(a[2]=e=>u.model.mobile=e),inputBorder:!1},{right:c((()=>[d(o,{class:"ss-reset-button forgot-btn",onClick:a[1]||(a[1]=e=>w(Q)("resetPassword"))},{default:c((()=>[h(" 忘记密码 ")])),_:1})])),_:1},8,["modelValue"])])),_:1}),d(g,{name:"password",label:"密码"},{default:c((()=>[d(p,{type:"password",placeholder:"请输入密码",modelValue:u.model.password,"onUpdate:modelValue":a[3]||(a[3]=e=>u.model.password=e),inputBorder:!1},{right:c((()=>[d(o,{class:"ss-reset-button login-btn-start",onClick:f},{default:c((()=>[h("登录")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})}}},[["__scopeId","data-v-866167fb"]]),ct=xe({__name:"sms-login",props:{agreeStatus:{type:[Boolean,null],default:null}},emits:["onConfirm"],setup(i,{emit:s}){const n=K(null),o=s,u=i,p=b({isMobileEnd:!1,codeText:"获取验证码",model:{mobile:"",code:""},rules:{code:rt,mobile:nt}});function g(){if(!0!==u.agreeStatus)return o("onConfirm",!0),void(!1===u.agreeStatus?k.$helper.toast("您已拒绝协议，无法发送验证码"):k.$helper.toast("请选择是否同意协议"));ae("smsLogin",p.model.mobile)}async function y(){if(!(await w(n).validate().catch((e=>{console.log("error: ",e)}))))return;if(!0!==u.agreeStatus)return o("onConfirm",!0),void(!1===u.agreeStatus?k.$helper.toast("您已拒绝协议，无法继续登录"):k.$helper.toast("请选择是否同意协议"));const{code:e}=await ee.smsLogin(p.model);0===e&&te()}return(i,s)=>{const o=m,b=T,_=r(l("uni-easyinput"),Xe),v=r(l("uni-forms-item"),Je),x=r(l("uni-forms"),st);return e(),t(o,null,{default:c((()=>[d(o,{class:"head-box ss-m-b-60"},{default:c((()=>[d(o,{class:"ss-flex ss-m-b-20"},{default:c((()=>[d(o,{class:"head-title head-title-line head-title-animation"},{default:c((()=>[h("短信登录")])),_:1}),d(o,{class:"head-title-active ss-m-r-40",onClick:s[0]||(s[0]=e=>w(Q)("accountLogin"))},{default:c((()=>[h(" 账号登录 ")])),_:1})])),_:1}),d(o,{class:"head-subtitle"},{default:c((()=>[h("未注册的手机号，验证后自动注册账号")])),_:1})])),_:1}),d(x,{ref_key:"smsLoginRef",ref:n,modelValue:p.model,"onUpdate:modelValue":s[3]||(s[3]=e=>p.model=e),rules:p.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center"},{default:c((()=>[d(v,{name:"mobile",label:"手机号"},{default:c((()=>[d(_,{placeholder:"请输入手机号",modelValue:p.model.mobile,"onUpdate:modelValue":s[1]||(s[1]=e=>p.model.mobile=e),inputBorder:!1,type:"number"},{right:c((()=>[d(b,{class:a(["ss-reset-button code-btn code-btn-start",{"code-btn-end":p.isMobileEnd||!1===u.agreeStatus}]),disabled:p.isMobileEnd||!1===u.agreeStatus,onClick:g},{default:c((()=>[h(f(w(ie)("smsLogin")),1)])),_:1},8,["disabled","class"])])),_:1},8,["modelValue"])])),_:1}),d(v,{name:"code",label:"验证码"},{default:c((()=>[d(_,{placeholder:"请输入验证码",modelValue:p.model.code,"onUpdate:modelValue":s[2]||(s[2]=e=>p.model.code=e),inputBorder:!1,type:"number",maxlength:"4"},{right:c((()=>[d(b,{class:"ss-reset-button login-btn-start",onClick:y},{default:c((()=>[h(" 登录 ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})}}},[["__scopeId","data-v-4d3f53a5"]]),dt=xe({__name:"reset-password",setup(i){const s=K(null),n=F((()=>k.$store("user").isLogin)),o=b({isMobileEnd:!1,model:{mobile:"",code:"",password:""},rules:{code:rt,mobile:nt,password:ot}}),u=async()=>{if(!(await w(s).validate().catch((e=>{console.log("error: ",e)}))))return;const{code:e}=await se.resetUserPassword(o.model);0===e&&Q("accountLogin")};return(i,g)=>{const b=m,y=T,_=r(l("uni-easyinput"),Xe),v=r(l("uni-forms-item"),Je),x=r(l("uni-forms"),st);return e(),t(b,null,{default:c((()=>[d(b,{class:"head-box ss-m-b-60"},{default:c((()=>[d(b,{class:"head-title ss-m-b-20"},{default:c((()=>[h("重置密码")])),_:1}),d(b,{class:"head-subtitle"},{default:c((()=>[h("为了您的账号安全，设置密码前请先进行安全验证")])),_:1})])),_:1}),d(x,{ref_key:"resetPasswordRef",ref:s,modelValue:o.model,"onUpdate:modelValue":g[4]||(g[4]=e=>o.model=e),rules:o.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center"},{default:c((()=>[d(v,{name:"mobile",label:"手机号"},{default:c((()=>[d(_,{placeholder:"请输入手机号",modelValue:o.model.mobile,"onUpdate:modelValue":g[1]||(g[1]=e=>o.model.mobile=e),type:"number",inputBorder:!1},{right:c((()=>[d(y,{class:a(["ss-reset-button code-btn code-btn-start",{"code-btn-end":o.isMobileEnd}]),disabled:o.isMobileEnd,onClick:g[0]||(g[0]=e=>w(ae)("resetPassword",o.model.mobile))},{default:c((()=>[h(f(w(ie)("resetPassword")),1)])),_:1},8,["disabled","class"])])),_:1},8,["modelValue"])])),_:1}),d(v,{name:"code",label:"验证码"},{default:c((()=>[d(_,{placeholder:"请输入验证码",modelValue:o.model.code,"onUpdate:modelValue":g[2]||(g[2]=e=>o.model.code=e),type:"number",maxlength:"4",inputBorder:!1},null,8,["modelValue"])])),_:1}),d(v,{name:"password",label:"密码"},{default:c((()=>[d(_,{type:"password",placeholder:"请输入密码",modelValue:o.model.password,"onUpdate:modelValue":g[3]||(g[3]=e=>o.model.password=e),inputBorder:!1},{right:c((()=>[d(y,{class:"ss-reset-button login-btn-start",onClick:u},{default:c((()=>[h(" 确认 ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","rules"]),n.value?p("",!0):(e(),t(y,{key:0,class:"ss-reset-button type-btn",onClick:g[5]||(g[5]=e=>w(Q)("accountLogin"))},{default:c((()=>[h(" 返回登录 ")])),_:1}))])),_:1})}}},[["__scopeId","data-v-baa3e57b"]]),ut=xe({__name:"change-mobile",setup(i){const s=K(null),n=F((()=>k.$store("user").userInfo)),o=b({isMobileEnd:!1,model:{mobile:"",code:""},rules:{code:rt,mobile:nt}});async function u(){if(!(await w(s).validate().catch((e=>{console.log("error: ",e)}))))return;const{code:e}=await se.updateUserMobile(o.model);0===e&&(k.$store("user").getInfo(),te())}async function g(e){if("getPhoneNumber:ok"!==e.detail.errMsg)return;await k.$platform.useProvider().bindUserPhoneNumber(e.detail)&&(k.$store("user").getInfo(),te())}return(i,b)=>{const y=m,_=T,v=r(l("uni-easyinput"),Xe),x=r(l("uni-forms-item"),Je),S=r(l("uni-forms"),st);return e(),t(y,null,{default:c((()=>[d(y,{class:"head-box ss-m-b-60"},{default:c((()=>[d(y,{class:"head-title ss-m-b-20"},{default:c((()=>[h(f(n.value.mobile?"更换手机号":"绑定手机号"),1)])),_:1}),d(y,{class:"head-subtitle"},{default:c((()=>[h("为了您的账号安全，请使用本人手机号码")])),_:1})])),_:1}),d(S,{ref_key:"changeMobileRef",ref:s,modelValue:o.model,"onUpdate:modelValue":b[3]||(b[3]=e=>o.model=e),rules:o.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center"},{default:c((()=>[d(x,{name:"mobile",label:"手机号"},{default:c((()=>[d(v,{placeholder:"请输入手机号",modelValue:o.model.mobile,"onUpdate:modelValue":b[1]||(b[1]=e=>o.model.mobile=e),inputBorder:!1,type:"number"},{right:c((()=>[d(_,{class:a(["ss-reset-button code-btn-start",{"code-btn-end":o.isMobileEnd}]),disabled:o.isMobileEnd,onClick:b[0]||(b[0]=e=>w(ae)("changeMobile",o.model.mobile))},{default:c((()=>[h(f(w(ie)("changeMobile")),1)])),_:1},8,["disabled","class"])])),_:1},8,["modelValue"])])),_:1}),d(x,{name:"code",label:"验证码"},{default:c((()=>[d(v,{placeholder:"请输入验证码",modelValue:o.model.code,"onUpdate:modelValue":b[2]||(b[2]=e=>o.model.code=e),inputBorder:!1,type:"number",maxlength:"4"},{right:c((()=>[d(_,{class:"ss-reset-button login-btn-start",onClick:u},{default:c((()=>[h(" 确认 ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","rules"]),"WechatMiniProgram"===w(k).$platform.name?(e(),t(_,{key:0,class:"ss-reset-button type-btn","open-type":"getPhoneNumber",onGetphonenumber:g},{default:c((()=>[h(" 手机号快捷登录 ")])),_:1})):p("",!0)])),_:1})}}},[["__scopeId","data-v-57184155"]]),ht=xe({__name:"change-password",setup(i){const s=K(null),n=b({model:{mobile:"",code:"",password:""},rules:{code:rt,password:ot}});async function o(){if(!(await w(s).validate().catch((e=>{console.log("error: ",e)}))))return;const{code:e}=await se.updateUserPassword(n.model);0===e&&te()}return(i,u)=>{const p=m,g=T,b=r(l("uni-easyinput"),Xe),y=r(l("uni-forms-item"),Je),_=r(l("uni-forms"),st);return e(),t(p,null,{default:c((()=>[d(p,{class:"head-box ss-m-b-60"},{default:c((()=>[d(p,{class:"head-title ss-m-b-20"},{default:c((()=>[h("修改密码")])),_:1}),d(p,{class:"head-subtitle"},{default:c((()=>[h("如密码丢失或未设置,请点击忘记密码重新设置")])),_:1})])),_:1}),d(_,{ref_key:"changePasswordRef",ref:s,modelValue:n.model,"onUpdate:modelValue":u[3]||(u[3]=e=>n.model=e),rules:n.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center"},{default:c((()=>[d(y,{name:"code",label:"验证码"},{default:c((()=>[d(b,{placeholder:"请输入验证码",modelValue:n.model.code,"onUpdate:modelValue":u[1]||(u[1]=e=>n.model.code=e),type:"number",maxlength:"4",inputBorder:!1},{right:c((()=>[d(g,{class:a(["ss-reset-button code-btn code-btn-start",{"code-btn-end":n.isMobileEnd}]),disabled:n.isMobileEnd,onClick:u[0]||(u[0]=e=>w(ae)("changePassword"))},{default:c((()=>[h(f(w(ie)("resetPassword")),1)])),_:1},8,["disabled","class"])])),_:1},8,["modelValue"])])),_:1}),d(y,{name:"reNewPassword",label:"密码"},{default:c((()=>[d(b,{type:"password",placeholder:"请输入密码",modelValue:n.model.password,"onUpdate:modelValue":u[2]||(u[2]=e=>n.model.password=e),inputBorder:!1},{right:c((()=>[d(g,{class:"ss-reset-button login-btn-start",onClick:o},{default:c((()=>[h(" 确认 ")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","rules"]),d(g,{class:"ss-reset-button type-btn",onClick:w(te)},{default:c((()=>[h(" 取消修改 ")])),_:1},8,["onClick"])])),_:1})}}},[["__scopeId","data-v-eaba551f"]]),ft=xe({__name:"mp-authorization",props:{agreeStatus:{type:Boolean,default:!1}},setup(i){const a=F((()=>k.$store("user").userInfo)),n=K(null),o=b({model:{nickname:a.value.nickname,avatar:a.value.avatar},rules:{},disabledStyle:{color:"#999",disableColor:"#fff"}});function u(e){!async function(e){if(!e)return;let{data:t}=await ne.uploadFile(e);o.model.avatar=t}(e.detail.avatarUrl||"")}async function f(){const{model:e}=o,{nickname:t,avatar:i}=e;if(!t)return void k.$helper.toast("请输入昵称");if(!i)return void k.$helper.toast("请选择头像");const{code:a}=await se.updateUser({avatar:o.model.avatar,nickname:o.model.nickname});0===a&&(k.$helper.toast("授权成功"),await k.$store("user").getInfo(),te())}return(i,a)=>{const p=m,g=H,b=s,y=T,_=r(l("uni-forms-item"),Je),v=r(l("uni-easyinput"),Xe),x=r(l("uni-forms"),st);return e(),t(p,null,{default:c((()=>[d(p,{class:"head-box ss-m-b-60 ss-flex-col"},{default:c((()=>[d(p,{class:"ss-flex ss-m-b-20"},{default:c((()=>[d(p,{class:"head-title ss-m-r-40 head-title-animation"},{default:c((()=>[h("授权信息")])),_:1})])),_:1}),d(p,{class:"head-subtitle"},{default:c((()=>[h("完善您的头像、昵称、手机号")])),_:1})])),_:1}),d(x,{ref_key:"accountLoginRef",ref:n,modelValue:o.model,"onUpdate:modelValue":a[2]||(a[2]=e=>o.model=e),rules:o.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center"},{default:c((()=>[d(_,{name:"avatar",label:"头像"},{default:c((()=>[d(y,{class:"ss-reset-button avatar-btn","open-type":"chooseAvatar",onChooseavatar:u},{default:c((()=>[d(g,{class:"avatar-img",src:w(k).$url.cdn(o.model.avatar),mode:"aspectFill",onClick:a[0]||(a[0]=e=>w(k).$router.go("/pages/user/info"))},null,8,["src"]),d(b,{class:"cicon-forward"})])),_:1})])),_:1}),d(_,{name:"nickname",label:"昵称"},{default:c((()=>[d(v,{type:"nickname",placeholder:"请输入昵称",modelValue:o.model.nickname,"onUpdate:modelValue":a[1]||(a[1]=e=>o.model.nickname=e),inputBorder:!1},null,8,["modelValue"])])),_:1}),d(p,{class:"foot-box"},{default:c((()=>[d(y,{class:"ss-reset-button authorization-btn",onClick:f},{default:c((()=>[h(" 确认授权 ")])),_:1})])),_:1})])),_:1},8,["modelValue","rules"])])),_:1})}}},[["__scopeId","data-v-ab63a522"]]),pt=xe({__name:"s-auth-modal",setup(i){const s=k.$store("modal"),n=F((()=>s.auth)),o=b({protocol:null}),u=K(!1);function f(){o.protocol=!0}function g(){o.protocol=!1}function _(e){te(),k.$router.go("/pages/public/richtext",{title:e})}function v(e){u.value=e,setTimeout((()=>{u.value=!1}),1e3)}const x=async e=>{if(!0!==o.protocol)return u.value=!0,setTimeout((()=>{u.value=!1}),1e3),void(!1===o.protocol?k.$helper.toast("您已拒绝协议，无法继续登录"):k.$helper.toast("请选择是否同意协议"));if(await k.$platform.useProvider(e).login()){const e=await k.$store("user").getInfo();if(te(),e.avatar&&e.nickname)return}},S=async e=>{if("getPhoneNumber:ok"!==e.detail.errMsg)return void k.$helper.toast("快捷登录失败");await k.$platform.useProvider().mobileLogin(e.detail)&&te()};return(i,s)=>{const b=m,C=T,I=H,$=oe,B=re,z=r(l("su-popup"),Oe);return e(),t(z,{show:""!==n.value,round:"10",showClose:!0,onClose:w(te)},{default:c((()=>[d(b,{class:"login-wrap"},{default:c((()=>["accountLogin"===n.value?(e(),t(lt,{key:0,agreeStatus:o.protocol,onOnConfirm:v},null,8,["agreeStatus"])):p("",!0),"smsLogin"===n.value?(e(),t(ct,{key:1,agreeStatus:o.protocol,onOnConfirm:v},null,8,["agreeStatus"])):p("",!0),"resetPassword"===n.value?(e(),t(dt,{key:2})):p("",!0),"changeMobile"===n.value?(e(),t(ut,{key:3})):p("",!0),"changePassword"===n.value?(e(),t(ht,{key:4})):p("",!0),"mpAuthorization"===n.value?(e(),t(ft,{key:5})):p("",!0),["accountLogin","smsLogin"].includes(n.value)?(e(),t(b,{key:6,class:"auto-login-box ss-flex ss-flex-col ss-row-center ss-col-center"},{default:c((()=>["WechatMiniProgram"===w(k).$platform.name?(e(),t(b,{key:0,class:"ss-flex register-box"},{default:c((()=>[d(b,{class:"register-title"},{default:c((()=>[h("还没有账号?")])),_:1}),d(C,{class:"ss-reset-button login-btn","open-type":"getPhoneNumber",onGetphonenumber:S},{default:c((()=>[h(" 快捷登录 ")])),_:1}),d(b,{class:"circle"})])),_:1})):p("",!0),["WechatOfficialAccount","WechatMiniProgram","App"].includes(w(k).$platform.name)&&w(k).$platform.isWechatInstalled?(e(),t(C,{key:1,onClick:s[0]||(s[0]=e=>x("wechat")),class:"ss-reset-button auto-login-btn"},{default:c((()=>[d(I,{class:"auto-login-img",src:w(k).$url.static("/static/img/shop/platform/wechat.png")},null,8,["src"])])),_:1})):p("",!0),"ios"===w(k).$platform.os&&"App"===w(k).$platform.name?(e(),t(C,{key:2,onClick:s[1]||(s[1]=e=>x("apple")),class:"ss-reset-button auto-login-btn"},{default:c((()=>[d(I,{class:"auto-login-img",src:w(k).$url.static("/static/img/shop/platform/apple.png")},null,8,["src"])])),_:1})):p("",!0)])),_:1})):p("",!0),["accountLogin","smsLogin"].includes(n.value)?(e(),t(b,{key:7,class:a(["agreement-box ss-flex ss-flex-col ss-col-center",{shake:u.value}])},{default:c((()=>[d(b,{class:"agreement-title ss-m-b-20"},{default:c((()=>[h("请选择是否同意以下协议(请联网查看)：")])),_:1}),d(b,{class:"agreement-options-container"},{default:c((()=>[d(b,{class:"agreement-option ss-m-b-20"},{default:c((()=>[d(B,{class:"radio ss-flex ss-col-center",onClick:f},{default:c((()=>[d($,{checked:!0===o.protocol,color:"var(--ui-BG-Main)",style:{transform:"scale(0.8)"},onClick:y(f,["stop"])},null,8,["checked"]),d(b,{class:"agreement-text ss-flex ss-col-center ss-m-l-8"},{default:c((()=>[h(" 我已阅读并同意遵守 "),d(b,{class:"tcp-text",onClick:s[2]||(s[2]=y((e=>_("用户协议")),["stop"]))},{default:c((()=>[h(" 《用户协议》 ")])),_:1}),d(b,{class:"agreement-text"},{default:c((()=>[h("与")])),_:1}),d(b,{class:"tcp-text",onClick:s[3]||(s[3]=y((e=>_("隐私协议")),["stop"]))},{default:c((()=>[h(" 《隐私协议》 ")])),_:1})])),_:1})])),_:1})])),_:1}),d(b,{class:"agreement-option"},{default:c((()=>[d(B,{class:"radio ss-flex ss-col-center",onClick:g},{default:c((()=>[d($,{checked:!1===o.protocol,color:"#ff4d4f",style:{transform:"scale(0.8)"},onClick:y(g,["stop"])},null,8,["checked"]),d(b,{class:"agreement-text ss-flex ss-col-center ss-m-l-8"},{default:c((()=>[h(" 我拒绝遵守 "),d(b,{class:"tcp-text",onClick:s[4]||(s[4]=y((e=>_("用户协议")),["stop"]))},{default:c((()=>[h(" 《用户协议》 ")])),_:1}),d(b,{class:"agreement-text"},{default:c((()=>[h("与")])),_:1}),d(b,{class:"tcp-text",onClick:s[5]||(s[5]=y((e=>_("隐私协议")),["stop"]))},{default:c((()=>[h(" 《隐私协议》 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])):p("",!0),d(b,{class:"safe-box"})])),_:1})])),_:1},8,["show","onClose"])}}},[["__scopeId","data-v-0518bd54"]]);const mt={props:{board:Object,pathType:String,fileType:{type:String,default:"png"},hidden:Boolean,quality:{type:Number,default:1},css:[String,Object],width:[Number,String],height:[Number,String],pixelRatio:Number,customStyle:String,isCanvasToTempFilePath:Boolean,sleep:{type:Number,default:1e3/30},beforeDelay:{type:Number,default:100},afterDelay:{type:Number,default:100},performance:Boolean,useCORS:Boolean,hidpi:{type:Boolean,default:!0}}},gt=e=>/^data:image\/(\w+);base64/.test(e);function bt(e){return new Promise((t=>setTimeout(t,e)))}let{platform:yt,SDKVersion:_t}=le();const vt=/windows|mac/.test(yt);let xt={};function wt(e,t,i=!1){if("number"==typeof e)return e;if(function(e){return/^-?\d+(\.\d+)?$/.test(e)}(e))return 1*e;if("string"==typeof e){const a=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|px|%)$/g.exec(e);if(!e||!a)return 0;const s=a[3];e=parseFloat(e);let n=0;return"rpx"===s?n=ce(e):"px"===s?n=1*e:"%"===s?n=e*wt(t)/100:"em"===s&&(n=e*wt(t||14)),i?1*n.toFixed(2):Math.round(n)}return 0}function kt(e){return/^data:/.test(e)?e:new Promise(((t,i)=>{let a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.onload=function(){let e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(a,0,0);let i=e.toDataURL("image/png");t(i),e.height=e.width=0},a.src=e+"?v="+Math.random(),a.onerror=e=>{i(e)}}))}function St(e,t){const i=this&&this.canvas&&this.canvas.createImage;return new Promise((async(a,s)=>{let n=e.replace(/^@\//,"/");if(xt[e]&&xt[e].errMsg)a(xt[e]);else{try{t&&(n=await kt(e))}catch(o){s({...o,src:n})}if(i&&!vt){const t=this.canvas.createImage();return t.onload=function(){const i={path:t,width:t.width,height:t.height};xt[e]=i,a(xt[e])},t.onerror=function(t){s({err:t,path:e})},void(t.src=n)}de({src:n,success:t=>{if(i){const i=this.canvas.createImage();return i.onload=function(){t.path=i,xt[e]=t,a(xt[e])},i.onerror=function(t){s({err:t,path:e})},void(i.src=n)}xt[e]=t,a(xt[e])},fail(t){console.error({err:t,path:e}),s({err:t,path:e})}})}}))}var Ct=function(){return Ct=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Ct.apply(this,arguments)};function It(e,t,i,a){return new(i||(i=Promise))((function(s,n){function o(e){try{l(a.next(e))}catch(t){n(t)}}function r(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((a=a.apply(e,t||[])).next())}))}function $t(e,t){var i,a,s,n,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function r(n){return function(r){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,a&&(s=2&n[0]?a.return:n[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,n[1])).done)return s;switch(a=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,a=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(r){n=[6,r],a=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,r])}}}var Bt={MP_WEIXIN:"mp-weixin",MP_QQ:"mp-qq",MP_ALIPAY:"mp-alipay",MP_BAIDU:"mp-baidu",MP_TOUTIAO:"mp-toutiao",MP_DINGDING:"mp-dingding",H5:"h5",WEB:"web",PLUS:"plus"},Tt=["Top","Right","Bottom","Left"],zt="right",Mt="bottom",Pt=["contentSize","clientSize","borderSize","offsetSize"],Ft={TOP:"top",MIDDLE:"middle",BOTTOM:Mt},Wt={LEFT:"left",CENTER:"center",RIGHT:zt},At="view",Ot="text",Vt="image",Rt="qrcode",Lt="block",jt="absolute",Et="fixed",Nt={display:Lt,color:"#000000",lineHeight:"1.4em",fontSize:14,fontWeight:400,fontFamily:"sans-serif",lineCap:"butt",flexDirection:"row",flexWrap:"nowrap",textAlign:"left",alignItems:"flex-start",justifyContent:"flex-start",position:"static",transformOrigin:"".concat("center"," ").concat("center")},Ht={upx2px:function(e){return window.innerWidth/750*e},getSystemInfoSync:function(){return{screenWidth:window.innerWidth,screenHeight:window.innerHeight}},getImageInfo:function(e){var t=e.src,i=e.success,a=e.fail,s=new Image;s.onload=function(){i({width:s.naturalWidth,height:s.naturalHeight,path:s.src,src:t})},s.onerror=a,s.src=t}},Dt="object"==typeof window?"undefined"==typeof uni||"undefined"!=typeof uni&&!he?Bt.WEB:Bt.H5:"object"==typeof swan?Bt.MP_BAIDU:"object"==typeof tt?Bt.MP_TOUTIAO:"object"==typeof plus?Bt.PLUS:"object"==typeof wx?Bt.MP_WEIXIN:void 0,Ut=Dt==Bt.MP_WEIXIN?wx:"undefined"!=typeof uni?de?{upx2px:function(e){return ce(e)},getSystemInfoSync:function(){return le()},getImageInfo:function(e){return de(e)},downloadFile:function(e){return ue(e)}}:Object.assign(uni,Ht):"undefined"!=typeof window?Ht:uni;if(!Ut.upx2px){var qt=((Ut.getSystemInfoSync&&Ut.getSystemInfoSync()).screenWidth||375)/750;Ut.upx2px=function(e){return qt*e}}function Yt(e){return/^-?\d+(\.\d+)?$/.test(e)}function Xt(e,t,i){if(Yt(e))return 1*e;if("string"==typeof e){var a=/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(em|rpx|vw|vh|px|%)$/g.exec(e);if(!e||!a)return 0;var s=a[3];e=parseFloat(e);var n=0;if("rpx"===s)n=Ut.upx2px(e);else if("px"===s)n=1*e;else if("%"===s&&t)n=e*Xt(t)/100;else if("em"===s&&t)n=e*Xt(t||14);else if(["vw","vh"].includes(s)){var o=Ut.getSystemInfoSync(),r=o.screenWidth,l=o.screenHeight;n=e*("vw"==s?r:l)/100}return 1*n.toFixed(2)}return 0}function Gt(e){return/%$/.test(e)}function Jt(e){return/^-?([0-9]+)?([.]{1}[0-9]+){0,1}(rpx|px)$/.test(e)}function Zt(e){for(var t=[],i=[],a=0,s=e.substring(0,e.length-1).split("%,");a<s.length;a++){var n=s[a];t.push(n.substring(0,n.lastIndexOf(" ")).trim()),i.push(n.substring(n.lastIndexOf(" "),n.length)/100)}return{colors:t,percents:i}}function Kt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Qt.apply(this,arguments)}function ei(e,t){return(ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ii(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ti(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ti(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ai(e){return"number"==typeof e}function si(e){return"auto"===e||null===e}function ni(e){return/%$/.test(e)}var oi=Vt,ri=Ot,li=Rt,ci=jt,di=Et;function ui(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))}function hi(e){e=e.trim();for(var t=new Array,i="+",a="",s=e.length,n=0;n<s;++n){if("."===e[n]||!isNaN(Number(e[n]))&&" "!==e[n])a+=e[n];else if("("===e[n]){for(var o=1,r=n;o>0;)"("===e[r+=1]&&(o+=1),")"===e[r]&&(o-=1);a="".concat(hi(e.slice(n+1,r))),n=r}if(isNaN(Number(e[n]))&&"."!==e[n]||n===s-1){var l=parseFloat(a);switch(i){case"+":t.push(l);break;case"-":t.push(-l);break;case"*":t.push(t.pop()*l);break;case"/":t.push(t.pop()/l)}i=e[n],a=""}}for(var c=0;t.length;)c+=t.pop();return c}var fi,pi=0,mi=function(){function e(){Kt(this,"elements",[]),Kt(this,"afterElements",[]),Kt(this,"beforeElements",[]),Kt(this,"ids",[]),Kt(this,"width",0),Kt(this,"height",0),Kt(this,"top",0),Kt(this,"left",0),Kt(this,"pre",null),Kt(this,"offsetX",0),Kt(this,"offsetY",0),pi++,this.id=pi}var t=e.prototype;return t.fixedBind=function(e,t){void 0===t&&(t=0),this.container=t?e.parent:e.root,this.container.fixedLine=this,this.fixedAdd(e)},t.fixedAdd=function(e){if(!this.ids.includes(e.id)){this.ids.push(e.id),this.elements.push(e);var t=e.computedStyle.zIndex;(void 0===t?0:t)>=0?this.afterElements.push(e):this.beforeElements.push(e),this.refreshLayout()}},t.bind=function(e){this.container=e.parent,this.container.line=null,this.container.lines?(this.container.lines.push(this),this.pre=this.getPreLine(),this.top=this.pre.top+this.pre.height,this.left=this.container.contentSize.left):(this.top=this.container.contentSize.top,this.left=this.container.contentSize.left,this.container.lines=[this]),this.isInline=e.isInline(),this.container.line=this,this.outerWidth=e.parent&&e.parent.contentSize.width?e.parent.contentSize.width:1/0,this.add(e)},t.getPreLine=function(){return this.container.lines[this.container.lines.length-2]},t.canIEnter=function(e){return!((100*e.offsetSize.width+100*this.width)/100>this.outerWidth&&(this.closeLine(),1))},t.closeLine=function(){delete this.container.line},t.add=function(e){this.ids.includes(e.id)||(this.ids.push(e.id),this.elements.push(e),this.refreshWidthHeight(e))},t.refreshWidthHeight=function(e){e.offsetSize.height>this.height&&(this.height=e.offsetSize.height),this.width+=e.offsetSize.width||0,(this.container.lineMaxWidth||0)<this.width&&(this.container.lineMaxWidth=this.width)},t.refreshXAlign=function(){if(this.isInline){var e=this.container.contentSize.width-this.width,t=this.container.style.textAlign;"center"===t?e/=2:"left"===t&&(e=0),this.offsetX=e}},t.getOffsetY=function(e){if(!e||!e.style)return 0;var t=(e.style||{}).verticalAlign;return t===Mt?this.height-e.contentSize.height:"middle"===t?(this.height-e.contentSize.height)/2:0},t.setIndent=function(e){var t=e.style.textIndent;if(t&&/^calc/.test(t)){var i=/^calc\((.+)\)$/.exec(t);if(i&&i[1]){var a=hi(i[1].replace(/([^\s\(\+\-\*\/]+)\.(left|right|bottom|top|width|height)/g,(function(t){var i=t.split("."),a=i[0],s=i[1],n=e.parent.querySelector(a);if(n&&n.offsetSize){var o={right:n.offsetSize.left+n.offsetSize.width,bottom:n.offsetSize.top+n.offsetSize.height};return n.offsetSize[s]||o[s]||0}})).replace(new RegExp(/-?[0-9]+(\.[0-9]+)?(rpx|px|%)/,"g"),Xt));e.style.textIndent=a}}},t.layout=function(e,t){var i=this;this.refreshXAlign(),this.pre?(this.top=this.pre.top+this.pre.height+this.offsetY,this.left=t+this.offsetX):(this.top=Math.max(this.top,this.container.contentSize.top,e)+this.offsetY,this.left=Math.max(this.left,this.container.contentSize.left,t)+this.offsetX),this.elements.forEach((function(e,t){i.setIndent(e);var a=i.elements[t-1],s=i.getOffsetY(e);e.style.top=i.top+s,e.style.left=a?a.offsetSize.left+a.offsetSize.width:i.left,e.getBoxPosition()}))},t.refreshLayout=function(){this.afterElements=this.afterElements.sort((function(e,t){return e.computedStyle.zIndex-t.computedStyle.zIndex})),this.beforeElements=this.beforeElements.sort((function(e,t){return e.computedStyle.zIndex-t.computedStyle.zIndex}))},e}(),gi=((fi={}).row={width:"width",contentWidth:"width",lineMaxWidth:"lineMaxWidth",left:"left",top:"top",height:"height",lineMaxHeight:"lineMaxHeight",marginLeft:"marginLeft"},fi.column={width:"height",contentWidth:"height",lineMaxWidth:"lineMaxWidth",left:"top",top:"left",height:"width",lineMaxHeight:"lineMaxHeight",marginLeft:"marginTop"},fi),bi=function(e){var t,i;function a(){var t;return Kt(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t=e.call(this)||this),"outerWidth",0),t.exactValue=0,t.flexTotal=0,t.width=0,t.key=null,t.flexDirection="row",t}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,ei(t,i);var s=a.prototype;return s.bind=function(e){this.container=e.parent,this.container.line=this,this.container.lines?(this.container.lines.push(this),this.pre=this.getPreLine(),this.top=this.pre.top+this.pre.height,this.left=this.container.contentSize.left):(this.top=this.container.contentSize.top,this.left=this.container.contentSize.left,this.container.lines=[this]),e.parent&&(this.flexDirection=e.parent.style.flexDirection,this.key=gi[this.flexDirection]),this.initHeight(e),this.outerWidth=e.parent&&e.parent.contentSize[this.key.contentWidth]?e.parent.contentSize[this.key.contentWidth]:1/0,this.add(e)},s.add=function(e){this.ids.push(e.id);var t=e.style.flex;ai(t)?this.flexTotal+=t:ai(this.getWidth(e.style))&&(this.exactValue+=this.getWidth(e.offsetSize)),this.elements.push(e),this.refreshWidthHeight(e),e.next||this.closeLine()},s.closeLine=function(){this.calcFlex()},s.initHeight=function(e){this[this.key.height]=0},s.getWidth=function(e){return e[this.key.width]||0},s.getHeight=function(e){return e[this.key.height]||0},s.setWidth=function(e,t){e[this.key.width]=t},s.setHeight=function(e,t){e[this.key.height]=t},s.calcFlex=function(){var e=this,t=this.container.contentSize[this.key.contentWidth],i=0;this.elements.forEach((function(a){var s=a.style,n=a.contentSize,o=e.getWidth(s)||e.getWidth(n);ai(s.flex)&&(o=s.flex/e.flexTotal*(t-e.exactValue)),e.setWidth(a.computedStyle,o),a.isFlexCalc=!0,delete a.line,delete a.lines,delete a.lineMaxWidth,a.getBoxWidthHeight(),i=Math.max(i,e.getHeight(a.offsetSize))})),this.setHeight(this,i)},s.refreshWidthHeight=function(e){var t=this.container.style.alignItems;t&&!e.style.alignSelf&&(e.style.alignSelf=t);var i=this.getHeight(e.offsetSize);i>this[this.key.height]&&(this.container[this.key.lineMaxHeight]=this[this.key.height]=i),this[this.key.width]+=this.getWidth(e.offsetSize);var a=Math.min(this.getWidth(this),!this.getWidth(this.container.contentSize)&&1/0);(this.container[this.key.lineMaxWidth]||0)<a&&(this.container[this.key.lineMaxWidth]=a)},s.refreshXAlign=function(){var e,t,i=this,a=this.elements.reduce((function(e,t){return e+i.getWidth(t.offsetSize)}),0),s=(this.outerWidth==1/0?0:this.outerWidth-a)||0,n=this.container.style.justifyContent;"center"===n?s/=2:"flex-start"===n?s=0:["space-between","space-around"].includes(n)&&(e="space-between"==n,void 0===(t=s)&&(t=0),t/=i.elements.length+(e?-1:1),i.elements.forEach((function(a,s){var n;e&&!s||(a.style.margin?a.style.margin[i.key.marginLeft]+=t:a.style.margin=((n={})[i.key.marginLeft]=t,n),a.getBoxPosition())})),t=0,s=0),this.offsetX=s||0,this.refreshYAlign()},s.refreshYAlign=function(){var e=this;if(1==this.container.lines.length)return 0;var t=this.container.lines.reduce((function(t,i){return t+e.getHeight(i)}),0),i=this.container.style.alignItems,a=this.getHeight(this.container.contentSize);if("center"===i){var s=(a-t)/(this.container.lines.length+1);this.container.lines.forEach((function(e){e.offsetY=s}))}if("flex-end"===i){var n=a-t;this.container.lines[0].offsetY=n}},s.getOffsetY=function(e){if(this.container.lines.length>1)return 0;var t=e.style.alignSelf,i=this.getHeight(this.container.contentSize),a=i-this.getHeight(e.offsetSize);return"flex-end"===t?a:"center"===t?a/2:"stretch"===t?(a&&e.name==At&&(e.style[this.key.width]=this.getWidth(e.offsetSize),e.style[this.key.height]=i,delete e.line,delete e.lines,e.getBoxWidthHeight()),0):0},s.layout=function(e,t){var i=this;this.refreshXAlign(),this.pre?(this.top=this.pre.top+this.pre.height+this.offsetY,this.left=t+this.offsetX):(this.top=Math.max(this.top,this.container.contentSize.top,e)+this.offsetY,this.left=Math.max(this.left,this.container.contentSize.left,t)+this.offsetX),this.elements.forEach((function(e,t){i.setIndent(e);var a=i.elements[t-1],s=i.getOffsetY(e);e.style[i.key.top]=i[i.key.top]+s,e.style[i.key.left]=a?a.offsetSize[i.key.left]+i.getWidth(a.offsetSize):i[i.key.left],e.getBoxPosition()}))},a}(mi),yi=Ot,_i=At,vi=jt,xi=0,wi={left:null,top:null,width:null,height:null},ki=new Map,Si=function(){function e(e,t,i,a){var s=this;Kt(this,"id",xi++),Kt(this,"style",{left:null,top:null,width:null,height:null}),Kt(this,"computedStyle",{}),Kt(this,"originStyle",{}),Kt(this,"children",{}),Kt(this,"layoutBox",Qt({},wi)),Kt(this,"contentSize",Qt({},wi)),Kt(this,"clientSize",Qt({},wi)),Kt(this,"borderSize",Qt({},wi)),Kt(this,"offsetSize",Qt({},wi)),this.ctx=a,this.root=i,t&&(this.parent=t),this.name=e.type||e.name,this.attributes=this.getAttributes(e);var n=function(e,t){var i,a=["color","fontSize","lineHeight","verticalAlign","fontWeight","textAlign"],s=e.type,n=void 0===s?"view":s,o=e.styles,r=void 0===o?{}:o,l=(t||{}).computedStyle,c=Object.assign({},Nt);if([ri,oi,li].includes(n)&&!r.display&&(c.display="inline-block"),l)for(var d=0;d<a.length;d++){var u=a[d];(r[u]||l[u])&&(r[u]=r[(i=u,i.replace(/([A-Z])/g,"-$1").toLowerCase())]||r[u]||l[u])}for(var h=function(e){var t,i,a,s,o=r[e];if(/-/.test(e)&&(e=ui(e),c[e]=o),/^(box|text)?shadow$/i.test(e)){var l=[];return o.replace(/((-?\d+(rpx|px|vw|vh)?\s+?){3})(.+)/,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l=e[1].match(/-?\d+(rpx|px|vw|vh)?/g).map((function(e){return Xt(e)})).concat(e[4])})),/^text/.test(e)?c.textShadow=l:c.boxShadow=l,"continue"}if(/^border/i.test(e)&&!/radius$/i.test(e)){var d=e.match(/^border([BTRLa-z]+)?/)[0],u=e.match(/[W|S|C][a-z]+/),h=o.replace(/([\(,])\s+|\s+([\),])/g,"$1$2").split(" ").map((function(e){return/^\d/.test(e)?Xt(e,""):e}));return c[d]||(c[d]={}),1==h.length&&u?c[d][d+u[0]]=h[0]:c[d]=((t={})[d+"Width"]=Yt(h[0])?h[0]:0,t[d+"Style"]=h[1]||"solid",t[d+"Color"]=h[2]||"black",t),"continue"}if(/^background(color)?$/i.test(e))return c.backgroundColor=o,"continue";if(/^objectPosition$/i.test(e))return c[e]=o.split(" "),"continue";if(/^backgroundPosition$/i.test(e))return c[e]=o.split(" "),"continue";if(/padding|margin|radius/i.test(e)){var f=/radius$/i.test(e),p="borderRadius",m=f?p:e.match(/[a-z]+/)[0],g=function(e,t){return"border".concat(e).concat(t,"Radius")},b=[0,0,0,0].map((function(e,t){return f?[g(Tt[0],Tt[3]),g(Tt[0],Tt[1]),g(Tt[2],Tt[1]),g(Tt[2],Tt[3])][t]:m+Tt[t]}));if("padding"===e||"margin"===e||/^(border)?radius$/i.test(e)){h="".concat(o).split(" ").map((function(t){return/^-?\d+(rpx|px|vh|vw)?$/.test(t)?Xt(t):"margin"!=e&&/auto/.test(t)?0:t}),[])||[0];var y=f?p:e,_=h[0],v=h[1],x=h[2],w=h[3];c[y]=((i={})[b[0]]=si(_)?0:_,i[b[1]]=Yt(v)||si(v)?v:_,i[b[2]]=si(Yt(x)?x:_)?0:Yt(x)?x:_,i[b[3]]=Yt(w)?w:null!=v?v:_,i)}else"object"==typeof c[m]||(c[m]=((a={})[b[0]]=c[m]||0,a[b[1]]=c[m]||0,a[b[2]]=c[m]||0,a[b[3]]=c[m]||0,a)),c[m][e]="margin"==m&&si(o)||ni(o)?o:Xt(o);return"continue"}if(/^transform$/i.test(e))return c[e]={},o.replace(/([a-zA-Z]+)\(([0-9,-\.%rpxdeg\s]+)\)/g,(function(t,i,a){var s=a.split(",").map((function(e){return e.replace(/(^\s*)|(\s*$)/g,"")})),n=function(e,t){return e.includes("deg")?1*e:t&&!ni(t)?Xt(e,t):e};i.includes("matrix")?c[e][i]=s.map((function(e){return 1*e})):i.includes("rotate")?c[e][i]=1*a.match(/^-?\d+(\.\d+)?/)[0]:/[X, Y]/.test(i)?c[e][i]=/[X]/.test(i)?n(s[0],r.width):n(s[0],r.height):(c[e][i+"X"]=n(s[0],r.width),c[e][i+"Y"]=n(s[1]||s[0],r.height))})),"continue";if(/^font$/i.test(e)&&console.warn("font 不支持简写"),/^textindent/i.test(e)&&(c[e]=/^calc/.test(o)?o:Xt(o)),/^textstroke/i.test(e)){var k=e.match(/color|width|type$/i),S=(d="textStroke",o.split(" ").map((function(e){return/^\d+(rpx|px|vh|vw)?$/.test(e)?Xt(e):e})));return k?c[d]?c[d][k[0]]=S[0]:c[d]=((s={})[k[0]]=S[0],s):c[d]={width:S[0],color:S[1],type:S[2]},"continue"}/^left|top$/i.test(e)&&![ci,di].includes(r.position)?c[e]=0:c[e]=/^-?[\d\.]+(px|rpx|vw|vh)?$/.test(o)?Xt(o):/em$/.test(o)&&n==ri?Xt(o,r.fontSize):o},f=0,p=Object.keys(r);f<p.length;f++)h(p[f]);return c}(e,t);this.isAbsolute=n.position==vi,this.isFixed="fixed"==n.position,this.originStyle=n,this.styles=e.styles,Object.keys(n).forEach((function(e){Object.defineProperty(s.style,e,{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}})}));var o={contentSize:Qt({},this.contentSize),clientSize:Qt({},this.clientSize),borderSize:Qt({},this.borderSize),offsetSize:Qt({},this.offsetSize)};Object.keys(o).forEach((function(e){Object.keys(s[e]).forEach((function(t){Object.defineProperty(s[e],t,{configurable:!0,enumerable:!0,get:function(){return o[e][t]},set:function(i){o[e][t]=i}})}))})),this.computedStyle=this.style}var t=e.prototype;return t.add=function(e){e.parent=this,this.children[e.id]=e},t.getChildren=function(){var e=this;return Object.keys(this.children).map((function(t){return e.children[t]}))},t.prev=function(e){void 0===e&&(e=this);var t=e.parent.getChildren();return t[t.findIndex((function(t){return t.id==e.id}))-1]},t.querySelector=function(e){var t=this.getChildren();return"string"!=typeof e?null:t.find((function(t){var i=t.id,a=t.attributes;return i==e||a&&a.uid==e}))||this.parent&&this.parent.querySelector&&this.parent.querySelector(e)||null},t.getLineRect=function(e,t){var i=t?t.lines:this.parent&&this.parent.lines;return i&&i.find((function(t){return t.ids.includes(e)}))||{width:0,height:0}},t.setPosition=function(e,t){var i={left:"width",top:"height",right:"width",bottom:"height"};Object.keys(i).forEach((function(a){var s=a==zt?"left":"top";[zt,Mt].includes(a)&&void 0!==e.style[a]&&!Yt(e.originStyle[s])?e.style[s]=t[i[a]]-e.offsetSize[i[a]]-Xt(e.style[a],t[i[a]]):e.style[a]=Xt(e.style[a],t[i[a]])}))},t.getAttributes=function(e){var t=e.attributes,i=void 0===t?{}:t,a=e.uid,s=e.url,n=e.src,o=e.replace,r=e.text;return a&&(i.uid=a),(s||n)&&(i.src=i.src||s||n),o&&(i.replace=o),r&&(i.text=r),i},t.getOffsetSize=function(e,t,i){void 0===i&&(i=Pt[3]);var a=t||{},s=a.margin,n=(s=void 0===s?{}:s).marginLeft,o=void 0===n?0:n,r=s.marginTop,l=void 0===r?0:r,c=s.marginRight,d=void 0===c?0:c,u=s.marginBottom,h=void 0===u?0:u,f=a.padding,p=(f=void 0===f?{}:f).paddingLeft,m=void 0===p?0:p,g=f.paddingTop,b=void 0===g?0:g,y=f.paddingRight,_=void 0===y?0:y,v=f.paddingBottom,x=void 0===v?0:v,w=a.border,k=(w=void 0===w?{}:w).borderWidth,S=void 0===k?0:k,C=a.borderTop,I=(C=void 0===C?{}:C).borderTopWidth,$=void 0===I?S:I,B=a.borderBottom,T=(B=void 0===B?{}:B).borderBottomWidth,z=void 0===T?S:T,M=a.borderRight,P=(M=void 0===M?{}:M).borderRightWidth,F=void 0===P?S:P,W=a.borderLeft,A=(W=void 0===W?{}:W).borderLeftWidth,O=void 0===A?S:A,V=o<0&&d<0?Math.abs(o+d):0,R=l<0&&h<0?Math.abs(l+h):0,L=o>=0&&d<0,j=l>=0&&h<0;return i==Pt[0]&&(this[i].left=e.left+o+m+O+(L?2*-d:0),this[i].top=e.top+l+b+$+(j?2*-h:0),this[i].width=e.width+(this[i].widthAdd?0:V),this[i].height=e.height+(this[i].heightAdd?0:R),this[i].widthAdd=V,this[i].heightAdd=R),i==Pt[1]&&(this[i].left=e.left+o+O+(L<0?-d:0),this[i].top=e.top+l+$+(j?-h:0),this[i].width=e.width+m+_,this[i].height=e.height+b+x),i==Pt[2]&&(this[i].left=e.left+o+O/2+(L<0?-d:0),this[i].top=e.top+l+$/2+(j?-h:0),this[i].width=e.width+m+_+O/2+F/2,this[i].height=e.height+b+x+z/2+$/2),i==Pt[3]&&(this[i].left=e.left+(L<0?-d:0),this[i].top=e.top+(j?-h:0),this[i].width=e.width+m+_+O+F+o+d,this[i].height=e.height+b+x+z+$+h+l),this[i]},t.layoutBoxUpdate=function(e,t,i,a){var s=this;if(void 0===i&&(i=-1),"border-box"==t.boxSizing){var n=t||{},o=n.border,r=(o=void 0===o?{}:o).borderWidth,l=void 0===r?0:r,c=n.borderTop,d=(c=void 0===c?{}:c).borderTopWidth,u=void 0===d?l:d,h=n.borderBottom,f=(h=void 0===h?{}:h).borderBottomWidth,p=void 0===f?l:f,m=n.borderRight,g=(m=void 0===m?{}:m).borderRightWidth,b=void 0===g?l:g,y=n.borderLeft,_=(y=void 0===y?{}:y).borderLeftWidth,v=void 0===_?l:_,x=n.padding,w=(x=void 0===x?{}:x).paddingTop,k=void 0===w?0:w,S=x.paddingRight,C=void 0===S?0:S,I=x.paddingBottom,$=void 0===I?0:I,B=x.paddingLeft,T=void 0===B?0:B;i||(e.width-=T+C+b+v),1!==i||a||(e.height-=k+$+u+p)}this.layoutBox&&(Pt.forEach((function(i){return s.layoutBox[i]=s.getOffsetSize(e,t,i)})),this.layoutBox=Object.assign({},this.layoutBox,this.layoutBox.borderSize))},t.getBoxPosition=function(){var e=this.computedStyle,t=this.fixedLine,i=this.lines,a=e.left,s=void 0===a?0:a,n=e.top,o=void 0===n?0:n,r=Qt({},this.contentSize,{left:s,top:o}),l=this.contentSize.top-this.offsetSize.top,c=this.contentSize.left-this.offsetSize.left;if(this.root.fixedLine&&!this.root.isDone){this.root.isDone=!0;for(var d,u=ii(this.root.fixedLine.elements);!(d=u()).done;){var h=d.value;h.setPosition(h,this.root.offsetSize),h.getBoxPosition()}}if(t)for(var f,p=ii(t.elements);!(f=p()).done;){var m=f.value,g=Qt({},this.borderSize,{left:s,top:o});m.setPosition(m,g);var b=this.borderSize.top-this.offsetSize.top,y=this.borderSize.left-this.offsetSize.left;m.style.left+=s+y,m.style.top+=o+b,m.getBoxPosition()}if(i)for(var _,v=ii(i);!(_=v()).done;)_.value.layout(r.top+l,r.left+c);return this.layoutBoxUpdate(r,e),this.layoutBox},t.getBoxState=function(e,t){return this.isBlock(e)||this.isBlock(t)},t.isBlock=function(e){return void 0===e&&(e=this),e&&"block"==e.style.display},t.isFlex=function(e){return void 0===e&&(e=this),e&&"flex"==e.style.display},t.isInFlow=function(){return!(this.isAbsolute||this.isFixed)},t.inFlexBox=function(e){return void 0===e&&(e=this),!!e.isInFlow()&&!!e.parent&&(!(!e.parent||"flex"!==e.parent.style.display)||void 0)},t.isInline=function(e){return void 0===e&&(e=this),e&&"inline-block"==e.style.display},t.contrastSize=function(e,t,i){var a=e;return i&&(a=Math.min(a,i)),t&&(a=Math.max(a,t)),a},t.measureText=function(e,t){var i=this.ctx.measureText(e),a=i.width,s=i.actualBoundingBoxAscent,n=i.actualBoundingBoxDescent;return{ascent:s,descent:n,width:a,fontHeight:s+n||.7*t+1}},t.getParentSize=function(e,t){if(void 0===e&&(e=this),void 0===t&&(t=!1),e&&e.parent){if(e.parent.contentSize.width)return e.parent.contentSize;if(t)return this.getParentSize(e.parent,t)}return null},t.getBoxWidthHeight=function(){var e=this,t=this.name,i=this.computedStyle,a=this.attributes,s=this.parent,n=void 0===s?{}:s,o=this.ctx,r=this.getChildren(),l=i.left,c=void 0===l?0:l,d=i.top,u=void 0===d?0:d,h=i.bottom,f=i.right,p=i.width,m=void 0===p?0:p,g=i.minWidth,b=i.maxWidth,y=i.minHeight,_=i.maxHeight,v=i.height,x=void 0===v?0:v,w=i.fontSize,k=i.fontWeight,S=i.fontFamily,C=i.fontStyle,I=i.position;i.textIndent;var $=i.lineClamp,B=i.lineHeight,T=i.padding,z=void 0===T?{}:T,M=i.margin,P=void 0===M?{}:M,F=i.border,W=(F=void 0===F?{}:F).borderWidth,A=void 0===W?0:W,O=i.borderRight,V=(O=void 0===O?{}:O).borderRightWidth,R=void 0===V?A:V,L=i.borderLeft,j=(L=void 0===L?{}:L).borderLeftWidth,E=void 0===j?A:j,N=n.contentSize&&n.contentSize.width,H=n.contentSize&&n.contentSize.height;if(ni(m)&&N&&(m=Xt(m,N)),ni(m)&&!N&&(m=null),ni(x)&&H&&(x=Xt(x,H)),ni(x)&&!H&&(x=null),ni(g)&&N&&(g=Xt(g,N)),ni(b)&&N&&(b=Xt(b,N)),ni(y)&&H&&(y=Xt(y,H)),ni(_)&&H&&(_=Xt(_,H)),i.padding&&N)for(var D in i.padding)Object.hasOwnProperty.call(z,D)&&(z[D]=Xt(z[D],N));var U=z.paddingRight,q=void 0===U?0:U,Y=z.paddingLeft,X=void 0===Y?0:Y;if(i.margin&&[P.marginLeft,P.marginRight].includes("auto"))if(m){var G=N&&N-m-q-X-E-R||0;P.marginLeft==P.marginRight?P.marginLeft=P.marginRight=G/2:si(P.marginLeft)?P.marginLeft=G:P.marginRight=G}else P.marginLeft=P.marginRight=0;var J=P.marginRight,Z=void 0===J?0:J,K=P.marginLeft,Q={width:m,height:x,left:0,top:0},ee=X+q+E+R+(void 0===K?0:K)+Z;if(this.offsetWidth=ee,t==yi&&!this.attributes.widths){var te=a.text||"";o.save(),o.setFonts({fontFamily:S,fontSize:w,fontWeight:k,fontStyle:C}),te.length,"\n"==te&&(te="",this.isBr=!0),(""+te).split("\n").map((function(t){var i=Array.from(t).map((function(t){var i=""+(/^[\u4e00-\u9fa5]+$/.test(t)?"cn":t)+S+w+k+C,a=ki.get(i);if(a)return{width:a,text:t};var s=e.measureText(t,w).width;return ki.set(i,s),{width:s,text:t}})),a=e.measureText(t,w),s=a.fontHeight,n=a.ascent,o=a.descent;e.attributes.fontHeight=s,e.attributes.ascent=n,e.attributes.descent=o,e.attributes.widths||(e.attributes.widths=[]),e.attributes.widths.push({widths:i,total:i.reduce((function(e,t){return e+t.width}),0)})})),o.restore()}if("image"==t&&null==m){var ie=a.width,ae=a.height;Q.width=this.contrastSize(Math.round(ie*x/ae)||0,g,b),this.layoutBoxUpdate(Q,i,0)}if(t==yi&&null==m){var se=this.attributes.widths,ne=Math.max.apply(Math,se.map((function(e){return e.total})));n&&N>0&&(ne>N||this.isBlock(this))&&!this.isAbsolute&&!this.isFixed&&(ne=N),Q.width=this.contrastSize(ne,g,b),this.layoutBoxUpdate(Q,i,0)}if(t==yi&&(n.style.flex||!this.attributes.lines)){var oe=this.attributes.widths.length;this.attributes.widths.forEach((function(e){return e.widths.reduce((function(e,t,i){return e+t.width>Q.width?(oe++,t.width):e+t.width}),0)})),oe=$&&oe>$?$:oe,this.attributes.lines=oe}if("image"==t&&null==x){var re=a.width,le=a.height;a.text,Q.height=this.contrastSize(Xt(Q.width*le/re)||0,y,_),this.layoutBoxUpdate(Q,i,1)}t==yi&&null==x&&(B=Xt(B,w),Q.height=this.contrastSize(Xt(this.attributes.lines*B),y,_),this.layoutBoxUpdate(Q,i,1,!0)),!m&&n&&n.children&&N&&(!this.isFlex(n)||n.isFlexCalc)&&([_i,yi].includes(t)&&this.isFlex()||t==_i&&this.isBlock(this)&&this.isInFlow())&&(Q.width=this.contrastSize(N-(n.isFlexCalc?0:ee),g,b),this.layoutBoxUpdate(Q,i)),m&&!ni(m)&&(Q.width=this.contrastSize(m,g,b),this.layoutBoxUpdate(Q,i,0)),x&&!ni(x)&&(Q.height=this.contrastSize(Q.height,y,_),this.layoutBoxUpdate(Q,i,1));var ce=0;if(r.length){var de=null,ue=!1;r.forEach((function(t,a){t.getBoxWidthHeight();var s=r[a+1];if(s&&s.isInFlow()&&(t.next=s),!e.line||!e.line.ids.includes(t.id))if(t.isInFlow()&&!t.inFlexBox()){var n=e.getBoxState(de,t);if(t.isBr)return ue=!0;e.line&&e.line.canIEnter(t)&&!n&&!ue?e.line.add(t):(ue=!1,(new mi).bind(t)),de=t}else t.inFlexBox()?e.line&&(e.line.canIEnter(t)||"nowrap"==i.flexWrap)?e.line.add(t):(new bi).bind(t):t.isFixed?e.root.fixedLine?e.root.fixedLine.fixedAdd(t):(new mi).fixedBind(t):e.fixedLine?e.fixedLine.fixedAdd(t):(new mi).fixedBind(t,1)})),this.lines&&(ce=this.lines.reduce((function(e,t){return e+t.height}),0))}var he=0,fe=0;if(!m&&(this.isAbsolute||this.isFixed)&&N){var pe=I==vi?N:this.root.width,me=pe-(ni(c)?Xt(c,pe):c)-(ni(f)?Xt(f,pe):f);he=i.left?me:this.lineMaxWidth}if(!x&&(null!=u?u:this.isAbsolute||this.isFixed&&H)){var ge=I==vi?H:this.root.height,be=ge-(ni(u)?Xt(u,ge):u)-(ni(h)?Xt(h,ge):h);fe=i.top?be:0}if(m&&!ni(m)||Q.width||(Q.width=he||this.contrastSize((this.isBlock(this)&&!this.isInFlow()?N||n.lineMaxWidth:this.lineMaxWidth)||this.lineMaxWidth,g,b),this.layoutBoxUpdate(Q,i,0)),x||!ce&&!fe||(Q.height=fe||this.contrastSize(ce,y,_),this.layoutBoxUpdate(Q,i)),i.borderRadius&&this.borderSize&&this.borderSize.width)for(var D in i.borderRadius)Object.hasOwnProperty.call(i.borderRadius,D)&&(i.borderRadius[D]=Xt(i.borderRadius[D],this.borderSize.width));return this.layoutBox},t.layout=function(){return this.getBoxWidthHeight(),this.root.offsetSize=this.offsetSize,this.root.contentSize=this.contentSize,this.getBoxPosition(),this.offsetSize},e}(),Ci=function(){var e,t,i,a,s,n,o=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],r=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],l=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],c=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],d=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],u=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],h=[],f=[],p=[],m=[],g=[],b=2;function y(e,t){var i;e>t&&(i=e,e=t,t=i),i=t,i*=t,i+=t,i>>=1,m[i+=e]=1}function _(e,i){var a;for(p[e+t*i]=1,a=-2;a<2;a++)p[e+a+t*(i-2)]=1,p[e-2+t*(i+a+1)]=1,p[e+2+t*(i+a)]=1,p[e+a+1+t*(i+2)]=1;for(a=0;a<2;a++)y(e-1,i+a),y(e+1,i-a),y(e-a,i-1),y(e+a,i+1)}function v(e){for(;e>=255;)e=((e-=255)>>8)+(255&e);return e}var x=[];function w(e,t,i,a){var s,n,o;for(s=0;s<a;s++)h[i+s]=0;for(s=0;s<t;s++){if(255!=(o=d[h[e+s]^h[i]]))for(n=1;n<a;n++)h[i+n-1]=h[i+n]^u[v(o+x[a-n])];else for(n=i;n<i+a;n++)h[n]=h[n+1];h[i+a-1]=255==o?0:u[v(o+x[0])]}}function k(e,t){var i;return e>t&&(i=e,e=t,t=i),i=t,i+=t*t,i>>=1,m[i+=e]}function S(e){var i,a,s,n;switch(e){case 0:for(a=0;a<t;a++)for(i=0;i<t;i++)i+a&1||k(i,a)||(p[i+a*t]^=1);break;case 1:for(a=0;a<t;a++)for(i=0;i<t;i++)1&a||k(i,a)||(p[i+a*t]^=1);break;case 2:for(a=0;a<t;a++)for(s=0,i=0;i<t;i++,s++)3==s&&(s=0),s||k(i,a)||(p[i+a*t]^=1);break;case 3:for(n=0,a=0;a<t;a++,n++)for(3==n&&(n=0),s=n,i=0;i<t;i++,s++)3==s&&(s=0),s||k(i,a)||(p[i+a*t]^=1);break;case 4:for(a=0;a<t;a++)for(s=0,n=a>>1&1,i=0;i<t;i++,s++)3==s&&(s=0,n=!n),n||k(i,a)||(p[i+a*t]^=1);break;case 5:for(n=0,a=0;a<t;a++,n++)for(3==n&&(n=0),s=0,i=0;i<t;i++,s++)3==s&&(s=0),(i&a&1)+!(!s|!n)||k(i,a)||(p[i+a*t]^=1);break;case 6:for(n=0,a=0;a<t;a++,n++)for(3==n&&(n=0),s=0,i=0;i<t;i++,s++)3==s&&(s=0),(i&a&1)+(s&&s==n)&1||k(i,a)||(p[i+a*t]^=1);break;case 7:for(n=0,a=0;a<t;a++,n++)for(3==n&&(n=0),s=0,i=0;i<t;i++,s++)3==s&&(s=0),(s&&s==n)+(i+a&1)&1||k(i,a)||(p[i+a*t]^=1)}}function C(e){var t,i=0;for(t=0;t<=e;t++)g[t]>=5&&(i+=3+g[t]-5);for(t=3;t<e-1;t+=2)g[t-2]==g[t+2]&&g[t+2]==g[t-1]&&g[t-1]==g[t+1]&&3*g[t-1]==g[t]&&(0==g[t-3]||t+3>e||3*g[t-3]>=4*g[t]||3*g[t+3]>=4*g[t])&&(i+=40);return i}function I(){var e,i,a,s,n,o=0,r=0;for(i=0;i<t-1;i++)for(e=0;e<t-1;e++)(p[e+t*i]&&p[e+1+t*i]&&p[e+t*(i+1)]&&p[e+1+t*(i+1)]||!(p[e+t*i]||p[e+1+t*i]||p[e+t*(i+1)]||p[e+1+t*(i+1)]))&&(o+=3);for(i=0;i<t;i++){for(g[0]=0,a=s=e=0;e<t;e++)(n=p[e+t*i])==s?g[a]++:g[++a]=1,r+=(s=n)?1:-1;o+=C(a)}r<0&&(r=-r);var l=r,c=0;for(l+=l<<2,l<<=1;l>t*t;)l-=t*t,c++;for(o+=10*c,e=0;e<t;e++){for(g[0]=0,a=s=i=0;i<t;i++)(n=p[e+t*i])==s?g[a]++:g[++a]=1,s=n;o+=C(a)}return o}var $=null;return{api:{get ecclevel(){return b},set ecclevel(e){b=e},get size(){return _size},set size(e){_size=e},get canvas(){return $},set canvas(e){$=e},getFrame:function(g){return function(g){var C,$,B,T,z,M,P,F;T=g.length,e=0;do{if(e++,B=4*(b-1)+16*(e-1),i=c[B++],a=c[B++],s=c[B++],n=c[B],T<=(B=s*(i+a)+a-3+(e<=9)))break}while(e<40);for(t=17+4*e,z=s+(s+n)*(i+a)+a,T=0;T<z;T++)f[T]=0;for(h=g.slice(0),T=0;T<t*t;T++)p[T]=0;for(T=0;T<(t*(t+1)+1)/2;T++)m[T]=0;for(T=0;T<3;T++){for(B=0,$=0,1==T&&(B=t-7),2==T&&($=t-7),p[$+3+t*(B+3)]=1,C=0;C<6;C++)p[$+C+t*B]=1,p[$+t*(B+C+1)]=1,p[$+6+t*(B+C)]=1,p[$+C+1+t*(B+6)]=1;for(C=1;C<5;C++)y($+C,B+1),y($+1,B+C+1),y($+5,B+C),y($+C+1,B+5);for(C=2;C<4;C++)p[$+C+t*(B+2)]=1,p[$+2+t*(B+C+1)]=1,p[$+4+t*(B+C)]=1,p[$+C+1+t*(B+4)]=1}if(e>1)for(T=o[e],$=t-7;;){for(C=t-7;C>T-3&&(_(C,$),!(C<T));)C-=T;if($<=T+9)break;_(6,$-=T),_($,6)}for(p[8+t*(t-8)]=1,$=0;$<7;$++)y(7,$),y(t-8,$),y(7,$+t-7);for(C=0;C<8;C++)y(C,7),y(C+t-8,7),y(C,t-8);for(C=0;C<9;C++)y(C,8);for(C=0;C<8;C++)y(C+t-8,8),y(8,C);for($=0;$<7;$++)y(8,$+t-7);for(C=0;C<t-14;C++)1&C?(y(8+C,6),y(6,8+C)):(p[8+C+6*t]=1,p[6+t*(8+C)]=1);if(e>6)for(T=r[e-7],B=17,C=0;C<6;C++)for($=0;$<3;$++,B--)1&(B>11?e>>B-12:T>>B)?(p[5-C+t*(2-$+t-11)]=1,p[2-$+t-11+t*(5-C)]=1):(y(5-C,2-$+t-11),y(2-$+t-11,5-C));for($=0;$<t;$++)for(C=0;C<=$;C++)p[C+t*$]&&y(C,$);for(z=h.length,M=0;M<z;M++)f[M]=h.charCodeAt(M);if(h=f.slice(0),z>=(C=s*(i+a)+a)-2&&(z=C-2,e>9&&z--),M=z,e>9){for(h[M+2]=0,h[M+3]=0;M--;)T=h[M],h[M+3]|=255&T<<4,h[M+2]=T>>4;h[2]|=255&z<<4,h[1]=z>>4,h[0]=64|z>>12}else{for(h[M+1]=0,h[M+2]=0;M--;)T=h[M],h[M+2]|=255&T<<4,h[M+1]=T>>4;h[1]|=255&z<<4,h[0]=64|z>>4}for(M=z+3-(e<10);M<C;)h[M++]=236,h[M++]=17;for(x[0]=1,M=0;M<n;M++){for(x[M+1]=1,P=M;P>0;P--)x[P]=x[P]?x[P-1]^u[v(d[x[P]]+M)]:x[P-1];x[0]=u[v(d[x[0]]+M)]}for(M=0;M<=n;M++)x[M]=d[x[M]];for(B=C,$=0,M=0;M<i;M++)w($,s,B,n),$+=s,B+=n;for(M=0;M<a;M++)w($,s+1,B,n),$+=s+1,B+=n;for($=0,M=0;M<s;M++){for(P=0;P<i;P++)f[$++]=h[M+P*s];for(P=0;P<a;P++)f[$++]=h[i*s+M+P*(s+1)]}for(P=0;P<a;P++)f[$++]=h[i*s+M+P*(s+1)];for(M=0;M<n;M++)for(P=0;P<i+a;P++)f[$++]=h[C+M+P*n];for(h=f,C=$=t-1,B=z=1,F=(s+n)*(i+a)+a,M=0;M<F;M++)for(T=h[M],P=0;P<8;P++,T<<=1){128&T&&(p[C+t*$]=1);do{z?C--:(C++,B?0!=$?$--:(B=!B,6==(C-=2)&&(C--,$=9)):$!=t-1?$++:(B=!B,6==(C-=2)&&(C--,$-=8))),z=!z}while(k(C,$))}for(h=p.slice(0),T=0,$=3e4,B=0;B<8&&(S(B),(C=I())<$&&($=C,T=B),7!=T);B++)p=h.slice(0);for(T!=B&&S(T),$=l[T+(b-1<<3)],B=0;B<8;B++,$>>=1)1&$&&(p[t-1-B+8*t]=1,B<6?p[8+t*B]=1:p[8+t*(B+1)]=1);for(B=0;B<7;B++,$>>=1)1&$&&(p[8+t*(t-7+B)]=1,B?p[6-B+8*t]=1:p[7+8*t]=1);return p}(g)},utf16to8:function(e){var t,i,a,s;for(t="",a=e.length,i=0;i<a;i++)(s=e.charCodeAt(i))>=1&&s<=127?t+=e.charAt(i):s>2047?(t+=String.fromCharCode(224|s>>12&15),t+=String.fromCharCode(128|s>>6&63),t+=String.fromCharCode(128|s>>0&63)):(t+=String.fromCharCode(192|s>>6&31),t+=String.fromCharCode(128|s>>0&63));return t},draw:function(e,i,a,s,n){i.drawView(a,s);var o=i.ctx,r=a.contentSize,l=r.width,c=r.height,d=r.left,u=r.top;s.borderRadius,s.backgroundColor;var h=s.color,f=void 0===h?"#000000":h;if(s.border,a.contentSize.left,a.borderSize.left,a.contentSize.top,a.borderSize.top,b=n||b,o){o.save(),i.setOpacity(s),i.setTransform(a,s);var p=Math.min(l,c);e=this.utf16to8(e);var m=this.getFrame(e),g=p/t;o.setFillStyle(f);for(var y=0;y<t;y++)for(var _=0;_<t;_++)m[_*t+y]&&o.fillRect(d+g*y,u+g*_,g,g);o.restore(),i.setBorder(a,s)}else console.warn("No canvas provided to draw QR code in!")}}}}(),Ii=Vt,$i=Ot,Bi=Rt,Ti=At,zi=Ft.TOP,Mi=Ft.MIDDLE,Pi=Ft.BOTTOM,Fi=Wt.LEFT,Wi=Wt.CENTER,Ai=Wt.RIGHT,Oi=function(){function e(e){var t,i,a=this;this.v="1.9.5.1",this.id=null,this.pixelRatio=1,this.width=0,this.height=0,this.sleep=1e3/30,this.count=0,this.isRate=!1,this.isDraw=!0,this.isCache=!0,this.fixed="",this.useCORS=!1,this.performance=!1,this.imageBus=[],this.createImage=function(e,t){return new Promise((function(i,s){var n=null;window||a.canvas.createImage?(n=a.canvas&&a.canvas.createImage?a.canvas.createImage():new Image,t&&n.setAttribute("crossOrigin","Anonymous"),n.src=e,n.onload=function(){i({width:n.naturalWidth||n.width,height:n.naturalHeight||n.height,path:n,src:this.src})},n.onerror=function(e){s(e)}):s({fail:"getImageInfo fail",src:e})}))},this.options=e,Object.assign(this,e),this.ctx=(t=e.context,i={get:function(e,i){if("setFonts"===i)return function(e){var i=e.fontFamily,a=void 0===i?"sans-serif":i,s=e.fontSize,n=void 0===s?14:s,o=e.fontWeight,r=void 0===o?"normal":o,l=e.fontStyle,c=void 0===l?"normal":l;Dt==Bt.MP_TOUTIAO&&(r="bold"==r?"bold":"",c="italic"==c?"italic":""),t.font="".concat(c," ").concat(r," ").concat(Math.round(n),"px ").concat(a)};if(!t.draw||!t.setFillStyle){if("setFillStyle"===i)return function(e){t.fillStyle=e};if("setStrokeStyle"===i)return function(e){t.strokeStyle=e};if("setLineWidth"===i)return function(e){t.lineWidth=e};if("setLineCap"===i)return function(e){t.lineCap=e};if("setFontSize"===i)return function(e){t.font="".concat(String(e),"px sans-serif")};if("setGlobalAlpha"===i)return function(e){t.globalAlpha=e};if("setLineJoin"===i)return function(e){t.lineJoin=e};if("setTextAlign"===i)return function(e){t.textAlign=e};if("setMiterLimit"===i)return function(e){t.miterLimit=e};if("setShadow"===i)return function(e,i,a,s){t.shadowOffsetX=e,t.shadowOffsetY=i,t.shadowBlur=a,t.shadowColor=s};if("setTextBaseline"===i)return function(e){t.textBaseline=e};if("createCircularGradient"===i)return function(){};if("draw"===i)return function(){};if("function"==typeof t[i])return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return t[i].apply(t,e)}}return e[i]},set:function(e,i,a){return t[i]=a,!0}},new Proxy(t,i)),this.progress=0,this.root={width:e.width,height:e.height,fontSizeRate:1,fixedLine:null},this.size=this.root;var s=0;Object.defineProperty(this,"progress",{configurable:!0,set:function(e){s=e,a.lifecycle("onProgress",e/a.count)},get:function(){return s||0}})}return e.prototype.lifecycle=function(e,t){this.options.listen&&this.options.listen[e]&&this.options.listen[e](t)},e.prototype.setContext=function(e){e&&(this.ctx=e)},e.prototype.init=function(){if(this.canvas.height||Bt.WEB==Dt){this.ctx.setTransform(1,0,0,1,0,0);var e=this.size.height*this.pixelRatio,t=this.size.width*this.pixelRatio;this.canvas.height=e,this.canvas.width=t,this.ctx.scale(this.pixelRatio,this.pixelRatio)}},e.prototype.clear=function(){this.ctx.clearRect(0,0,this.size.width,this.size.height)},e.prototype.clipPath=function(e,t,i,a,s,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var r=this.ctx;if(/polygon/.test(s)){var l=s.match(/-?\d+(rpx|px|%)?\s+-?\d+(rpx|px|%)?/g)||[];r.beginPath(),l.map((function(s){var n=s.split(" "),o=n[0],r=n[1];return[Xt(o,i)+e,Xt(r,a)+t]})).forEach((function(e,t){0==t?r.moveTo(e[0],e[1]):r.lineTo(e[0],e[1])})),r.closePath(),o&&r.stroke(),n&&r.fill()}},e.prototype.roundRect=function(e,t,i,a,s,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),!(s<0)){var r=this.ctx;if(r.beginPath(),s){var l=s||{},c=l.borderTopLeftRadius,d=void 0===c?s||0:c,u=l.borderTopRightRadius,h=void 0===u?s||0:u,f=l.borderBottomRightRadius,p=void 0===f?s||0:f,m=l.borderBottomLeftRadius,g=void 0===m?s||0:m;r.arc(e+i-p,t+a-p,p,0,.5*Math.PI),r.lineTo(e+g,t+a),r.arc(e+g,t+a-g,g,.5*Math.PI,Math.PI),r.lineTo(e,t+d),r.arc(e+d,t+d,d,Math.PI,1.5*Math.PI),r.lineTo(e+i-h,t),r.arc(e+i-h,t+h,h,1.5*Math.PI,2*Math.PI),r.lineTo(e+i,t+a-p)}else r.rect(e,t,i,a);r.closePath(),o&&r.stroke(),n&&r.fill()}},e.prototype.setTransform=function(e,t){var i=t.transform,a=t.transformOrigin,s=this.ctx,n=i||{},o=n.scaleX,r=void 0===o?1:o,l=n.scaleY,c=void 0===l?1:l,d=n.translateX,u=void 0===d?0:d,h=n.translateY,f=void 0===h?0:h,p=n.rotate,m=void 0===p?0:p,g=n.skewX,b=void 0===g?0:g,y=n.skewY,_=void 0===y?0:y,v=e.left,x=e.top,w=e.width,k=e.height;u=Xt(u,w)||0,f=Xt(f,k)||0;var S=Xt("0%",1),C=Xt("50%",1),I=Xt("100%",1),$={top:S,center:C,bottom:I},B={left:S,center:C,right:I};if(a=a.split(" ").filter((function(e,t){return t<2})).reduce((function(e,t){if(/\d+/.test(t)){var i=Xt(t,1)/(/px|rpx$/.test(t)?Yt(e.x)?k:w:1);return Yt(e.x)?Object.assign(e,{y:i}):Object.assign(e,{x:i})}return Yt(B[t])&&!Yt(e.x)?Object.assign(e,{x:B[t]}):Object.assign(e,{y:$[t]||.5})}),{}),(u||f)&&s.translate(u,f),(r||c)&&s.scale(r,c),m){var T=v+w*a.x,z=x+k*a.y;s.translate(T,z),s.rotate(m*Math.PI/180),s.translate(-T,-z)}(b||_)&&s.transform(1,Math.tan(_*Math.PI/180),Math.tan(b*Math.PI/180),1,0,0)},e.prototype.setBackground=function(e,t,i,a,s){var n=this.ctx;e&&"transparent"!=e?function(e){return!(!e||!e.startsWith("linear")&&!e.startsWith("radial"))}(e)?function(e,t,i,a,s,n){e.startsWith("linear")?function(e,t,i,a,s,n){for(var o=function(e,t,i,a,s){void 0===a&&(a=0),void 0===s&&(s=0);var n=e.match(/([-]?\d{1,3})deg/),o=n&&n[1]?parseFloat(n[1]):0;if(o>=360&&(o-=360),o<0&&(o+=360),0===(o=Math.round(o)))return{x0:Math.round(t/2)+a,y0:i+s,x1:Math.round(t/2)+a,y1:s};if(180===o)return{x0:Math.round(t/2)+a,y0:s,x1:Math.round(t/2)+a,y1:i+s};if(90===o)return{x0:a,y0:Math.round(i/2)+s,x1:t+a,y1:Math.round(i/2)+s};if(270===o)return{x0:t+a,y0:Math.round(i/2)+s,x1:a,y1:Math.round(i/2)+s};var r=Math.round(180*Math.asin(t/Math.sqrt(Math.pow(t,2)+Math.pow(i,2)))/Math.PI);if(o===r)return{x0:a,y0:i+s,x1:t+a,y1:s};if(o===180-r)return{x0:a,y0:s,x1:t+a,y1:i+s};if(o===180+r)return{x0:t+a,y0:s,x1:a,y1:i+s};if(o===360-r)return{x0:t+a,y0:i+s,x1:a,y1:s};var l,c=0,d=0,u=0,h=0;if(o<r||o>180-r&&o<180||o>180&&o<180+r||o>360-r){var f=o*Math.PI/180,p=o<r||o>360-r?i/2:-i/2,m=Math.tan(f)*p,g=o<r||o>180-r&&o<180?t/2-m:-t/2-m;c=-(u=m+(l=Math.pow(Math.sin(f),2)*g)),d=-(h=p+l/Math.tan(f))}return(o>r&&o<90||o>90&&o<90+r||o>180+r&&o<270||o>270&&o<360-r)&&(f=(90-o)*Math.PI/180,m=o>r&&o<90||o>90&&o<90+r?t/2:-t/2,p=Math.tan(f)*m,g=o>r&&o<90||o>270&&o<360-r?i/2-p:-i/2-p,c=-(u=m+(l=Math.pow(Math.sin(f),2)*g)/Math.tan(f)),d=-(h=p+l)),{x0:c=Math.round(c+t/2)+a,y0:d=Math.round(i/2-d)+s,x1:u=Math.round(u+t/2)+a,y1:h=Math.round(i/2-h)+s}}(s,e,t,i,a),r=o.x0,l=o.y0,c=o.x1,d=o.y1,u=n.createLinearGradient(r,l,c,d),h=s.match(/linear-gradient\((.+)\)/)[1],f=Zt(h.substring(h.indexOf(",")+1)),p=0;p<f.colors.length;p++)u.addColorStop(f.percents[p],f.colors[p]);n.setFillStyle(u)}(t,i,a,s,e,n):e.startsWith("radial")&&function(e,t,i,a,s,n){for(var o=Zt(s.match(/radial-gradient\((.+)\)/)[1]),r=Math.round(e/2)+i,l=Math.round(t/2)+a,c=n.createRadialGradient(r,l,0,r,l,Math.max(e,t)/2),d=0;d<o.colors.length;d++)c.addColorStop(o.percents[d],o.colors[d]);n.setFillStyle(c)}(t,i,a,s,e,n)}(e,t,i,a,s,n):n.setFillStyle(e):[Bt.MP_TOUTIAO,Bt.MP_BAIDU].includes(Dt)?n.setFillStyle("rgba(0,0,0,0)"):n.setFillStyle("transparent")},e.prototype.setShadow=function(e){var t=e.boxShadow,i=void 0===t?[]:t,a=this.ctx;if(i.length){var s=i[0],n=i[1],o=i[2],r=i[3];a.setShadow(s,n,o,r)}},e.prototype.setBorder=function(e,t){var i=this.ctx,a=e.width,s=e.height,n=e.left,o=e.top,r=t.border,l=t.borderBottom,c=t.borderTop,d=t.borderRight,u=t.borderLeft,h=t.borderRadius,f=t.lineCap,p=r||{},m=p.borderWidth,g=void 0===m?0:m,b=p.borderStyle,y=p.borderColor,_=l||{},v=_.borderBottomWidth,x=void 0===v?g:v,w=_.borderBottomStyle,k=void 0===w?b:w,S=_.borderBottomColor,C=void 0===S?y:S,I=c||{},$=I.borderTopWidth,B=void 0===$?g:$,T=I.borderTopStyle,z=void 0===T?b:T,M=I.borderTopColor,P=void 0===M?y:M,F=d||{},W=F.borderRightWidth,A=void 0===W?g:W,O=F.borderRightStyle,V=void 0===O?b:O,R=F.borderRightColor,L=void 0===R?y:R,j=u||{},E=j.borderLeftWidth,N=void 0===E?g:E,H=j.borderLeftStyle,D=void 0===H?b:H,U=j.borderLeftColor,q=void 0===U?y:U,Y=h||{},X=Y.borderTopLeftRadius,G=void 0===X?h||0:X,J=Y.borderTopRightRadius,Z=void 0===J?h||0:J,K=Y.borderBottomRightRadius,Q=void 0===K?h||0:K,ee=Y.borderBottomLeftRadius,te=void 0===ee?h||0:ee;if(l||u||c||d||r){var ie=function(e,t,a){"dashed"==t?/mp/.test(Dt)?i.setLineDash([Math.ceil(4*e/3),Math.ceil(4*e/3)]):i.setLineDash([Math.ceil(6*e),Math.ceil(6*e)]):"dotted"==t&&i.setLineDash([e,e]),i.setStrokeStyle(a)},ae=function(e,t,a,s,n,o,r,l,c,d,u,h,p,m,g){i.save(),i.setLineCap(g?"square":f),i.setLineWidth(h),ie(h,p,m),i.beginPath(),i.arc(e,t,r,Math.PI*c,Math.PI*d),i.lineTo(a,s),i.arc(n,o,l,Math.PI*d,Math.PI*u),i.stroke(),i.restore()};if(i.save(),r&&!l&&!u&&!c&&!d)return i.setLineWidth(g),ie(g,b,y),this.roundRect(n,o,a,s,h,!1,!!y),void i.restore();x&&ae(n+a-Q,o+s-Q,n+te,o+s,n+te,o+s-te,Q,te,.25,.5,.75,x,k,C,N&&A),N&&ae(n+te,o+s-te,n,o+G,n+G,o+G,te,G,.75,1,1.25,N,D,q,B&&x),B&&ae(n+G,o+G,n+a-Z,o,n+a-Z,o+Z,G,Z,1.25,1.5,1.75,B,z,P,N&&A),A&&ae(n+a-Z,o+Z,n+a,o+s-Q,n+a-Q,o+s-Q,Z,Q,1.75,2,.25,A,V,L,B&&x)}},e.prototype.setOpacity=function(e){var t=e.opacity,i=void 0===t?1:t;this.ctx.setGlobalAlpha(i)},e.prototype.drawPattern=function(e,t,i){return It(this,void 0,void 0,(function(){var a=this;return $t(this,(function(s){return[2,new Promise((function(s,n){a.drawView(t,i,!0,!1,!0);var o=a,r=o.ctx;o.canvas;var l,c,d=t.width,u=t.height,h=t.left,f=t.top,p=i||{},m=p.borderRadius,g=void 0===m?0:m,b=p.backgroundImage,y=p.backgroundRepeat,_=void 0===y?"repeat":y;b&&(l=e,c=r.createPattern(l.src,_),r.setFillStyle(c),a.roundRect(h,f,d,u,g,!0,!1),a.setBorder(t,i),s())}))]}))}))},e.prototype.drawView=function(e,t,i,a,s){void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===s&&(s=!0);var n=this.ctx,o=e.width,r=e.height,l=e.left,c=e.top,d=t||{},u=d.borderRadius,h=void 0===u?0:u,f=d.backgroundColor,p=void 0===f?"transparent":f,m=d.overflow;t.opacity&&this.setOpacity(t),this.setTransform(e,t),s&&(n.save(),this.setShadow(t)),i&&this.setBackground(p,o,r,l,c),t.clipPath?this.clipPath(l,c,o,r,t.clipPath,i,!1):this.roundRect(l,c,o,r,h,i,!1),s&&n.restore(),a&&this.setBorder(e,t),"hidden"==m&&n.clip()},e.prototype.drawImage=function(e,t,i,a){return void 0===t&&(t={}),void 0===i&&(i={}),void 0===a&&(a=!0),It(this,void 0,void 0,(function(){var s=this;return $t(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,o){return It(s,void 0,void 0,(function(){var s,o,r,l,c,d,u,h,f,p,m,g,b,y,_,v,x,w,k,S,C=this;return $t(this,(function(I){return s=this.ctx,o=i.borderRadius,r=void 0===o?0:o,l=i.backgroundColor,c=void 0===l?"transparent":l,d=i.objectFit,u=void 0===d?"fill":d,h=i.backgroundSize,f=void 0===h?"fill":h,p=i.objectPosition,m=i.backgroundPosition,g=i.boxShadow,i.backgroundImage&&(u=f,p=m),g&&this.drawView(t,Object.assign(i,{backgroundColor:c||g&&(c||"#ffffff")}),!0,!1,!0),b=t.width,y=t.height,_=t.left,v=t.top,s.save(),x=t.contentSize.left-t.borderSize.left,w=t.contentSize.top-t.borderSize.top,a||(this.setOpacity(i),this.setTransform(t,i),this.setBackground(c,b,y,_,v),this.roundRect(_,v,b,y,r,!!(r||!g&&c),!1)),_+=x,v+=w,s.clip(),k=function(e){if("fill"!==u){var i=function(e,t,i){var a=e.objectFit,s=e.objectPosition,n=t.width/t.height,o=i.width/i.height,r=1,l="contain",c="cover";a==l&&n>=o||a==c&&n<o?r=t.height/i.height:(a==l&&n<o||a==c&&n>=o)&&(r=t.width/i.width);var d=i.width*r,u=i.height*r,h=s||[],f=h[0],p=h[1],m=Jt(f)?Xt(f,t.width):(t.width-d)*(Gt(f)?Xt(f,1):{left:0,center:.5,right:1}[f||"center"]),g=Jt(p)?Xt(p,t.height):(t.height-u)*(Gt(p)?Xt(p,1):{top:0,center:.5,bottom:1}[p||"center"]),b=function(e,t){return[(e-m)/r,(t-g)/r]},y=b(0,0),_=y[0],v=y[1],x=b(t.width,t.height),w=x[0],k=x[1],S=Math.max,C=Math.min;return{sx:S(_,0),sy:S(v,0),sw:C(w-_,i.width),sh:C(k-v,i.height),dx:S(m,0),dy:S(g,0),dw:C(d,t.width),dh:C(u,t.height)}}({objectFit:u,objectPosition:p},t.contentSize,e),a=i.sx,n=i.sy,o=i.sh,r=i.sw,l=i.dx,c=i.dy,d=i.dh,h=i.dw;Dt==Bt.MP_BAIDU?s.drawImage(e.src,l+_,c+v,h,d,a,n,r,o):s.drawImage(e.src,a,n,r,o,l+_,c+v,h,d)}else s.drawImage(e.src,_,v,b,y)},S=function(){s.restore(),C.drawView(t,i,!1,!0,!1),n(1)},function(e){k(e),S()}(e),[2]}))}))}))];case 1:return n.sent(),[2]}}))}))},e.prototype.drawText=function(e,t,i,a){var s=this,n=this.ctx,o=t.borderSize,r=t.contentSize,l=t.left,c=t.top,d=r.width,u=r.height,h=r.left-o.left||0,f=r.top-o.top||0,p=i.color,m=i.lineHeight,g=i.fontSize,b=i.fontWeight,y=i.fontFamily,_=i.fontStyle,v=i.textIndent,x=void 0===v?0:v,w=i.textAlign,k=i.textStroke,S=i.verticalAlign,C=void 0===S?Mi:S,I=i.backgroundColor,$=i.lineClamp,B=i.backgroundClip,T=i.textShadow,z=i.textDecoration;if(x=Yt(x)?x:0,this.drawView(t,i,B!=$i),m=Xt(m,g),e){n.save(),l+=h,c+=f;var M=a.fontHeight,P=a.descent,F=void 0===P?0:P,W=a.ascent,A=F+(void 0===W?0:W);switch(n.setFonts({fontFamily:y,fontSize:g,fontWeight:b,fontStyle:_}),n.setTextBaseline(Mi),n.setTextAlign(w),B?this.setBackground(I,d,u,l,c):n.setFillStyle(p),w){case Fi:break;case Wi:l+=.5*d;break;case Ai:l+=d}var O=a.lines*m,V=Math.ceil((u-O)/2);switch(V<0&&(V=0),C){case zi:break;case Mi:c+=V;break;case Pi:c+=2*V}var R=(m-M)/2,L=m/2,j=function(e){var t=n.measureText(e),i=t.actualBoundingBoxDescent,a=void 0===i?0:i,s=t.actualBoundingBoxAscent;return C==zi?{fix:A?void 0===s?0:s:L-R/2,lineY:A?0:R-R/2}:C==Mi?{fix:A?L+a/4:L,lineY:A?0:R}:C==Pi?{fix:A?m-a:L+R/2,lineY:A?2*R:R+R/2}:{fix:0,height:0,lineY:0}},E=function(e,t,i){var s=e;switch(w){case Fi:s+=i;break;case Wi:s=(e-=i/2)+i;break;case Ai:s=e,e-=i}if(z){n.setLineWidth(g/13),n.beginPath();var o=.1*a.fontHeight;/\bunderline\b/.test(z)&&(n.moveTo(e,t+a.fontHeight+o),n.lineTo(s,t+a.fontHeight+o)),/\boverline\b/.test(z)&&(n.moveTo(e,t-o),n.lineTo(s,t-o)),/\bline-through\b/.test(z)&&(n.moveTo(e,t+.5*a.fontHeight),n.lineTo(s,t+.5*a.fontHeight)),n.closePath(),n.setStrokeStyle(p),n.stroke()}},N=function(e,t,i){var a=function(){n.setLineWidth(k.width),n.setStrokeStyle(k.color),n.strokeText(e,t,i)},o="outset";k&&k.type!==o?(n.save(),s.setShadow({boxShadow:T}),n.fillText(e,t,i),n.restore(),a()):k&&k.type==o?(n.save(),s.setShadow({boxShadow:T}),a(),n.restore(),n.save(),n.fillText(e,t,i),n.restore()):(s.setShadow({boxShadow:T}),n.fillText(e,t,i))};if(!a.widths||1==a.widths.length&&a.widths[0].total+x<=r.width){var H=j(e),D=H.fix,U=void 0===D?0:D,q=H.lineY;return N(e,l+x,c+U),E(l+x,c+q,a&&a.widths&&a.widths[0].total||a.text),c+=m,n.restore(),void this.setBorder(t,i)}for(var Y=c,X=l,G="",J=0,Z=n.measureText("...").width,K=a.widths,Q=0;Q<K.length;Q++){var ee=K[Q].widths,te=0;G="",c+=1==(J+=1)?0:m,1==J&&x&&(te=x,X=l+x);for(var ie=0;ie<ee.length;ie++){1!==J&&x&&(X=l);var ae=ee[ie],se=ae.width,ne=ae.text,oe=(ee[ie+1]||{}).width;if(G+=ne,(te+=se)+(void 0===oe?0:oe)+(0==J?x:0)+(J==$?Z:0)>r.width){J>=$&&(G+="…"),J++,te=0;var re=j(G);U=re.fix,q=re.lineY,N(G,X,c+U),E(X,c+q,te),c+=m,G=""}else if(ie==ee.length-1){Q!=K.length-1&&J==$&&Z+te<r.width&&(G+="…");var le=j(G);U=le.fix,q=le.lineY,N(G,X,c+U),E(X,c+q,te)}if(c>Y+u||J>$)break}}n.restore()}},e.prototype.source=function(e){return It(this,void 0,void 0,(function(){var t,i,a,s,n=this;return $t(this,(function(o){switch(o.label){case 0:if(this.node=null,t=+new Date,"{}"==JSON.stringify(e))return[2];if(e.styles=e.styles||e.css||{},!e.type)for(i in e.type=Ti,e)["views","children","type","css","styles"].includes(i)||(e.styles[i]=e[i],delete e[i]);return e.styles.boxSizing||(e.styles.boxSizing="border-box"),[4,this.create(e)];case 1:return(a=o.sent())?(s=a.layout()||{},this.size=s,this.node=a,this.onEffectFinished().then((function(e){return n.lifecycle("onEffectSuccess",e)})).catch((function(e){return n.lifecycle("onEffectFail",e)})),this.performance&&console.log("布局用时："+(+new Date-t)+"ms"),[2,this.size]):[2,console.warn("no node")]}}))}))},e.prototype.getImageInfo=function(e){return this.imageBus[e]||(this.imageBus[e]=this.createImage(e,this.useCORS)),this.imageBus[e]},e.prototype.create=function(e,t){return It(this,void 0,void 0,(function(){function i(e,t,a){void 0===t&&(t={}),void 0===a&&(a=!0);var s=[];return e.forEach((function(e){var n=e.styles,o=void 0===n?{}:n,r=e.css,l=void 0===r?{}:r,c=e.children,d=void 0===c?[]:c,u=e.views,h=void 0===u?[]:u,f=e.text,p=void 0===f?"":f,m=e.type,g=void 0===m?"":m;!d&&h&&(e.children=d=h);var b;b=Ct(Ct(a?Ct({},t):{},o),l);var y={},_={},v={};if(Object.keys(b).map((function(e){if(e.includes("padding")||e.includes("margin")){var t=function(e,t){var i,a,s,n,o=[n=(s=e).match(/([a-z]+)/)[1],ui(s.split(n)[1])],r=o[0],l=o[1],c=t.split(" ");if(l)return(i={})[r+l]=t,i;if(c.length&&!l){var d=c[0],u=c[1],h=c[2],f=c[3];return(a={})[r+Tt[0]]=d,a[r+Tt[1]]=u||d,a[r+Tt[2]]=h||d,a[r+Tt[3]]=f||u||d,a}}(e,b[e]);Object.keys(t).map((function(e){e.includes("Left")?_[e]=t[e]:e.includes("Right")?v[e]=t[e]:y[e]=t[e]}))}})),b.textIndent&&(_.textIndent=b.textIndent,delete t.textIndent),""!==p){var x=Array.from(p);x.forEach((function(e,t){var i=Object.assign({},b,y);0===t?Object.assign(i,_):t==x.length-1&&Object.assign(i,v),delete i.padding,delete i.margin,s.push({type:"text",text:e,styles:i})}))}if(g==Ii||g==Bi)s.push(e);else if("block"===o.display&&d.length>0){var w=i(d,b,!1);e.children=w,e.flattened=!0,s.push(e)}else d.length>0&&(w=i(d,b,a),s=s.concat(w))})),s}var a,s,n,o,r,l,c,d,u,h,f,p,m,g,b,y,_,v,x,w,k,S,C,I;return $t(this,(function($){switch($.label){case 0:if(!e)return[2];if(e.styles||(e.styles=e.css||{}),a=e.type,s=e.show,n=void 0===s||s,o=a==Ii,r=[$i,Bi].includes(a),l="textBox"==a,c=e.styles||{},d=c.backgroundImage,u=c.display,o&&!e.src&&!e.url)return[2];if("none"==u||!n)return[2];if(r||l){if(h=e.children,f=e.views,!h&&f&&(e.children=h=f),!e.text&&(!h||h&&!h.length))return[2];h&&h.length&&!e.flattened&&(p=i(e.children||e.views),e.type="view",e.children=p)}if(!(o||e.type==Ti&&d))return[3,4];m=o?e.src:"",g=/url\(['"]?(.*?)['"]?\)/.exec(d),d&&g&&g[1]&&(m=g[1]||""),$.label=1;case 1:return $.trys.push([1,3,,4]),[4,this.getImageInfo(m)];case 2:return b=$.sent(),y=b.width,_=b.height,!(v=b.path)&&o?[2]:(v&&(e.attributes=Object.assign(e.attributes||{},{width:y,height:_,path:v,src:v,naturalSrc:m})),[3,4]);case 3:return x=$.sent(),e.type!=Ti?[2]:(this.lifecycle("onEffectFail",Ct(Ct({},x),{src:m})),[3,4]);case 4:if(this.count+=1,w=new Si(e,t,this.root,this.ctx),!(k=e.children||e.views))return[3,8];S=0,$.label=5;case 5:return S<k.length?(C=k[S],[4,this.create(C,w)]):[3,8];case 6:(I=$.sent())&&w.add(I),$.label=7;case 7:return S++,[3,5];case 8:return[2,w]}}))}))},e.prototype.drawNode=function(e,t){return void 0===t&&(t=!1),It(this,void 0,void 0,(function(){var i,a,s,n,o,r,l,c,d,u,h,f,p,m,g,b,y,_,v,x,w,k,S;return $t(this,(function(C){switch(C.label){case 0:return i=e.layoutBox,a=e.computedStyle,s=e.attributes,n=e.name,o=e.children,r=e.fixedLine,l=e.attributes,c=l.src,d=l.text,u=a.position,h=a.backgroundImage,f=a.backgroundRepeat,["fixed"].includes(u)&&!t?[2]:(this.ctx.save(),n!==Ti?[3,7]:c&&h?f?[4,this.drawPattern(s,i,a)]:[3,2]:[3,5]);case 1:return C.sent(),[3,4];case 2:return[4,this.drawImage(s,i,a,!1)];case 3:C.sent(),C.label=4;case 4:return[3,6];case 5:this.drawView(i,a),C.label=6;case 6:return[3,10];case 7:return n===Ii&&c?[4,this.drawImage(s,i,a,!1)]:[3,9];case 8:return C.sent(),[3,10];case 9:n===$i?this.drawText(d,i,a,s):n===Bi&&Ci.api&&Ci.api.draw(d,this,i,a),C.label=10;case 10:if(this.progress+=1,m=(p=r||{}).beforeElements,g=p.afterElements,!m)return[3,14];b=0,y=m,C.label=11;case 11:return b<y.length?(S=y[b],[4,this.drawNode(S)]):[3,14];case 12:C.sent(),C.label=13;case 13:return b++,[3,11];case 14:if(!o)return[3,18];_=Object.values?Object.values(o):Object.keys(o).map((function(e){return o[e]})),v=0,x=_,C.label=15;case 15:return v<x.length?"absolute"===(S=x[v]).computedStyle.position?[3,17]:[4,this.drawNode(S)]:[3,18];case 16:C.sent(),C.label=17;case 17:return v++,[3,15];case 18:if(!g)return[3,22];w=0,k=g,C.label=19;case 19:return w<k.length?(S=k[w],[4,this.drawNode(S)]):[3,22];case 20:C.sent(),C.label=21;case 21:return w++,[3,19];case 22:return this.ctx.restore(),[2]}}))}))},e.prototype.render=function(e){var t=this;return void 0===e&&(e=30),new Promise((function(i,a){return It(t,void 0,void 0,(function(){var t,s,n,o,r,l,c,d,u,h;return $t(this,(function(f){switch(f.label){case 0:return t=+new Date,this.init(),[4,(p=e,void 0===p&&(p=0),new Promise((function(e){return setTimeout(e,p)})))];case 1:f.sent(),f.label=2;case 2:if(f.trys.push([2,14,,15]),!this.node)return[3,12];if(s=this.root.fixedLine||{},n=s.beforeElements,o=s.afterElements,!n)return[3,6];r=0,l=n,f.label=3;case 3:return r<l.length?(u=l[r],[4,this.drawNode(u,!0)]):[3,6];case 4:f.sent(),f.label=5;case 5:return r++,[3,3];case 6:return[4,this.drawNode(this.node)];case 7:if(f.sent(),!o)return[3,11];c=0,d=o,f.label=8;case 8:return c<d.length?(u=d[c],[4,this.drawNode(u,!0)]):[3,11];case 9:f.sent(),f.label=10;case 10:return c++,[3,8];case 11:return i(this.node),[3,13];case 12:this.lifecycle("onEffectFail","node is empty"),f.label=13;case 13:return[3,15];case 14:return h=f.sent(),this.lifecycle("onEffectFail",h),a(h),[3,15];case 15:return this.performance&&console.log("渲染用时："+(+new Date-t-30)+"ms"),[2]}var p}))}))}))},e.prototype.onEffectFinished=function(){var e=this,t=Object.keys(this.imageBus).map((function(t){return e.imageBus[t]}));return Promise.all(t)},e.prototype.destroy=function(){this.node=[]},e.prototype.save=function(e){try{var t=e||{},i=t.fileType,a=void 0===i?"png":i,s=t.quality,n=void 0===s?1:s;return this.canvas.toDataURL("image/".concat(a),n)}catch(o){return this.lifecycle("onEffectFail","image cross domain"),o}},e}();Bt.WEB==Dt&&(window.Painter=Oi);var Vi;const Ri=xe({name:"lime-painter",mixins:[mt,(Vi="painter",{provide(){return{[Vi]:this}},data:()=>({el:{id:null,css:{},views:[]}}),watch:{css:{handler(e){this.canvasId&&(this.el.css=("object"==typeof e?e:e&&Object.assign(...((e="")=>e.split(";").filter((e=>e&&!/^[\n\s]+$/.test(e))).map((e=>{const t=e.slice(0,e.indexOf(":")),i=e.slice(e.indexOf(":")+1);return{[t.replace(/-([a-z])/g,(function(){return arguments[1].toUpperCase()})).replace(/\s+/g,"")]:i.replace(/^\s+/,"").replace(/\s+$/,"")||""}})))(e)))||{},this.canvasWidth=this.el.css&&this.el.css.width||this.canvasWidth,this.canvasHeight=this.el.css&&this.el.css.height||this.canvasHeight)},immediate:!0}}}),{}],data:()=>({use2dCanvas:!1,canvasHeight:150,canvasWidth:null,parentWidth:0,inited:!1,progress:0,firstRender:0,done:!1,tasks:[]}),computed:{styles(){return`${this.size}${this.customStyle||""};`+(this.hidden&&"position: fixed; left: 1500rpx;")},canvasId(){return`l-painter${this._&&this._.uid||this._uid}`},size(){if(this.boardWidth&&this.boardHeight)return`width:${this.boardWidth}px; height: ${this.boardHeight}px;`},dpr(){return this.pixelRatio||le().pixelRatio},boardWidth(){const{width:e=0}=this.elements&&this.elements.css||this.elements||this,t=wt(e||this.width);return t||Math.max(t,wt(this.canvasWidth))},boardHeight(){const{height:e=0}=this.elements&&this.elements.css||this.elements||this,t=wt(e||this.height);return t||Math.max(t,wt(this.canvasHeight))},hasBoard(){return this.board&&Object.keys(this.board).length},elements(){return this.hasBoard?this.board:JSON.parse(JSON.stringify(this.el))}},created(){this.use2dCanvas="2d"===this.type&&!1},async mounted(){await bt(30),await this.getParentWeith(),this.$nextTick((()=>{setTimeout((()=>{this.$watch("elements",this.watchRender,{deep:!0,immediate:!0})}),30)}))},unmounted(){this.done=!1,this.inited=!1,this.firstRender=0,this.progress=0,this.painter=null,clearTimeout(this.rendertimer)},methods:{async watchRender(e,t){e&&e.views&&(this.firstRender?this.firstRender:e.views.length)&&Object.keys(e).length&&JSON.stringify(e)!=JSON.stringify(t)&&(this.firstRender=1,this.progress=0,this.done=!1,clearTimeout(this.rendertimer),this.rendertimer=setTimeout((()=>{this.render(e)}),this.beforeDelay))},async setFilePath(e,t){let i=e;const{pathType:a=this.pathType}=t||this;var s;return"base64"!=a||gt(e)?"url"==a&&gt(e)&&(i=await(s=e,new Promise(((e,t)=>{let i=s.split(",")[0].split(":")[1].split(";")[0],a=atob(s.split(",")[1]),n=new ArrayBuffer(a.length),o=new Uint8Array(n);for(let s=0;s<a.length;s++)o[s]=a.charCodeAt(s);e(URL.createObjectURL(new Blob([o],{type:i})))})))):i=await kt(e),t&&t.isEmit&&this.$emit("success",i),i},async getSize(e){const{width:t}=e.css||e,{height:i}=e.css||e;this.size||(t||i?(this.canvasWidth=t||this.canvasWidth,this.canvasHeight=i||this.canvasHeight,await bt(30)):await this.getParentWeith())},canvasToTempFilePathSync(e){this.tasks.push(e),this.done&&this.runTask()},runTask(){for(;this.tasks.length;){const e=this.tasks.shift();this.canvasToTempFilePath(e)}},getParentWeith(){return new Promise((e=>{L().in(this).select(".lime-painter").boundingClientRect().exec((t=>{const{width:i,height:a}=t[0]||{};this.parentWidth=Math.ceil(i||0),this.canvasWidth=this.parentWidth||300,this.canvasHeight=a||this.canvasHeight||150,e(t[0])}))}))},async render(e={}){if(!Object.keys(e).length)return console.error("空对象");this.progress=0,this.done=!1,await this.getSize(e);const t=await this.getContext();let{use2dCanvas:i,boardWidth:a,boardHeight:s,canvas:n,afterDelay:o}=this;if(i&&!n)return Promise.reject(new Error("canvas 没创建"));if(this.boundary={top:0,left:0,width:a,height:s},this.painter=null,!this.painter){const{width:i}=e.css||e;e.css,!i&&this.parentWidth&&Object.assign(e,{width:this.parentWidth});const o={context:t,canvas:n,width:a,height:s,pixelRatio:this.dpr,useCORS:this.useCORS,createImage:St.bind(this),performance:this.performance,listen:{onProgress:e=>{this.progress=e,this.$emit("progress",e)},onEffectFail:e=>{this.$emit("faill",e)}}};this.painter=new Oi(o)}try{const{width:a,height:s}=await this.painter.source(JSON.parse(JSON.stringify(e)));return this.boundary.height=this.canvasHeight=s,this.boundary.width=this.canvasWidth=a,await bt(this.sleep),await this.painter.render(),await new Promise((e=>this.$nextTick(e))),i||await this.canvasDraw(),o&&i&&await bt(o),this.$emit("done"),this.done=!0,this.isCanvasToTempFilePath&&this.canvasToTempFilePath().then((e=>{this.$emit("success",e.tempFilePath)})).catch((e=>{this.$emit("fail",new Error(JSON.stringify(e)))})),this.runTask(),Promise.resolve({ctx:t,draw:this.painter,node:this.node})}catch(r){}},canvasDraw(e=!1){return new Promise(((t,i)=>this.ctx.draw(e,(()=>setTimeout((()=>t()),this.afterDelay)))))},async getContext(){if(!this.canvasWidth)return this.$emit("fail","painter no size"),console.error("[lime-painter]: 给画板或父级设置尺寸"),Promise.reject();if(this.ctx&&this.inited)return Promise.resolve(this.ctx);const{type:e,use2dCanvas:t,dpr:i,boardWidth:a,boardHeight:s}=this,n=()=>new Promise((e=>{L().in(this).select(`#${this.canvasId}`).boundingClientRect().exec((t=>{if(t){const i=pe(this.canvasId,this);if(this.inited||(this.inited=!0,this.use2dCanvas=!1,this.canvas=t),!i.measureText){let e=function(e){let t=0;for(let i=0;i<e.length;i++)e.charCodeAt(i)>0&&e.charCodeAt(i)<128?t++:t+=2;return t};i.measureText=t=>{let a=i.state&&i.state.fontSize||12;const s=i.__font;return s&&12==a&&(a=parseInt(s.split(" ")[3],10)),a/=2,{width:e(t)*a}}}this.ctx=i,e(this.ctx)}else console.error("[lime-painter] no node")}))}));return t?new Promise((t=>{L().in(this).select(`#${this.canvasId}`).node().exec((i=>{let{node:a}=i&&i[0]||{};if(a){const i=a.getContext(e);this.inited||(this.inited=!0,this.use2dCanvas=!0,this.canvas=a),this.ctx=i,t(this.ctx)}else console.error("[lime-painter]: no size")}))})):n()},canvasToTempFilePath(e={}){return new Promise((async(t,i)=>{const{use2dCanvas:a,canvasId:s,dpr:n,fileType:o,quality:r}=this;this.boundary;const l=Object.assign({canvasId:s,id:s,fileType:o,quality:r},e,{success:async i=>{try{const a=await this.setFilePath(i.tempFilePath||i,e),s=Object.assign(i,{tempFilePath:a});e.success&&e.success(s),t(s)}catch(a){this.$emit("fail",a)}}});if(a){l.canvas=this.canvas;try{const i=this.canvas.toDataURL(`image/${e.fileType||o}`.replace(/pg/,"peg"),e.quality||r);if(/data:,/.test(i))fe(l,this);else{const a=await this.setFilePath(i,e);e.success&&e.success({tempFilePath:a}),t({tempFilePath:a})}}catch(c){e.fail&&e.fail(c),i(c)}}else fe(l,this)}))}}},[["render",function(a,s,n,o,r,l){const d=me,h=m;return e(),t(h,{class:"lime-painter",ref:"limepainter"},{default:c((()=>[l.canvasId&&l.size?(e(),t(h,{key:0,style:i(l.styles)},{default:c((()=>[r.use2dCanvas?(e(),t(d,{key:0,class:"lime-painter__canvas",id:l.canvasId,type:"2d",style:i(l.size)},null,8,["id","style"])):(e(),t(d,{key:1,class:"lime-painter__canvas",id:l.canvasId,"canvas-id":l.canvasId,style:i(l.size),width:l.boardWidth*l.dpr,height:l.boardHeight*l.dpr,hidpi:a.hidpi},null,8,["id","canvas-id","style","width","height","hidpi"]))])),_:1},8,["style"])):p("",!0),u(a.$slots,"default",{},void 0,!0)])),_:3},512)}],["__scopeId","data-v-3bff4ec4"]]);function Li(e,t=14){let i=0;for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);i+=s>=19968&&s<=40959?t:.5*t}return i}const ji=async e=>{const t=e.width,i=k.$store("user").userInfo;await Hi(e.shareInfo.path,e.shareInfo.query);const a=function(e,t=14,i="sans-serif"){if("undefined"==typeof uni||"function"!=typeof pe)return Li(e,t);try{const a=pe("tempCanvasForText");return a.setFontSize(t),a.font=`${t}px ${i}`,a.measureText(e).width}catch(a){return Li(e,t)}}(i.nickname,14);return[{type:"image",src:Ni(k.$url.cdn(k.$store("app").platform.share.posterInfo.user_bg)),css:{width:t,position:"fixed","object-fit":"contain",top:"0",left:"0",zIndex:-1}},{type:"text",text:i.nickname,css:{color:"#333",fontSize:14,textAlign:"center",fontFamily:"sans-serif",position:"fixed",top:.4*t,left:(t-a)/2}},{type:"image",src:Ni(k.$url.cdn(i.avatar)),css:{position:"fixed",left:.4*t,top:.16*t,width:.2*t,height:.2*t}},{type:"qrcode",text:e.shareInfo.link,css:{position:"fixed",left:.35*t,top:.84*t,width:.3*t,height:.3*t}}]};function Ei(e){switch(e.shareInfo.poster.type){case"user":return ji(e);case"goods":return(async e=>{const t=e.width,i=k.$store("user").userInfo;return await Hi(e.shareInfo.path,e.shareInfo.query),[{type:"image",src:Ni(k.$url.cdn(k.$store("app").platform.share.posterInfo.goods_bg)),css:{width:t,position:"fixed","object-fit":"contain",top:"0",left:"0",zIndex:-1}},{type:"text",text:i.nickname,css:{color:"#333",fontSize:16,fontFamily:"sans-serif",position:"fixed",top:.06*t,left:.22*t}},{type:"image",src:Ni(k.$url.cdn(i.avatar)),css:{position:"fixed",left:.04*t,top:.04*t,width:.14*t,height:.14*t}},{type:"image",src:Ni(e.shareInfo.poster.image),css:{position:"fixed",left:.03*t,top:.21*t,width:.94*t,height:.94*t}},{type:"text",text:e.shareInfo.poster.title,css:{position:"fixed",left:.04*t,top:1.18*t,color:"#333",fontSize:14,lineHeight:15,maxWidth:.91*t}},{type:"text",text:"￥"+e.shareInfo.poster.price,css:{position:"fixed",left:.04*t,top:1.31*t,fontSize:20,fontFamily:"OPPOSANS",color:"#333"}},{type:"text",text:e.shareInfo.poster.original_price>0?"￥"+e.shareInfo.poster.original_price:"",css:{position:"fixed",left:.3*t,top:1.33*t,color:"#999",fontSize:10,fontFamily:"OPPOSANS",textDecoration:"line-through"}},{type:"qrcode",text:e.shareInfo.link,css:{position:"fixed",left:.75*t,top:1.3*t,width:.2*t,height:.2*t}}]})(e);case"groupon":return(async e=>{const t=e.width,i=k.$store("user").userInfo;return await Hi(e.shareInfo.path,e.shareInfo.query),[{type:"image",src:Ni(k.$url.cdn(k.$store("app").platform.share.posterInfo.groupon_bg)),css:{width:t,position:"fixed","object-fit":"contain",top:"0",left:"0",zIndex:-1}},{type:"text",text:i.nickname,css:{color:"#333",fontSize:16,fontFamily:"sans-serif",position:"fixed",top:.06*t,left:.22*t}},{type:"image",src:Ni(k.$url.cdn(i.avatar)),css:{position:"fixed",left:.04*t,top:.04*t,width:.14*t,height:.14*t}},{type:"image",src:Ni(e.shareInfo.poster.image),css:{position:"fixed",left:.03*t,top:.21*t,width:.94*t,height:.94*t,borderRadius:10}},{type:"text",text:e.shareInfo.poster.title,css:{color:"#333",fontSize:14,position:"fixed",top:1.18*t,left:.04*t,maxWidth:.91*t,lineHeight:5}},{type:"text",text:"￥"+e.shareInfo.poster.price,css:{color:"#ff0000",fontSize:20,fontFamily:"OPPOSANS",position:"fixed",top:1.3*t,left:.04*t}},{type:"text",text:e.shareInfo.poster.grouponNum+"人团",css:{color:"#fff",fontSize:12,fontFamily:"OPPOSANS",position:"fixed",left:.84*t,top:1.3*t}},{type:"qrcode",text:e.shareInfo.link,css:{position:"fixed",left:.75*t,top:1.4*t,width:.2*t,height:.2*t}}]})(e)}}function Ni(e){return"https:"===window.location.protocol&&0===e.indexOf("http:")&&(e=e.replace("http:","https:")),e}async function Hi(e,t){return"data:image/png;base64,"+(await ge.getWxaQrcode(e,t)).data}const Di=xe({__name:"index",props:{show:{type:Boolean,default:!1},shareInfo:{type:Object,default:()=>{}}},emits:["success","close"],setup(a,{expose:s,emit:n}){const o=a,u=b({css:{width:.9*k.$platform.device.windowWidth,height:600},views:[]}),g=n,y=()=>{g("close")},_=K(),v=K(),x=e=>{v.value=e},S=()=>{["WechatOfficialAccount","H5"].includes(k.$platform.name)?k.$helper.toast("请长按图片保存"):be({filePath:v.value,success:e=>{y(),k.$helper.toast("保存成功")},fail:e=>{k.$helper.toast("保存失败"),console.log("图片保存失败:",e)}})};return s({getPoster:async function(){v.value=void 0,u.views=await Ei({width:u.css.width,shareInfo:o.shareInfo}),await(async()=>{await _.value.render(w(u))})()}}),(s,n)=>{const o=H,g=m,b=T,C=r(l("l-painter"),Ri),I=r(l("su-popup"),Oe);return e(),t(I,{show:a.show,round:"10",onClose:y,type:"center",class:"popup-box"},{default:c((()=>[d(g,{class:"ss-flex-col ss-col-center ss-row-center"},{default:c((()=>[v.value?(e(),t(o,{key:0,class:"poster-img",src:v.value,style:i({height:u.css.height+"px",width:u.css.width+"px"}),"show-menu-by-longpress":!0},null,8,["src","style"])):p("",!0)])),_:1}),v.value?(e(),t(g,{key:0,class:"poster-btn-box ss-m-t-20 ss-flex ss-row-between ss-col-center"},{default:c((()=>[d(b,{class:"cancel-btn ss-reset-button",onClick:y},{default:c((()=>[h("取消")])),_:1}),d(b,{class:"save-btn ss-reset-button ui-BG-Main",onClick:S},{default:c((()=>[h(f(["wechatOfficialAccount","H5"].includes(w(k).$platform.name)?"长按图片保存":"保存图片"),1)])),_:1})])),_:1})):p("",!0),d(C,{isCanvasToTempFilePath:"",pathType:"url",onSuccess:x,hidden:"",ref_key:"painterRef",ref:_},null,512)])),_:1},8,["show"])}}},[["__scopeId","data-v-1a835640"]]),Ui=xe({__name:"s-share-modal",props:{shareInfo:{type:Object,default(){}}},setup(i){const a=F((()=>k.$store("modal").share)),n=F((()=>k.$store("app").platform.share)),o=K(""),u=i,f=b({showShareGuide:!1,showPosterModal:!1}),g=()=>{ye(),k.$store("user").isLogin?(w(o).getPoster(),f.showPosterModal=!0):Q()},y=()=>{ye(),["WechatOfficialAccount","H5"].includes(k.$platform.name)&&(f.showShareGuide=!0)},_=()=>{k.$helper.copyText(u.shareInfo.link),ye()};function v(){f.showShareGuide=!1}return(u,b)=>{const x=r(l("su-popup"),Oe),S=H,C=m,I=s,$=T;return e(),t(C,null,{default:c((()=>[d(x,{show:f.showShareGuide,showClose:!1,onClose:v},null,8,["show"]),f.showShareGuide?(e(),t(C,{key:0,class:"guide-wrap"},{default:c((()=>[d(S,{class:"guide-image",src:w(k).$url.static("/static/img/shop/share/share_guide.png")},null,8,["src"])])),_:1})):p("",!0),d(x,{show:a.value,round:"10",showClose:!1,onClose:w(ye)},{default:c((()=>[d(C,{class:"share-box"},{default:c((()=>[d(C,{class:"share-list-box ss-flex"},{default:c((()=>[n.value.methods.includes("forward")?(e(),t($,{key:0,class:"share-item share-btn ss-flex-col ss-col-center","open-type":"share",onClick:y},{default:c((()=>[d(S,{class:"share-img",src:w(k).$url.static("/static/img/shop/share/share_wx.png"),mode:""},null,8,["src"]),d(I,{class:"share-title"},{default:c((()=>[h("微信好友")])),_:1})])),_:1})):p("",!0),n.value.methods.includes("poster")?(e(),t($,{key:1,class:"share-item share-btn ss-flex-col ss-col-center",onClick:g},{default:c((()=>[d(S,{class:"share-img",src:w(k).$url.static("/static/img/shop/share/share_poster.png"),mode:""},null,8,["src"]),d(I,{class:"share-title"},{default:c((()=>[h("生成海报")])),_:1})])),_:1})):p("",!0),n.value.methods.includes("link")?(e(),t($,{key:2,class:"share-item share-btn ss-flex-col ss-col-center",onClick:_},{default:c((()=>[d(S,{class:"share-img",src:w(k).$url.static("/static/img/shop/share/share_link.png"),mode:""},null,8,["src"]),d(I,{class:"share-title"},{default:c((()=>[h("复制链接")])),_:1})])),_:1})):p("",!0)])),_:1}),d(C,{class:"share-foot ss-flex ss-row-center ss-col-center",onClick:w(ye)},{default:c((()=>[h(" 取消 ")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["show","onClose"]),d(Di,{ref_key:"SharePosterRef",ref:o,show:f.showPosterModal,shareInfo:i.shareInfo,onClose:b[0]||(b[0]=e=>f.showPosterModal=!1)},null,8,["show","shareInfo"])])),_:1})}}},[["__scopeId","data-v-db73dc13"]]),qi=xe({__name:"s-menu-tools",setup(i){const a=F((()=>k.$store("modal").menu));const s=[{url:"/pages/index/index",icon:"/static/img/shop/tools/home.png",title:"首页"},{url:"/pages/index/search",icon:"/static/img/shop/tools/search.png",title:"搜索"},{url:"/pages/index/user",icon:"/static/img/shop/tools/user.png",title:"个人中心"},{url:"/pages/index/cart",icon:"/static/img/shop/tools/cart.png",title:"购物车"},{url:"/pages/user/goods-log",icon:"/static/img/shop/tools/browse.png",title:"浏览记录"},{url:"/pages/user/goods-collect",icon:"/static/img/shop/tools/collect.png",title:"我的收藏"},{url:"/pages/chat/index",icon:"/static/img/shop/tools/service.png",title:"客服"}];return(i,n)=>{const o=r(l("su-status-bar"),Ve),u=m,g=H,b=T,y=r(l("su-popup"),Oe);return e(),t(y,{show:a.value,type:"top",round:"20",backgroundColor:"#F0F0F0",onClose:w(_e)},{default:c((()=>[d(o),d(u,{class:"tools-wrap ss-m-x-30 ss-m-b-16"},{default:c((()=>[d(u,{class:"title ss-m-b-34 ss-p-t-20"},{default:c((()=>[h("快捷菜单")])),_:1}),d(u,{class:"container-list ss-flex ss-flex-wrap"},{default:c((()=>[(e(),_(v,null,x(s,(i=>d(u,{class:"list-item ss-m-b-24",key:i.title},{default:c((()=>[d(u,{class:"ss-flex-col ss-col-center"},{default:c((()=>[d(b,{class:"ss-reset-button list-image ss-flex ss-row-center ss-col-center",onClick:e=>function(e){_e(),e.url&&k.$router.go(e.url)}(i)},{default:c((()=>[a.value?(e(),t(g,{key:0,src:w(k).$url.static(i.icon),class:"list-icon"},null,8,["src"])):p("",!0)])),_:2},1032,["onClick"]),d(u,{class:"list-title ss-m-t-20"},{default:c((()=>[h(f(i.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024))),64))])),_:1})])),_:1})])),_:1},8,["show","onClose"])}}},[["__scopeId","data-v-0ef10a3a"]]),Yi=xe({__name:"s-layout",props:{title:{type:String,default:""},navbar:{type:String,default:"normal"},opacityBgUi:{type:String,default:"bg-white"},color:{type:String,default:""},tools:{type:String,default:"title"},keyword:{type:String,default:""},navbarStyle:{type:Object,default:()=>({styleType:"",type:"",color:"",src:"",list:[],alwaysShow:0})},bgStyle:{type:Object,default:()=>({src:"",color:"var(--ui-BG-1)"})},tabbar:{type:[String,Boolean],default:""},onShareAppMessage:{type:[Boolean,Object],default:!0},leftWidth:{type:[Number,String],default:100},rightWidth:{type:[Number,String],default:100},defaultSearch:{type:String,default:""},showLeftButton:{type:Boolean,default:!1}},emits:["search"],setup(s,{emit:n}){const o=s,h=n,f=k.$store("sys");k.$store("user"),k.$store("app"),k.$store("modal");const g=F((()=>f)),b=F((()=>"normal"===o.navbar||"normal"===o.navbarStyle.styleType?"normal":"inner")),y=F((()=>"inner"===b.value?{background:`${o.bgStyle.backgroundColor||o.bgStyle.color} url(${k.$url.cdn(o.bgStyle.backgroundImage)}) no-repeat top center / 100% auto`}:{})),_=F((()=>"normal"===b.value?{background:`${o.bgStyle.backgroundColor||o.bgStyle.color} url(${k.$url.cdn(o.bgStyle.backgroundImage)}) no-repeat top center / 100% auto`}:{})),v=F((()=>!0===o.onShareAppMessage?k.$platform.share.getShareInfo():ve(o.onShareAppMessage)?{}:(k.$platform.share.updateShareInfo(o.onShareAppMessage),o.onShareAppMessage)));return V((()=>{ve(v.value)||k.$platform.share.updateShareInfo(v.value)})),(n,o)=>{var f,x,S;const C=r(l("su-navbar"),Re),I=r(l("s-custom-navbar"),Ne),$=r(l("su-inner-navbar"),He),B=m,T=r(l("s-tabbar"),qe),z=r(l("s-auth-modal"),pt),M=r(l("s-share-modal"),Ui),P=r(l("s-menu-tools"),qi);return e(),t(B,{class:a(["page-app",["theme-"+(null==(f=g.value)?void 0:f.mode),"main-"+(null==(x=g.value)?void 0:x.theme),"font-"+(null==(S=g.value)?void 0:S.fontSize)]])},{default:c((()=>[d(B,{class:"page-main",style:i([y.value])},{default:c((()=>["normal"===s.navbar?(e(),t(C,{key:0,title:s.title,statusBar:"",color:s.color,tools:s.tools,opacityBgUi:s.opacityBgUi,onSearch:o[0]||(o[0]=e=>h("search",e)),defaultSearch:s.defaultSearch},null,8,["title","color","tools","opacityBgUi","defaultSearch"])):"custom"===s.navbar&&"normal"===b.value?(e(),t(I,{key:1,data:s.navbarStyle,showLeftButton:s.showLeftButton},null,8,["data","showLeftButton"])):p("",!0),d(B,{class:"page-body",style:i([_.value])},{default:c((()=>{var a,o;return["inner"===s.navbar?(e(),t($,{key:0,title:s.title},null,8,["title"])):p("",!0),"inner"===s.navbar?(e(),t(B,{key:1,style:i([{paddingTop:(null==(o=null==(a=w(k))?void 0:a.$platform)?void 0:o.navbar)+"px"}])},null,8,["style"])):p("",!0),"custom"===s.navbar&&"inner"===b.value?(e(),t(I,{key:2,data:s.navbarStyle,showLeftButton:s.showLeftButton},null,8,["data","showLeftButton"])):p("",!0),u(n.$slots,"default",{},void 0,!0),""!==s.tabbar?(e(),t(T,{key:3,path:s.tabbar},null,8,["path"])):p("",!0)]})),_:3},8,["style"])])),_:3},8,["style"]),d(B,{class:"page-modal"},{default:c((()=>[d(z),d(M,{shareInfo:v.value},null,8,["shareInfo"]),d(P)])),_:1})])),_:3},8,["class"])}}},[["__scopeId","data-v-5d57fd0b"]]);export{Yi as S,Le as _,Ie as a,ke as b,Oe as c,Be as d,$e as e,Ve as f,Xe as g,Ri as h,st as i,Je as j,nt as m};
